
<!doctype html>
<html lang="en" class="no-js">
  <head>
    
      <meta charset="utf-8">
      <meta name="viewport" content="width=device-width,initial-scale=1">
      
        <meta name="description" content="An python study node">
      
      
        <meta name="author" content="ricolxwz">
      
      
        <link rel="canonical" href="https://py.ricolxwz.de/en/foundation/module/">
      
      
        <link rel="prev" href="../io/">
      
      
        <link rel="next" href="../network/">
      
      
      <link rel="icon" href="../../../assets/images/favicon.png">
      <meta name="generator" content="mkdocs-1.6.1, mkdocs-material-9.5.44">
    
    
      
        <title>模块/包/库 - 派森贰</title>
      
    
    
      <link rel="stylesheet" href="../../../assets/stylesheets/main.0253249f.min.css">
      
        
        <link rel="stylesheet" href="../../../assets/stylesheets/palette.06af60db.min.css">
      
      

  
  
  
  
  <style>:root{--md-annotation-icon:url('data:image/svg+xml;charset=utf-8,<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M8.17 2.76A10.1 10.1 0 0 1 12 2c1.31 0 2.61.26 3.83.76 1.21.5 2.31 1.24 3.24 2.17s1.67 2.03 2.17 3.24c.5 1.22.76 2.52.76 3.83 0 2.65-1.05 5.2-2.93 7.07A9.97 9.97 0 0 1 12 22a10.1 10.1 0 0 1-3.83-.76 10 10 0 0 1-3.24-2.17A9.97 9.97 0 0 1 2 12c0-2.65 1.05-5.2 2.93-7.07.93-.93 2.03-1.67 3.24-2.17M12 17l1.56-3.42L17 12l-3.44-1.56L12 7l-1.57 3.44L7 12l3.43 1.58z"/></svg>');}</style>


    
    
      
    
    
      
        
        
        <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
        <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Roboto:300,300i,400,400i,700,700i%7CRoboto+Mono:400,400i,700,700i&display=fallback">
        <style>:root{--md-text-font:"Roboto";--md-code-font:"Roboto Mono"}</style>
      
    
    
      <link rel="stylesheet" href="../../../stylesheets/extra.css">
    
      <link rel="stylesheet" href="https://unpkg.com/katex@0/dist/katex.min.css">
    
    <script>__md_scope=new URL("../../..",location),__md_hash=e=>[...e].reduce(((e,_)=>(e<<5)-e+_.charCodeAt(0)),0),__md_get=(e,_=localStorage,t=__md_scope)=>JSON.parse(_.getItem(t.pathname+"."+e)),__md_set=(e,_,t=localStorage,a=__md_scope)=>{try{t.setItem(a.pathname+"."+e,JSON.stringify(_))}catch(e){}}</script>
    
      
  


  
  

<script id="__analytics">function __md_analytics(){function e(){dataLayer.push(arguments)}window.dataLayer=window.dataLayer||[],e("js",new Date),e("config","G-JMVQ0KN6WN"),document.addEventListener("DOMContentLoaded",(function(){document.forms.search&&document.forms.search.query.addEventListener("blur",(function(){this.value&&e("event","search",{search_term:this.value})}));document$.subscribe((function(){var t=document.forms.feedback;if(void 0!==t)for(var a of t.querySelectorAll("[type=submit]"))a.addEventListener("click",(function(a){a.preventDefault();var n=document.location.pathname,d=this.getAttribute("data-md-value");e("event","feedback",{page:n,data:d}),t.firstElementChild.disabled=!0;var r=t.querySelector(".md-feedback__note [data-md-value='"+d+"']");r&&(r.hidden=!1)})),t.hidden=!1})),location$.subscribe((function(t){e("config","G-JMVQ0KN6WN",{page_path:t.pathname})}))}));var t=document.createElement("script");t.async=!0,t.src="https://www.googletagmanager.com/gtag/js?id=G-JMVQ0KN6WN",document.getElementById("__analytics").insertAdjacentElement("afterEnd",t)}</script>
  
    <script>"undefined"!=typeof __md_analytics&&__md_analytics()</script>
  

    
    
    
<link href="example.com" rel="icon" /> 
<link href="https://cdn.jsdelivr.net/npm/@fontsource/mononoki@5.1.0/index.min.css" rel="stylesheet">
<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/@ayahub/webfont-harmony-sans-sc@1.0.0/css/index.min.css">

   <link href="../../../assets/stylesheets/glightbox.min.css" rel="stylesheet"/><style>
    html.glightbox-open { overflow: initial; height: 100%; }
    .gslide-title { margin-top: 0px; user-select: text; }
    .gslide-desc { color: #666; user-select: text; }
    .gslide-image img { background: white; }
    .gscrollbar-fixer { padding-right: 15px; }
    .gdesc-inner { font-size: 0.75rem; }
    body[data-md-color-scheme="slate"] .gdesc-inner { background: var(--md-default-bg-color);}
    body[data-md-color-scheme="slate"] .gslide-title { color: var(--md-default-fg-color);}
    body[data-md-color-scheme="slate"] .gslide-desc { color: var(--md-default-fg-color);}</style> <script src="../../../assets/javascripts/glightbox.min.js"></script></head>
  
  
    
    
      
    
    
    
    
    <body dir="ltr" data-md-color-scheme="default" data-md-color-primary="indigo" data-md-color-accent="indigo">
  
    
    <input class="md-toggle" data-md-toggle="drawer" type="checkbox" id="__drawer" autocomplete="off">
    <input class="md-toggle" data-md-toggle="search" type="checkbox" id="__search" autocomplete="off">
    <label class="md-overlay" for="__drawer"></label>
    <div data-md-component="skip">
      
        
        <a href="#_1" class="md-skip">
          Skip to content
        </a>
      
    </div>
    <div data-md-component="announce">
      
        <aside class="md-banner">
          <div class="md-banner__inner md-grid md-typeset">
            
            
<span class="twemoji twemoji-custom">
  <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 512 512"><!--!Font Awesome Free 6.6.0 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free Copyright 2024 Fonticons, Inc.--><path d="M512 32c0 113.6-84.6 207.5-194.2 222c-7.1-53.4-30.6-101.6-65.3-139.3C290.8 46.3 364 0 448 0l32 0c17.7 0 32 14.3 32 32zM0 96C0 78.3 14.3 64 32 64l32 0c123.7 0 224 100.3 224 224l0 32 0 160c0 17.7-14.3 32-32 32s-32-14.3-32-32l0-160C100.3 320 0 219.7 0 96z"/></svg>
</span>
铁汁们 请关注我的 Github:
  <a rel="me" href="https://github.com/ricolxwz">
    <span class="twemoji">
      <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 480 512"><!--!Font Awesome Free 6.6.0 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free Copyright 2024 Fonticons, Inc.--><path d="M186.1 328.7c0 20.9-10.9 55.1-36.7 55.1s-36.7-34.2-36.7-55.1 10.9-55.1 36.7-55.1 36.7 34.2 36.7 55.1zM480 278.2c0 31.9-3.2 65.7-17.5 95-37.9 76.6-142.1 74.8-216.7 74.8-75.8 0-186.2 2.7-225.6-74.8-14.6-29-20.2-63.1-20.2-95 0-41.9 13.9-81.5 41.5-113.6-5.2-15.8-7.7-32.4-7.7-48.8 0-21.5 4.9-32.3 14.6-51.8 45.3 0 74.3 9 108.8 36 29-6.9 58.8-10 88.7-10 27 0 54.2 2.9 80.4 9.2 34-26.7 63-35.2 107.8-35.2 9.8 19.5 14.6 30.3 14.6 51.8 0 16.4-2.6 32.7-7.7 48.2 27.5 32.4 39 72.3 39 114.2zm-64.3 50.5c0-43.9-26.7-82.6-73.5-82.6-18.9 0-37 3.4-56 6-14.9 2.3-29.8 3.2-45.1 3.2-15.2 0-30.1-.9-45.1-3.2-18.7-2.6-37-6-56-6-46.8 0-73.5 38.7-73.5 82.6 0 87.8 80.4 101.3 150.4 101.3h48.2c70.3 0 150.6-13.4 150.6-101.3zm-82.6-55.1c-25.8 0-36.7 34.2-36.7 55.1s10.9 55.1 36.7 55.1 36.7-34.2 36.7-55.1-10.9-55.1-36.7-55.1z"/></svg>
    </span>
  <strong>ricolxwz</strong>
  </a> 
Bilibili:
<a rel="me" href="https://space.bilibili.com/475092323">
    <span class="twemoji">
      <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 512 512"><!--! Font Awesome Free 6.6.0 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2024 Fonticons, Inc.--><path d="M488.6 104.1c16.7 18.1 24.4 39.7 23.3 65.7v202.4c-.4 26.4-9.2 48.1-26.5 65.1-17.2 17-39.1 25.9-65.5 26.7H92.02c-26.45-.8-48.21-9.8-65.28-27.2C9.682 419.4.767 396.5 0 368.2V169.8c.767-26 9.682-47.6 26.74-65.7C43.81 87.75 65.57 78.77 92.02 78h29.38L96.05 52.19c-5.75-5.73-8.63-13-8.63-21.79 0-8.8 2.88-16.06 8.63-21.797C101.8 2.868 109.1 0 117.9 0q13.2 0 21.9 8.603L213.1 78h88l74.5-69.397C381.7 2.868 389.2 0 398 0q13.2 0 21.9 8.603c5.7 5.737 8.6 12.997 8.6 21.797 0 8.79-2.9 16.06-8.6 21.79L394.6 78h29.3c26.4.77 48 9.75 64.7 26.1m-38.8 69.7c-.4-9.6-3.7-17.4-10.7-23.5-5.2-6.1-14-9.4-22.7-9.8H96.05c-9.59.4-17.45 3.7-23.58 9.8-6.14 6.1-9.4 13.9-9.78 23.5v194.4c0 9.2 3.26 17 9.78 23.5s14.38 9.8 23.58 9.8H416.4c9.2 0 17-3.3 23.3-9.8s9.7-14.3 10.1-23.5zm-264.3 42.7c6.3 6.3 9.7 14.1 10.1 23.2V273c-.4 9.2-3.7 16.9-9.8 23.2-6.2 6.3-14 9.5-23.6 9.5s-17.5-3.2-23.6-9.5-9.4-14-9.8-23.2v-33.3c.4-9.1 3.8-16.9 10.1-23.2s13.2-9.6 23.3-10c9.2.4 17 3.7 23.3 10m191.5 0c6.3 6.3 9.7 14.1 10.1 23.2V273c-.4 9.2-3.7 16.9-9.8 23.2s-14 9.5-23.6 9.5-17.4-3.2-23.6-9.5c-7-6.3-9.4-14-9.7-23.2v-33.3c.3-9.1 3.7-16.9 10-23.2s14.1-9.6 23.3-10c9.2.4 17 3.7 23.3 10"/></svg>
    </span>
    <strong>麦旋风超好吃</strong>
</a>
点个免费的关注在走啦 (●'◡'●)

          </div>
          
        </aside>
      
    </div>
    
    
      

<header class="md-header" data-md-component="header">
  <nav class="md-header__inner md-grid" aria-label="Header">
    <a href="../../" title="派森贰" class="md-header__button md-logo" aria-label="派森贰" data-md-component="logo">
      <!--
  Copyright (c) 2016-2024 Martin Donath <martin.donath@squidfunk.com>

  Permission is hereby granted, free of charge, to any person obtaining a copy
  of this software and associated documentation files (the "Software"), to
  deal in the Software without restriction, including without limitation the
  rights to use, copy, modify, merge, publish, distribute, sublicense, and/or
  sell copies of the Software, and to permit persons to whom the Software is
  furnished to do so, subject to the following conditions:

  The above copyright notice and this permission notice shall be included in
  all copies or substantial portions of the Software.

  THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR
  IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,
  FITNESS FOR A PARTICULAR PURPOSE AND NON-INFRINGEMENT. IN NO EVENT SHALL THE
  AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER
  LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING
  FROM, OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS
  IN THE SOFTWARE.
-->

<!-- Logo -->
<img id="logo_light_mode" src="https://cdn.jsdelivr.net/gh/sigmax0124/logo@master/favion-big-mc-212121-000000-1.svg" alt="logo">
<img id="logo_dark_mode" src="https://cdn.jsdelivr.net/gh/sigmax0124/logo@master/favion-big-mc-000000-212121-1.svg" alt="logo">
    </a>
    <label class="md-header__button md-icon" for="__drawer">
      
      <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M3 6h18v2H3zm0 5h18v2H3zm0 5h18v2H3z"/></svg>
    </label>
    <div class="md-header__title" data-md-component="header-title">
      <div class="md-header__ellipsis">
        <div class="md-header__topic">
          <span class="md-ellipsis">
            派森贰
          </span>
        </div>
        <div class="md-header__topic" data-md-component="header-topic">
          <span class="md-ellipsis">
            
              模块/包/库
            
          </span>
        </div>
      </div>
    </div>
    
      
        <form class="md-header__option" data-md-component="palette">
  
    
    
    
    <input class="md-option" data-md-color-media="(prefers-color-scheme)" data-md-color-scheme="default" data-md-color-primary="indigo" data-md-color-accent="indigo"  aria-label="Switch to light mode"  type="radio" name="__palette" id="__palette_0">
    
      <label class="md-header__button md-icon" title="Switch to light mode" for="__palette_1" hidden>
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="m14.3 16-.7-2h-3.2l-.7 2H7.8L11 7h2l3.2 9zM20 8.69V4h-4.69L12 .69 8.69 4H4v4.69L.69 12 4 15.31V20h4.69L12 23.31 15.31 20H20v-4.69L23.31 12zm-9.15 3.96h2.3L12 9z"/></svg>
      </label>
    
  
    
    
    
    <input class="md-option" data-md-color-media="(prefers-color-scheme: light)" data-md-color-scheme="default" data-md-color-primary="white" data-md-color-accent="indigo"  aria-label="Switch to dark mode"  type="radio" name="__palette" id="__palette_1">
    
      <label class="md-header__button md-icon" title="Switch to dark mode" for="__palette_2" hidden>
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M12 8a4 4 0 0 0-4 4 4 4 0 0 0 4 4 4 4 0 0 0 4-4 4 4 0 0 0-4-4m0 10a6 6 0 0 1-6-6 6 6 0 0 1 6-6 6 6 0 0 1 6 6 6 6 0 0 1-6 6m8-9.31V4h-4.69L12 .69 8.69 4H4v4.69L.69 12 4 15.31V20h4.69L12 23.31 15.31 20H20v-4.69L23.31 12z"/></svg>
      </label>
    
  
    
    
    
    <input class="md-option" data-md-color-media="(prefers-color-scheme: dark)" data-md-color-scheme="slate" data-md-color-primary="indigo" data-md-color-accent="indigo"  aria-label="Switch to system preference"  type="radio" name="__palette" id="__palette_2">
    
      <label class="md-header__button md-icon" title="Switch to system preference" for="__palette_0" hidden>
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M12 18c-.89 0-1.74-.2-2.5-.55C11.56 16.5 13 14.42 13 12s-1.44-4.5-3.5-5.45C10.26 6.2 11.11 6 12 6a6 6 0 0 1 6 6 6 6 0 0 1-6 6m8-9.31V4h-4.69L12 .69 8.69 4H4v4.69L.69 12 4 15.31V20h4.69L12 23.31 15.31 20H20v-4.69L23.31 12z"/></svg>
      </label>
    
  
</form>
      
    
    
      <script>var palette=__md_get("__palette");if(palette&&palette.color){if("(prefers-color-scheme)"===palette.color.media){var media=matchMedia("(prefers-color-scheme: light)"),input=document.querySelector(media.matches?"[data-md-color-media='(prefers-color-scheme: light)']":"[data-md-color-media='(prefers-color-scheme: dark)']");palette.color.media=input.getAttribute("data-md-color-media"),palette.color.scheme=input.getAttribute("data-md-color-scheme"),palette.color.primary=input.getAttribute("data-md-color-primary"),palette.color.accent=input.getAttribute("data-md-color-accent")}for(var[key,value]of Object.entries(palette.color))document.body.setAttribute("data-md-color-"+key,value)}</script>
    
    
      <div class="md-header__option">
  <div class="md-select">
    
    <button class="md-header__button md-icon" aria-label="Select language">
      <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="m12.87 15.07-2.54-2.51.03-.03A17.5 17.5 0 0 0 14.07 6H17V4h-7V2H8v2H1v2h11.17C11.5 7.92 10.44 9.75 9 11.35 8.07 10.32 7.3 9.19 6.69 8h-2c.73 1.63 1.73 3.17 2.98 4.56l-5.09 5.02L4 19l5-5 3.11 3.11zM18.5 10h-2L12 22h2l1.12-3h4.75L21 22h2zm-2.62 7 1.62-4.33L19.12 17z"/></svg>
    </button>
    <div class="md-select__inner">
      <ul class="md-select__list">
        
          <li class="md-select__item">
            <a href="../../../foundation/module/" hreflang="zh" class="md-select__link">
              中文
            </a>
          </li>
        
          <li class="md-select__item">
            <a href="./" hreflang="en" class="md-select__link">
              English
            </a>
          </li>
        
      </ul>
    </div>
  </div>
</div>
    
    
      <label class="md-header__button md-icon" for="__search">
        
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.52 6.52 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5"/></svg>
      </label>
      <div class="md-search" data-md-component="search" role="dialog">
  <label class="md-search__overlay" for="__search"></label>
  <div class="md-search__inner" role="search">
    <form class="md-search__form" name="search">
      <input type="text" class="md-search__input" name="query" aria-label="Search" placeholder="Search" autocapitalize="off" autocorrect="off" autocomplete="off" spellcheck="false" data-md-component="search-query" required>
      <label class="md-search__icon md-icon" for="__search">
        
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.52 6.52 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5"/></svg>
        
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M20 11v2H8l5.5 5.5-1.42 1.42L4.16 12l7.92-7.92L13.5 5.5 8 11z"/></svg>
      </label>
      <nav class="md-search__options" aria-label="Search">
        
          <a href="javascript:void(0)" class="md-search__icon md-icon" title="Share" aria-label="Share" data-clipboard data-clipboard-text="" data-md-component="search-share" tabindex="-1">
            
            <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M18 16.08c-.76 0-1.44.3-1.96.77L8.91 12.7c.05-.23.09-.46.09-.7s-.04-.47-.09-.7l7.05-4.11c.54.5 1.25.81 2.04.81a3 3 0 0 0 3-3 3 3 0 0 0-3-3 3 3 0 0 0-3 3c0 .24.04.47.09.7L8.04 9.81C7.5 9.31 6.79 9 6 9a3 3 0 0 0-3 3 3 3 0 0 0 3 3c.79 0 1.5-.31 2.04-.81l7.12 4.15c-.05.21-.08.43-.08.66 0 1.61 1.31 2.91 2.92 2.91s2.92-1.3 2.92-2.91A2.92 2.92 0 0 0 18 16.08"/></svg>
          </a>
        
        <button type="reset" class="md-search__icon md-icon" title="Clear" aria-label="Clear" tabindex="-1">
          
          <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M19 6.41 17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12z"/></svg>
        </button>
      </nav>
      
        <div class="md-search__suggest" data-md-component="search-suggest"></div>
      
    </form>
    <div class="md-search__output">
      <div class="md-search__scrollwrap" tabindex="0" data-md-scrollfix>
        <div class="md-search-result" data-md-component="search-result">
          <div class="md-search-result__meta">
            Initializing search
          </div>
          <ol class="md-search-result__list" role="presentation"></ol>
        </div>
      </div>
    </div>
  </div>
</div>
    
    
      <div class="md-header__source">
        <a href="https://github.com/sigmax01/py" title="Go to repository" class="md-source" data-md-component="source">
  <div class="md-source__icon md-icon">
    
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 496 512"><!--! Font Awesome Free 6.6.0 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2024 Fonticons, Inc.--><path d="M165.9 397.4c0 2-2.3 3.6-5.2 3.6-3.3.3-5.6-1.3-5.6-3.6 0-2 2.3-3.6 5.2-3.6 3-.3 5.6 1.3 5.6 3.6m-31.1-4.5c-.7 2 1.3 4.3 4.3 4.9 2.6 1 5.6 0 6.2-2s-1.3-4.3-4.3-5.2c-2.6-.7-5.5.3-6.2 2.3m44.2-1.7c-2.9.7-4.9 2.6-4.6 4.9.3 2 2.9 3.3 5.9 2.6 2.9-.7 4.9-2.6 4.6-4.6-.3-1.9-3-3.2-5.9-2.9M244.8 8C106.1 8 0 113.3 0 252c0 110.9 69.8 205.8 169.5 239.2 12.8 2.3 17.3-5.6 17.3-12.1 0-6.2-.3-40.4-.3-61.4 0 0-70 15-84.7-29.8 0 0-11.4-29.1-27.8-36.6 0 0-22.9-15.7 1.6-15.4 0 0 24.9 2 38.6 25.8 21.9 38.6 58.6 27.5 72.9 20.9 2.3-16 8.8-27.1 16-33.7-55.9-6.2-112.3-14.3-112.3-110.5 0-27.5 7.6-41.3 23.6-58.9-2.6-6.5-11.1-33.3 2.6-67.9 20.9-6.5 69 27 69 27 20-5.6 41.5-8.5 62.8-8.5s42.8 2.9 62.8 8.5c0 0 48.1-33.6 69-27 13.7 34.7 5.2 61.4 2.6 67.9 16 17.7 25.8 31.5 25.8 58.9 0 96.5-58.9 104.2-114.8 110.5 9.2 7.9 17 22.9 17 46.4 0 33.7-.3 75.4-.3 83.6 0 6.5 4.6 14.4 17.3 12.1C428.2 457.8 496 362.9 496 252 496 113.3 383.5 8 244.8 8M97.2 352.9c-1.3 1-1 3.3.7 5.2 1.6 1.6 3.9 2.3 5.2 1 1.3-1 1-3.3-.7-5.2-1.6-1.6-3.9-2.3-5.2-1m-10.8-8.1c-.7 1.3.3 2.9 2.3 3.9 1.6 1 3.6.7 4.3-.7.7-1.3-.3-2.9-2.3-3.9-2-.6-3.6-.3-4.3.7m32.4 35.6c-1.6 1.3-1 4.3 1.3 6.2 2.3 2.3 5.2 2.6 6.5 1 1.3-1.3.7-4.3-1.3-6.2-2.2-2.3-5.2-2.6-6.5-1m-11.4-14.7c-1.6 1-1.6 3.6 0 5.9s4.3 3.3 5.6 2.3c1.6-1.3 1.6-3.9 0-6.2-1.4-2.3-4-3.3-5.6-2"/></svg>
  </div>
  <div class="md-source__repository">
    sigmax01/py
  </div>
</a>
      </div>
    
  </nav>
  
</header>
    
    <div class="md-container" data-md-component="container">
      
      
        
          
            
<nav class="md-tabs" aria-label="Tabs" data-md-component="tabs">
  <div class="md-grid">
    <ul class="md-tabs__list">
      
        
  
  
  
    
    
      <li class="md-tabs__item">
        <a href="../../" class="md-tabs__link">
          
  
    
  
  开始

        </a>
      </li>
    
  

      
        
  
  
    
  
  
    
    
      <li class="md-tabs__item md-tabs__item--active">
        <a href="../" class="md-tabs__link">
          
  
    
  
  基础

        </a>
      </li>
    
  

      
        
  
  
  
    
    
      <li class="md-tabs__item">
        <a href="../../basic-package/datetime/" class="md-tabs__link">
          
  
    
  
  常用

        </a>
      </li>
    
  

      
        
  
  
  
    
    
      <li class="md-tabs__item">
        <a href="../../numpy/datatype/" class="md-tabs__link">
          
  
    
  
  NumPy

        </a>
      </li>
    
  

      
        
  
  
  
    
    
      <li class="md-tabs__item">
        <a href="../../pandas/preliminary-knowledge/" class="md-tabs__link">
          
  
    
  
  Pandas

        </a>
      </li>
    
  

      
        
  
  
  
    
    
      <li class="md-tabs__item">
        <a href="../../matplotlib/" class="md-tabs__link">
          
  
    
  
  Matplotlib

        </a>
      </li>
    
  

      
        
  
  
  
    
    
      <li class="md-tabs__item">
        <a href="../../seaborn/introduction/" class="md-tabs__link">
          
  
    
  
  Seaborn

        </a>
      </li>
    
  

      
    </ul>
  </div>
</nav>
          
        
      
      <main class="md-main" data-md-component="main">
        <div class="md-main__inner md-grid">
          
            
              
              <div class="md-sidebar md-sidebar--primary" data-md-component="sidebar" data-md-type="navigation" >
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    


  


<nav class="md-nav md-nav--primary md-nav--lifted" aria-label="Navigation" data-md-level="0">
  <label class="md-nav__title" for="__drawer">
    <a href="../../" title="派森贰" class="md-nav__button md-logo" aria-label="派森贰" data-md-component="logo">
      <!--
  Copyright (c) 2016-2024 Martin Donath <martin.donath@squidfunk.com>

  Permission is hereby granted, free of charge, to any person obtaining a copy
  of this software and associated documentation files (the "Software"), to
  deal in the Software without restriction, including without limitation the
  rights to use, copy, modify, merge, publish, distribute, sublicense, and/or
  sell copies of the Software, and to permit persons to whom the Software is
  furnished to do so, subject to the following conditions:

  The above copyright notice and this permission notice shall be included in
  all copies or substantial portions of the Software.

  THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR
  IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,
  FITNESS FOR A PARTICULAR PURPOSE AND NON-INFRINGEMENT. IN NO EVENT SHALL THE
  AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER
  LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING
  FROM, OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS
  IN THE SOFTWARE.
-->

<!-- Logo -->
<img id="logo_light_mode" src="https://cdn.jsdelivr.net/gh/sigmax0124/logo@master/favion-big-mc-212121-000000-1.svg" alt="logo">
<img id="logo_dark_mode" src="https://cdn.jsdelivr.net/gh/sigmax0124/logo@master/favion-big-mc-000000-212121-1.svg" alt="logo">
    </a>
    派森贰
  </label>
  
    <div class="md-nav__source">
      <a href="https://github.com/sigmax01/py" title="Go to repository" class="md-source" data-md-component="source">
  <div class="md-source__icon md-icon">
    
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 496 512"><!--! Font Awesome Free 6.6.0 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2024 Fonticons, Inc.--><path d="M165.9 397.4c0 2-2.3 3.6-5.2 3.6-3.3.3-5.6-1.3-5.6-3.6 0-2 2.3-3.6 5.2-3.6 3-.3 5.6 1.3 5.6 3.6m-31.1-4.5c-.7 2 1.3 4.3 4.3 4.9 2.6 1 5.6 0 6.2-2s-1.3-4.3-4.3-5.2c-2.6-.7-5.5.3-6.2 2.3m44.2-1.7c-2.9.7-4.9 2.6-4.6 4.9.3 2 2.9 3.3 5.9 2.6 2.9-.7 4.9-2.6 4.6-4.6-.3-1.9-3-3.2-5.9-2.9M244.8 8C106.1 8 0 113.3 0 252c0 110.9 69.8 205.8 169.5 239.2 12.8 2.3 17.3-5.6 17.3-12.1 0-6.2-.3-40.4-.3-61.4 0 0-70 15-84.7-29.8 0 0-11.4-29.1-27.8-36.6 0 0-22.9-15.7 1.6-15.4 0 0 24.9 2 38.6 25.8 21.9 38.6 58.6 27.5 72.9 20.9 2.3-16 8.8-27.1 16-33.7-55.9-6.2-112.3-14.3-112.3-110.5 0-27.5 7.6-41.3 23.6-58.9-2.6-6.5-11.1-33.3 2.6-67.9 20.9-6.5 69 27 69 27 20-5.6 41.5-8.5 62.8-8.5s42.8 2.9 62.8 8.5c0 0 48.1-33.6 69-27 13.7 34.7 5.2 61.4 2.6 67.9 16 17.7 25.8 31.5 25.8 58.9 0 96.5-58.9 104.2-114.8 110.5 9.2 7.9 17 22.9 17 46.4 0 33.7-.3 75.4-.3 83.6 0 6.5 4.6 14.4 17.3 12.1C428.2 457.8 496 362.9 496 252 496 113.3 383.5 8 244.8 8M97.2 352.9c-1.3 1-1 3.3.7 5.2 1.6 1.6 3.9 2.3 5.2 1 1.3-1 1-3.3-.7-5.2-1.6-1.6-3.9-2.3-5.2-1m-10.8-8.1c-.7 1.3.3 2.9 2.3 3.9 1.6 1 3.6.7 4.3-.7.7-1.3-.3-2.9-2.3-3.9-2-.6-3.6-.3-4.3.7m32.4 35.6c-1.6 1.3-1 4.3 1.3 6.2 2.3 2.3 5.2 2.6 6.5 1 1.3-1.3.7-4.3-1.3-6.2-2.2-2.3-5.2-2.6-6.5-1m-11.4-14.7c-1.6 1-1.6 3.6 0 5.9s4.3 3.3 5.6 2.3c1.6-1.3 1.6-3.9 0-6.2-1.4-2.3-4-3.3-5.6-2"/></svg>
  </div>
  <div class="md-source__repository">
    sigmax01/py
  </div>
</a>
    </div>
  
  <ul class="md-nav__list" data-md-scrollfix>
    
      
      
  
  
  
  
    
    
      
        
          
        
      
    
    
      
      
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
          
        
        <input class="md-nav__toggle md-toggle md-toggle--indeterminate" type="checkbox" id="__nav_1" >
        
          
          
          <div class="md-nav__link md-nav__container">
            <a href="../../" class="md-nav__link ">
              
  
  <span class="md-ellipsis">
    开始
  </span>
  

            </a>
            
          </div>
        
        <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_1_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_1">
            <span class="md-nav__icon md-icon"></span>
            开始
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
            
          </ul>
        </nav>
      
    </li>
  

    
      
      
  
  
    
  
  
  
    
    
      
        
          
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
    
    
      
        
        
      
      
    
    
    <li class="md-nav__item md-nav__item--active md-nav__item--section md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_2" checked>
        
          
          
          <div class="md-nav__link md-nav__container">
            <a href="../" class="md-nav__link ">
              
  
  <span class="md-ellipsis">
    基础
  </span>
  

            </a>
            
              
              <label class="md-nav__link " for="__nav_2" id="__nav_2_label" tabindex="">
                <span class="md-nav__icon md-icon"></span>
              </label>
            
          </div>
        
        <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_2_label" aria-expanded="true">
          <label class="md-nav__title" for="__nav_2">
            <span class="md-nav__icon md-icon"></span>
            基础
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../container/" class="md-nav__link">
        
  
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M19 3H5a2 2 0 0 0-2 2v14a2 2 0 0 0 2 2h14a2 2 0 0 0 2-2V5a2 2 0 0 0-2-2M5 19v-2h3.13a4.13 4.13 0 0 0 1.27 2m9.6 0h-4.4a4.13 4.13 0 0 0 1.27-2H19m0-2h-5v1a2 2 0 0 1-4 0v-1H5V5h14Z"/></svg>
  
  <span class="md-ellipsis">
    容器
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../function/" class="md-nav__link">
        
  
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M12.42 5.29c-1.1-.1-2.07.71-2.17 1.82L10 10h2.82v2h-3l-.44 5.07A4.001 4.001 0 0 1 2 18.83l1.5-1.5c.33 1.05 1.46 1.64 2.5 1.3.78-.24 1.33-.93 1.4-1.74L7.82 12h-3v-2H8l.27-3.07a4.01 4.01 0 0 1 4.33-3.65c1.26.11 2.4.81 3.06 1.89l-1.5 1.5c-.25-.77-.93-1.31-1.74-1.38M22 13.65l-1.41-1.41-2.83 2.83-2.83-2.83-1.43 1.41 2.85 2.85-2.85 2.81 1.43 1.41 2.83-2.83 2.83 2.83L22 19.31l-2.83-2.81z"/></svg>
  
  <span class="md-ellipsis">
    函数
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../object/" class="md-nav__link">
        
  
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M8 3a2 2 0 0 0-2 2v4a2 2 0 0 1-2 2H3v2h1a2 2 0 0 1 2 2v4a2 2 0 0 0 2 2h2v-2H8v-5a2 2 0 0 0-2-2 2 2 0 0 0 2-2V5h2V3m6 0a2 2 0 0 1 2 2v4a2 2 0 0 0 2 2h1v2h-1a2 2 0 0 0-2 2v4a2 2 0 0 1-2 2h-2v-2h2v-5a2 2 0 0 1 2-2 2 2 0 0 1-2-2V5h-2V3z"/></svg>
  
  <span class="md-ellipsis">
    对象
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../io/" class="md-nav__link">
        
  
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M3 3h6v4H3zm12 7h6v4h-6zm0 7h6v4h-6zm-2-4H7v5h6v2H5V9h2v2h6z"/></svg>
  
  <span class="md-ellipsis">
    文件
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
    
  
  
  
    <li class="md-nav__item md-nav__item--active">
      
      <input class="md-nav__toggle md-toggle" type="checkbox" id="__toc">
      
      
      
        <label class="md-nav__link md-nav__link--active" for="__toc">
          
  
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M21 16.5c0 .38-.21.71-.53.88l-7.9 4.44c-.16.12-.36.18-.57.18s-.41-.06-.57-.18l-7.9-4.44A.99.99 0 0 1 3 16.5v-9c0-.38.21-.71.53-.88l7.9-4.44c.16-.12.36-.18.57-.18s.41.06.57.18l7.9 4.44c.32.17.53.5.53.88zM12 4.15l-1.89 1.07L16 8.61l1.96-1.11zM6.04 7.5 12 10.85l1.96-1.1-5.88-3.4zM5 15.91l6 3.38v-6.71L5 9.21zm14 0v-6.7l-6 3.37v6.71z"/></svg>
  
  <span class="md-ellipsis">
    模块/包/库
  </span>
  

          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <a href="./" class="md-nav__link md-nav__link--active">
        
  
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M21 16.5c0 .38-.21.71-.53.88l-7.9 4.44c-.16.12-.36.18-.57.18s-.41-.06-.57-.18l-7.9-4.44A.99.99 0 0 1 3 16.5v-9c0-.38.21-.71.53-.88l7.9-4.44c.16-.12.36-.18.57-.18s.41.06.57.18l7.9 4.44c.32.17.53.5.53.88zM12 4.15l-1.89 1.07L16 8.61l1.96-1.11zM6.04 7.5 12 10.85l1.96-1.1-5.88-3.4zM5 15.91l6 3.38v-6.71L5 9.21zm14 0v-6.7l-6 3.37v6.71z"/></svg>
  
  <span class="md-ellipsis">
    模块/包/库
  </span>
  

      </a>
      
        

<nav class="md-nav md-nav--secondary" aria-label="Table of contents">
  
  
  
  
    <label class="md-nav__title" for="__toc">
      <span class="md-nav__icon md-icon"></span>
      Table of contents
    </label>
    <ul class="md-nav__list" data-md-component="toc" data-md-scrollfix>
      
        <li class="md-nav__item">
  <a href="#_1" class="md-nav__link">
    <span class="md-ellipsis">
      模块、包和库
    </span>
  </a>
  
    <nav class="md-nav" aria-label="模块、包和库">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#_2" class="md-nav__link">
    <span class="md-ellipsis">
      模块
    </span>
  </a>
  
    <nav class="md-nav" aria-label="模块">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#_3" class="md-nav__link">
    <span class="md-ellipsis">
      作用域
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#_4" class="md-nav__link">
    <span class="md-ellipsis">
      包
    </span>
  </a>
  
    <nav class="md-nav" aria-label="包">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#_5" class="md-nav__link">
    <span class="md-ellipsis">
      常规包
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#_6" class="md-nav__link">
    <span class="md-ellipsis">
      命名空间包
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#_7" class="md-nav__link">
    <span class="md-ellipsis">
      库
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#_8" class="md-nav__link">
    <span class="md-ellipsis">
      导入
    </span>
  </a>
  
    <nav class="md-nav" aria-label="导入">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#搜索路径" class="md-nav__link">
    <span class="md-ellipsis">
      搜索路径
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#import" class="md-nav__link">
    <span class="md-ellipsis">
      import
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#from-import" class="md-nav__link">
    <span class="md-ellipsis">
      from ... import ...
    </span>
  </a>
  
    <nav class="md-nav" aria-label="from ... import ...">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#_9" class="md-nav__link">
    <span class="md-ellipsis">
      绝对导入和相对导入
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#package属性" class="md-nav__link">
    <span class="md-ellipsis">
      __package__属性
    </span>
  </a>
  
    <nav class="md-nav" aria-label="__package__属性">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#__package__" class="md-nav__link">
    <span class="md-ellipsis">
      __package__属性和相对导入
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#__init__py" class="md-nav__link">
    <span class="md-ellipsis">
      __init__.py文件
    </span>
  </a>
  
    <nav class="md-nav" aria-label="__init__.py文件">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#init.py是一个模块" class="md-nav__link">
    <span class="md-ellipsis">
      __init__.py是一个模块
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#_10" class="md-nav__link">
    <span class="md-ellipsis">
      初始化包
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#_11" class="md-nav__link">
    <span class="md-ellipsis">
      递归包结构
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#_12" class="md-nav__link">
    <span class="md-ellipsis">
      控制包的导入行为
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#__main__py" class="md-nav__link">
    <span class="md-ellipsis">
      __main__.py文件
    </span>
  </a>
  
    <nav class="md-nav" aria-label="__main__.py文件">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#_13" class="md-nav__link">
    <span class="md-ellipsis">
      执行包
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#_14" class="md-nav__link">
    <span class="md-ellipsis">
      执行文件夹
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#_15" class="md-nav__link">
    <span class="md-ellipsis">
      打包
    </span>
  </a>
  
    <nav class="md-nav" aria-label="打包">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#setuptools" class="md-nav__link">
    <span class="md-ellipsis">
      setuptools打包
    </span>
  </a>
  
    <nav class="md-nav" aria-label="setuptools打包">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#_16" class="md-nav__link">
    <span class="md-ellipsis">
      包内容
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#_17" class="md-nav__link">
    <span class="md-ellipsis">
      打包
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#_18" class="md-nav__link">
    <span class="md-ellipsis">
      参数
    </span>
  </a>
  
    <nav class="md-nav" aria-label="参数">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#_19" class="md-nav__link">
    <span class="md-ellipsis">
      描述
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#_20" class="md-nav__link">
    <span class="md-ellipsis">
      版本
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#_21" class="md-nav__link">
    <span class="md-ellipsis">
      依赖
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#_22" class="md-nav__link">
    <span class="md-ellipsis">
      其他参数
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#_23" class="md-nav__link">
    <span class="md-ellipsis">
      上传
    </span>
  </a>
  
    <nav class="md-nav" aria-label="上传">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#twine" class="md-nav__link">
    <span class="md-ellipsis">
      twine上传
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#_24" class="md-nav__link">
    <span class="md-ellipsis">
      工具
    </span>
  </a>
  
    <nav class="md-nav" aria-label="工具">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#poetry" class="md-nav__link">
    <span class="md-ellipsis">
      poetry
    </span>
  </a>
  
    <nav class="md-nav" aria-label="poetry">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#_25" class="md-nav__link">
    <span class="md-ellipsis">
      安装依赖
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
    </ul>
  
</nav>
      
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../network/" class="md-nav__link">
        
  
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M17.9 17.39c-.26-.8-1.01-1.39-1.9-1.39h-1v-3a1 1 0 0 0-1-1H8v-2h2a1 1 0 0 0 1-1V7h2a2 2 0 0 0 2-2v-.41a7.984 7.984 0 0 1 2.9 12.8M11 19.93c-3.95-.49-7-3.85-7-7.93 0-.62.08-1.22.21-1.79L9 15v1a2 2 0 0 0 2 2m1-16A10 10 0 0 0 2 12a10 10 0 0 0 10 10 10 10 0 0 0 10-10A10 10 0 0 0 12 2"/></svg>
  
  <span class="md-ellipsis">
    网络
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../threading/" class="md-nav__link">
        
  
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M13 2v5.08A5.5 5.5 0 0 0 12 7a5.5 5.5 0 0 0-1 .08V2m5.9 13a5 5 0 0 1-.17.55L20 17.42V22h-2v-3.42l-2.26-1.29a4.94 4.94 0 0 1-7.48 0L6 18.58V22H4v-4.58l3.27-1.87A5 5 0 0 1 7.1 15H5.3l-2.75 1.83-1.1-1.66L4.7 13h2.4a5 5 0 0 1 .27-.88l-1.56-1-3.57.88-.48-2 4.43-1.08 2.31 1.53a5 5 0 0 1 7 0l2.27-1.53L22.24 10l-.48 2-3.57-.89-1.56 1a5 5 0 0 1 .27.89h2.4l3.25 2.16-1.1 1.66L18.7 15M11 14a1 1 0 1 0-1 1 1 1 0 0 0 1-1m4 0a1 1 0 1 0-1 1 1 1 0 0 0 1-1"/></svg>
  
  <span class="md-ellipsis">
    多进程/多线程
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../async/" class="md-nav__link">
        
  
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M12 18a6 6 0 0 1-6-6c0-1 .25-1.97.7-2.8L5.24 7.74A7.93 7.93 0 0 0 4 12a8 8 0 0 0 8 8v3l4-4-4-4m0-11V1L8 5l4 4V6a6 6 0 0 1 6 6c0 1-.25 1.97-.7 2.8l1.46 1.46A7.93 7.93 0 0 0 20 12a8 8 0 0 0-8-8"/></svg>
  
  <span class="md-ellipsis">
    异步
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../database/" class="md-nav__link">
        
  
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M12 3C7.58 3 4 4.79 4 7s3.58 4 8 4 8-1.79 8-4-3.58-4-8-4M4 9v3c0 2.21 3.58 4 8 4s8-1.79 8-4V9c0 2.21-3.58 4-8 4s-8-1.79-8-4m0 5v3c0 2.21 3.58 4 8 4s8-1.79 8-4v-3c0 2.21-3.58 4-8 4s-8-1.79-8-4"/></svg>
  
  <span class="md-ellipsis">
    数据库
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../debug/" class="md-nav__link">
        
  
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M7 2v2h1v14a4 4 0 0 0 4 4 4 4 0 0 0 4-4V4h1V2zm4 14c-.6 0-1-.4-1-1s.4-1 1-1 1 .4 1 1-.4 1-1 1m2-4c-.6 0-1-.4-1-1s.4-1 1-1 1 .4 1 1-.4 1-1 1m1-5h-4V4h4z"/></svg>
  
  <span class="md-ellipsis">
    错误/调试/测试
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../encoding/" class="md-nav__link">
        
  
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M13.09 20c.12.72.37 1.39.72 2H6c-1.11 0-2-.89-2-2V4a2 2 0 0 1 2-2h8l6 6v5.09c-.33-.05-.66-.09-1-.09s-.67.04-1 .09V9h-5V4H6v16zM17 15l-2.5 3H16v4h2v-4h1.5zm5 5v-4h-2v4h-1.5l2.5 3 2.5-3z"/></svg>
  
  <span class="md-ellipsis">
    编码
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../pvm/" class="md-nav__link">
        
  
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="m5 12 2-4V7H4v1h2l-2 4m5 0 2-4V7H8v1h2l-2 4m5 0 2-4V7h-3v1h2l-2 4m9-10c-1.1 0-2 .9-2 2 0 .7.4 1.4 1 1.7V17h-3v-2c.6 0 1-.4 1-1V5c0-.6-.4-1-1-1h-3.8c-.8-1.2-2.2-2-3.7-2s-2.9.8-3.7 2H2c-.6 0-1 .4-1 1v9c0 .6.4 1 1 1v7h15v-3h3c1.1 0 2-.9 2-2V5.7c.6-.3 1-1 1-1.7 0-1.1-.9-2-2-2m-8 17H6v-2h7zm3-6H3V6h13z"/></svg>
  
  <span class="md-ellipsis">
    PVM
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../misc/" class="md-nav__link">
        
  
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M8.17 2.76A10.1 10.1 0 0 1 12 2c1.31 0 2.61.26 3.83.76 1.21.5 2.31 1.24 3.24 2.17s1.67 2.03 2.17 3.24c.5 1.22.76 2.52.76 3.83 0 2.65-1.05 5.2-2.93 7.07A9.97 9.97 0 0 1 12 22a10.1 10.1 0 0 1-3.83-.76 10 10 0 0 1-3.24-2.17A9.97 9.97 0 0 1 2 12c0-2.65 1.05-5.2 2.93-7.07.93-.93 2.03-1.67 3.24-2.17m-.28 16.1a7.97 7.97 0 0 0 8.22 0l-1-1.73 1-.58A9.9 9.9 0 0 1 15.05 13H14v-2h1.05c.13-1.27.5-2.47 1.06-3.55l-1-.58 1-1.73a7.97 7.97 0 0 0-8.22 0l1 1.73-1 .57c.56 1.09.93 2.29 1.06 3.56H10v2H8.95c-.13 1.27-.5 2.47-1.06 3.56l1 .57zM5 15.88l.43-.75.73.43c.39-.79.66-1.65.77-2.56H6v-2h.93c-.11-.91-.38-1.77-.77-2.56l-.73.43L5 8.12a8.03 8.03 0 0 0 0 7.76m14-7.75-.43.74-.73-.43c-.39.79-.66 1.65-.77 2.56H18v2h-.93c.11.91.38 1.77.77 2.56l.73-.43.43.75a8.03 8.03 0 0 0 0-7.76Z"/></svg>
  
  <span class="md-ellipsis">
    其他
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

    
      
      
  
  
  
  
    
    
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
    
    
      
      
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
          
        
        <input class="md-nav__toggle md-toggle md-toggle--indeterminate" type="checkbox" id="__nav_3" >
        
          
          <label class="md-nav__link" for="__nav_3" id="__nav_3_label" tabindex="0">
            
  
  <span class="md-ellipsis">
    常用
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_3_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_3">
            <span class="md-nav__icon md-icon"></span>
            常用
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../basic-package/datetime/" class="md-nav__link">
        
  
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M12 20a8 8 0 0 1-8-8 8 8 0 0 1 8-8 8 8 0 0 1 8 8 8 8 0 0 1-8 8m0-18A10 10 0 0 0 2 12a10 10 0 0 0 10 10 10 10 0 0 0 10-10A10 10 0 0 0 12 2m4.24 5.76A5.95 5.95 0 0 0 12 6v6l-4.24 4.24a6 6 0 0 0 8.48 0 5.98 5.98 0 0 0 0-8.48"/></svg>
  
  <span class="md-ellipsis">
    datetime
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../basic-package/collections/" class="md-nav__link">
        
  
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M9 5c1.04 0 2.06.24 3 .68.94-.44 1.96-.68 3-.68a7 7 0 0 1 7 7 7 7 0 0 1-7 7c-1.04 0-2.06-.24-3-.68-.94.44-1.96.68-3 .68a7 7 0 0 1-7-7 7 7 0 0 1 7-7m6 2-1 .11c1.28 1.3 2 3.06 2 4.89s-.72 3.59-2 4.9l1 .1a5 5 0 0 0 5-5 5 5 0 0 0-5-5m-6.5 5c0 1.87.79 3.56 2.06 4.75l1-.46c-1.25-1-2.06-2.55-2.06-4.29s.81-3.29 2.06-4.29l-1-.46A6.5 6.5 0 0 0 8.5 12"/></svg>
  
  <span class="md-ellipsis">
    collections
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../basic-package/argparse/" class="md-nav__link">
        
  
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M20 19V7H4v12zm0-16a2 2 0 0 1 2 2v14a2 2 0 0 1-2 2H4a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2zm-7 14v-2h5v2zm-3.42-4L5.57 9H8.4l3.3 3.3c.39.39.39 1.03 0 1.42L8.42 17H5.59z"/></svg>
  
  <span class="md-ellipsis">
    argparse
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../basic-package/base64/" class="md-nav__link">
        
  
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M13.09 20c.12.72.37 1.39.72 2H6c-1.11 0-2-.89-2-2V4a2 2 0 0 1 2-2h8l6 6v5.09c-.33-.05-.66-.09-1-.09s-.67.04-1 .09V9h-5V4H6v16zM23 17l-3-2.5V16h-4v2h4v1.5zm-5 1.5L15 21l3 2.5V22h4v-2h-4z"/></svg>
  
  <span class="md-ellipsis">
    base64
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../basic-package/hashlib/" class="md-nav__link">
        
  
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="m5.41 21 .71-4h-4l.35-2h4l1.06-6h-4l.35-2h4l.71-4h2l-.71 4h6l.71-4h2l-.71 4h4l-.35 2h-4l-1.06 6h4l-.35 2h-4l-.71 4h-2l.71-4h-6l-.71 4zM9.53 9l-1.06 6h6l1.06-6z"/></svg>
  
  <span class="md-ellipsis">
    hashlib
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../basic-package/hmac/" class="md-nav__link">
        
  
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M3 4h2v6h4V4h2v14H9v-6H5v6H3zm10 4h2.31l.32-3h2l-.32 3h2l.32-3h2l-.32 3H23v2h-1.9l-.2 2H23v2h-2.31l-.32 3h-2l.32-3h-2l-.32 3h-2l.32-3H13v-2h1.9l.2-2H13zm4.1 2-.2 2h2l.2-2z"/></svg>
  
  <span class="md-ellipsis">
    hmac
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../basic-package/itertools/" class="md-nav__link">
        
  
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M10.5 4A6.5 6.5 0 0 0 4 10H1l4 4 4-4H6.03a4.5 4.5 0 0 1 4.47-4 4.5 4.5 0 0 1 4.5 4.5 4.5 4.5 0 0 1-4.5 4.5H2v2h8.5a6.5 6.5 0 0 0 6.5-6.5A6.5 6.5 0 0 0 10.5 4m8.5 8v3h-2.5a7.5 7.5 0 0 1-2.26 2H19v3l4-4Z"/></svg>
  
  <span class="md-ellipsis">
    itertools
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../basic-package/contextlib/" class="md-nav__link">
        
  
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M19.9 3c-.6-1-1.8-1.3-2.7-.7L6.9 8.2C6.6 8.1 6.3 8 6 8c-1.7 0-3 1.3-3 3v9c-.6 0-1 .4-1 1v1h8v-1c0-.6-.4-1-1-1v-8.4l10.1-5.8c1-.6 1.3-1.8.8-2.8M7.5 20h-3v-6.4c.9.5 2.1.5 3 0zM6 12.5c-.8 0-1.5-.7-1.5-1.5S5.2 9.5 6 9.5s1.5.7 1.5 1.5-.7 1.5-1.5 1.5m4.4-2.9-2.3-1 1.3-.8 2.3 1zm3.5-2-2.3-1 1.3-.8 2.3 1zm3.4-2-2.3-1 1.3-.8 2.3 1z"/></svg>
  
  <span class="md-ellipsis">
    contextlib
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../basic-package/requests/" class="md-nav__link">
        
  
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="m13 3 1 .06c2.8-1.27 5.23-1.42 6.5-.14 1 1.01 1.08 2.75.42 4.8A9 9 0 0 1 22 12l-.05 1H9.08c.37 2.28 1.98 4 3.92 4 1.31 0 2.47-.79 3.2-2h5.3c-1.25 3.5-4.58 6-8.5 6-1.28 0-2.5-.27-3.59-.75-2.91 1.43-5.52 1.65-6.84.31C1 18.96 1.68 15.57 4 12c.93-1.46 2.14-2.94 3.57-4.35l.81-.77c-1.17.69-2.67 1.74-4.19 3.29A9 9 0 0 1 13 3m0 4c-1.79 0-3.31 1.47-3.82 3.5h7.64C16.31 8.47 14.79 7 13 7m7.06-2.94c-.66-.67-1.84-.71-3.32-.25 1.48.69 2.76 1.75 3.67 3.08.32-1.24.23-2.24-.35-2.83M3.89 20c.83.84 2.51.69 4.55-.24a9.05 9.05 0 0 1-3.97-4.88C3.27 17.15 3 19.07 3.89 20"/></svg>
  
  <span class="md-ellipsis">
    requests
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

    
      
      
  
  
  
  
    
    
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
    
    
      
      
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
          
        
        <input class="md-nav__toggle md-toggle md-toggle--indeterminate" type="checkbox" id="__nav_4" >
        
          
          <label class="md-nav__link" for="__nav_4" id="__nav_4_label" tabindex="0">
            
  
  <span class="md-ellipsis">
    NumPy
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_4_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_4">
            <span class="md-nav__icon md-icon"></span>
            NumPy
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../numpy/datatype/" class="md-nav__link">
        
  
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M17 2H7c-1.1 0-2 .9-2 2v16c0 1.1.9 2 2 2h10c1.1 0 2-.9 2-2V4c0-1.1-.9-2-2-2m0 18H7V4h10zM12 8c-1.1 0-2 .9-2 2 0 .4.1.7.3 1H10c-1.1 0-2 .9-2 2s.9 2 2 2c.6 0 1.1-.3 1.5-.7l-1 2.7h3l-1-2.7c.4.4.9.7 1.5.7 1.1 0 2-.9 2-2s-.9-2-2-2h-.3c.2-.3.3-.7.3-1 0-1.1-.9-2-2-2"/></svg>
  
  <span class="md-ellipsis">
    数据类型
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../numpy/array-creation/" class="md-nav__link">
        
  
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M21 2H3c-1.1 0-2 .9-2 2v16c0 1.1.9 2 2 2h18c1.1 0 2-.9 2-2V4c0-1.1-.9-2-2-2m0 18H3V6h18zM6 8v10h4v-2H8v-6h2V8zm10 8h-2v2h4V8h-4v2h2z"/></svg>
  
  <span class="md-ellipsis">
    数组构建
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../numpy/view-copy/" class="md-nav__link">
        
  
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M4 12V9c0 2.2 3.6 4 8 4s8-1.8 8-4v3c0 .5-.2.9-.5 1.4-.8-.3-1.6-.4-2.5-.4-2.5 0-4.9 1.1-6.4 2.9C6.8 15.6 4 14 4 12m8-1c4.4 0 8-1.8 8-4s-3.6-4-8-4-8 1.8-8 4 3.6 4 8 4m-2.9 8.7-.3-.7.3-.7c.1-.2.2-.3.2-.5-3.1-.6-5.3-2-5.3-3.8v3c0 1.8 2.4 3.3 5.7 3.8-.2-.3-.4-.7-.6-1.1M17 18c-.6 0-1 .4-1 1s.4 1 1 1 1-.4 1-1-.4-1-1-1m6 1c-.9 2.3-3.3 4-6 4s-5.1-1.7-6-4c.9-2.3 3.3-4 6-4s5.1 1.7 6 4m-3.5 0c0-1.4-1.1-2.5-2.5-2.5s-2.5 1.1-2.5 2.5 1.1 2.5 2.5 2.5 2.5-1.1 2.5-2.5"/></svg>
  
  <span class="md-ellipsis">
    视图/副本
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../numpy/broadcast/" class="md-nav__link">
        
  
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M12 10c-1.1 0-2 .9-2 2s.9 2 2 2 2-.9 2-2-.9-2-2-2m6 2c0-3.3-2.7-6-6-6s-6 2.7-6 6c0 2.2 1.2 4.1 3 5.2l1-1.7c-1.2-.7-2-2-2-3.4 0-2.2 1.8-4 4-4s4 1.8 4 4c0 1.5-.8 2.8-2 3.4l1 1.7c1.8-1 3-3 3-5.2M12 2C6.5 2 2 6.5 2 12c0 3.7 2 6.9 5 8.6l1-1.7c-2.4-1.4-4-4-4-6.9 0-4.4 3.6-8 8-8s8 3.6 8 8c0 3-1.6 5.5-4 6.9l1 1.7c3-1.7 5-4.9 5-8.6 0-5.5-4.5-10-10-10"/></svg>
  
  <span class="md-ellipsis">
    数组广播
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../numpy/structured-array/" class="md-nav__link">
        
  
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M5 5h2v6H5zm5 0H8v6h2zM5 19h2v-6H5zm5-6H8v6h2v-2h5v-2h-5zm-8 8h2V3H2zM20 3v4h-7V5h-2v6h2V9h7v6h-2v-2h-2v6h2v-2h2v4h2V3z"/></svg>
  
  <span class="md-ellipsis">
    结构化数组
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../numpy/array-index/" class="md-nav__link">
        
  
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M14 8c-.55 0-1-.45-1-1s.45-1 1-1 1 .45 1 1-.45 1-1 1m-2 4v7H5v-7zm.78-2H4.22C3.55 10 3 10.55 3 11.22v8.56c0 .67.55 1.22 1.22 1.22h8.56c.67 0 1.22-.55 1.22-1.22v-8.56c0-.67-.55-1.22-1.22-1.22m7-7h-8.56C10.55 3 10 3.55 10 4.22V8h2V5h7v7h-3v2h3.78c.67 0 1.22-.55 1.22-1.22V4.22C21 3.55 20.45 3 19.78 3M17 8c-.55 0-1-.45-1-1s.45-1 1-1 1 .45 1 1-.45 1-1 1m0 3c-.55 0-1-.45-1-1s.45-1 1-1 1 .45 1 1-.45 1-1 1M7 15c-.55 0-1-.45-1-1s.45-1 1-1 1 .45 1 1-.45 1-1 1m3 3c-.55 0-1-.45-1-1s.45-1 1-1 1 .45 1 1-.45 1-1 1"/></svg>
  
  <span class="md-ellipsis">
    数组索引
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../numpy/io/" class="md-nav__link">
        
  
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M15 20c0-.55-.45-1-1-1h-1v-2h6c1.11 0 2-.89 2-2V3a2 2 0 0 0-2-2H5c-1.1 0-2 .9-2 2v12a2 2 0 0 0 2 2h6v2h-1c-.55 0-1 .45-1 1H2v2h7c0 .55.45 1 1 1h4c.55 0 1-.45 1-1h7v-2zM13 5h6v4h-6zm0 6h6v4h-6zM5 5h6v4H5zm0 10v-4h6v4z"/></svg>
  
  <span class="md-ellipsis">
    文件存取
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

    
      
      
  
  
  
  
    
    
      
        
      
        
      
        
      
        
      
    
    
      
      
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
          
        
        <input class="md-nav__toggle md-toggle md-toggle--indeterminate" type="checkbox" id="__nav_5" >
        
          
          <label class="md-nav__link" for="__nav_5" id="__nav_5_label" tabindex="0">
            
  
  <span class="md-ellipsis">
    Pandas
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_5_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_5">
            <span class="md-nav__icon md-icon"></span>
            Pandas
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../pandas/preliminary-knowledge/" class="md-nav__link">
        
  
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="m2.8 3 16.87 15.82s.33.45-.09.89c-.41.44-.95.06-.95.06zm5.01 1.59 13.1 12.05s.32.44-.09.86c-.42.47-.96.09-.96.09zM4.29 8l13.1 12.03s.32.44-.09.88c-.42.45-.96.09-.96.09zm7.76-2.04 9.15 8.41s.22.31-.07.63c-.28.3-.66.03-.66.03zm-6.6 5.95 9.15 8.42s.22.31-.06.62c-.29.31-.67.05-.67.05zm10.93-3.99 4.17 3.82s.11.14-.05.29c-.12.14-.31.02-.31.02zM7.56 16.1l4.18 3.81s.11.15-.04.29c-.14.15-.33.02-.33.02z"/></svg>
  
  <span class="md-ellipsis">
    预备知识
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../pandas/foundation/" class="md-nav__link">
        
  
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M9 5v5c4.03 2.47-.56 4.97-3 6v3h15v-3c-6.41-2.73-3.53-7 1-8V5zM2 6c.81 2.13 2.42 3.5 5 4V6z"/></svg>
  
  <span class="md-ellipsis">
    基础知识
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../pandas/data-index/" class="md-nav__link">
        
  
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M14 8c-.55 0-1-.45-1-1s.45-1 1-1 1 .45 1 1-.45 1-1 1m-2 4v7H5v-7zm.78-2H4.22C3.55 10 3 10.55 3 11.22v8.56c0 .67.55 1.22 1.22 1.22h8.56c.67 0 1.22-.55 1.22-1.22v-8.56c0-.67-.55-1.22-1.22-1.22m7-7h-8.56C10.55 3 10 3.55 10 4.22V8h2V5h7v7h-3v2h3.78c.67 0 1.22-.55 1.22-1.22V4.22C21 3.55 20.45 3 19.78 3M17 8c-.55 0-1-.45-1-1s.45-1 1-1 1 .45 1 1-.45 1-1 1m0 3c-.55 0-1-.45-1-1s.45-1 1-1 1 .45 1 1-.45 1-1 1M7 15c-.55 0-1-.45-1-1s.45-1 1-1 1 .45 1 1-.45 1-1 1m3 3c-.55 0-1-.45-1-1s.45-1 1-1 1 .45 1 1-.45 1-1 1"/></svg>
  
  <span class="md-ellipsis">
    数据索引
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../pandas/grouping/" class="md-nav__link">
        
  
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M5 3a2 2 0 0 0-2 2h2m2-2v2h2V3m2 0v2h2V3m2 0v2h2V3m2 0v2h2a2 2 0 0 0-2-2M3 7v2h2V7m2 0v4h4V7m2 0v4h4V7m2 0v2h2V7M3 11v2h2v-2m14 0v2h2v-2M7 13v4h4v-4m2 0v4h4v-4M3 15v2h2v-2m14 0v2h2v-2M3 19a2 2 0 0 0 2 2v-2m2 0v2h2v-2m2 0v2h2v-2m2 0v2h2v-2m2 0v2a2 2 0 0 0 2-2Z"/></svg>
  
  <span class="md-ellipsis">
    数据分组
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

    
      
      
  
  
  
  
    
    
      
        
          
        
      
        
      
        
      
        
      
        
      
        
      
        
      
    
    
      
      
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
          
        
        <input class="md-nav__toggle md-toggle md-toggle--indeterminate" type="checkbox" id="__nav_6" >
        
          
          
          <div class="md-nav__link md-nav__container">
            <a href="../../matplotlib/" class="md-nav__link ">
              
  
  <span class="md-ellipsis">
    Matplotlib
  </span>
  

            </a>
            
              
              <label class="md-nav__link " for="__nav_6" id="__nav_6_label" tabindex="0">
                <span class="md-nav__icon md-icon"></span>
              </label>
            
          </div>
        
        <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_6_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_6">
            <span class="md-nav__icon md-icon"></span>
            Matplotlib
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../matplotlib/foundation/" class="md-nav__link">
        
  
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M18.36 2.64c1.64 0 3 1.36 3 3 0 1.65-1.36 3-3 3-1.65 0-3-1.35-3-3 0-.3.05-.58.14-.84-1.07-.51-2.25-.8-3.5-.8a8 8 0 0 0-8 8l.04.84-1.99.21L2 12A10 10 0 0 1 12 2c1.69 0 3.28.42 4.67 1.16.49-.33 1.07-.52 1.69-.52m0 2a1 1 0 0 0-1 1 1 1 0 0 0 1 1c.56 0 1-.45 1-1 0-.56-.44-1-1-1M5.64 15.36c1.65 0 3 1.35 3 3 0 .3-.05.58-.14.84 1.07.51 2.25.8 3.5.8a8 8 0 0 0 8-8l-.04-.84 1.99-.21L22 12a10 10 0 0 1-10 10c-1.69 0-3.28-.42-4.67-1.16-.49.33-1.07.52-1.69.52-1.64 0-3-1.36-3-3 0-1.65 1.36-3 3-3m0 2c-.56 0-1 .45-1 1 0 .56.44 1 1 1a1 1 0 0 0 1-1 1 1 0 0 0-1-1M12 8a4 4 0 0 1 4 4 4 4 0 0 1-4 4 4 4 0 0 1-4-4 4 4 0 0 1 4-4"/></svg>
  
  <span class="md-ellipsis">
    基础知识
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../matplotlib/scatter-chart/" class="md-nav__link">
        
  
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M7 18a4 4 0 0 1-4-4 4 4 0 0 1 4-4 4 4 0 0 1 4 4 4 4 0 0 1-4 4m0-6a2 2 0 0 0-2 2 2 2 0 0 0 2 2 2 2 0 0 0 2-2 2 2 0 0 0-2-2m4-2a4 4 0 0 1-4-4 4 4 0 0 1 4-4 4 4 0 0 1 4 4 4 4 0 0 1-4 4m0-6a2 2 0 0 0-2 2 2 2 0 0 0 2 2 2 2 0 0 0 2-2 2 2 0 0 0-2-2m5.6 17.6c-2.21 0-4-1.79-4-4a4 4 0 0 1 4-4c2.21 0 4 1.79 4 4a4 4 0 0 1-4 4m0-6a2 2 0 0 0-2 2c0 1.1.9 2 2 2a2 2 0 0 0 2-2c0-1.1-.9-2-2-2"/></svg>
  
  <span class="md-ellipsis">
    散点图
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../matplotlib/column-chart/" class="md-nav__link">
        
  
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M3 22V8h4v14zm7 0V2h4v20zm7 0v-8h4v8z"/></svg>
  
  <span class="md-ellipsis">
    柱形图
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../matplotlib/pie-chart/" class="md-nav__link">
        
  
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M11 2v20c-5.1-.5-9-4.8-9-10s3.9-9.5 9-10m2 0v9h9c-.5-4.8-4.2-8.5-9-9m0 11v9c4.7-.5 8.5-4.2 9-9z"/></svg>
  
  <span class="md-ellipsis">
    饼图
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../matplotlib/histogram/" class="md-nav__link">
        
  
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M3 3h2v10h4V7h4v4h4v4h4v6H3z"/></svg>
  
  <span class="md-ellipsis">
    直方图
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../matplotlib/heat-map/" class="md-nav__link">
        
  
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="m8.5 4.5-3.1 5 3.1 5.2-3.3 5.8-1.8-.9 2.7-4.9L3 9.5l3.7-5.9zm6.2-.1-3.1 5.1 3.1 5-3.3 5.8-1.8-.9 2.7-4.9-3.1-5 3.7-6zm6.3 0-3.1 5.1 3.1 5-3.3 5.8-1.8-.9 2.7-4.9-3.1-5 3.7-6z"/></svg>
  
  <span class="md-ellipsis">
    热力图
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

    
      
      
  
  
  
  
    
    
      
        
      
    
    
      
      
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
          
        
        <input class="md-nav__toggle md-toggle md-toggle--indeterminate" type="checkbox" id="__nav_7" >
        
          
          <label class="md-nav__link" for="__nav_7" id="__nav_7_label" tabindex="0">
            
  
  <span class="md-ellipsis">
    Seaborn
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_7_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_7">
            <span class="md-nav__icon md-icon"></span>
            Seaborn
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../seaborn/introduction/" class="md-nav__link">
        
  
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M11.5.5c.5.25 1.5 1.9 1.5 3S12.33 5 11.5 5 10 4.85 10 3.75 11 2 11.5.5m7 8.5C21 9 23 11 23 13.5c0 1.56-.79 2.93-2 3.74V23H3v-5.76c-1.21-.81-2-2.18-2-3.74C1 11 3 9 5.5 9H10V6h3v3zM12 16a2.5 2.5 0 0 0 2.5-2.5H16a2.5 2.5 0 0 0 2.5 2.5 2.5 2.5 0 0 0 2.5-2.5 2.5 2.5 0 0 0-2.5-2.5h-13A2.5 2.5 0 0 0 3 13.5 2.5 2.5 0 0 0 5.5 16 2.5 2.5 0 0 0 8 13.5h1.5A2.5 2.5 0 0 0 12 16"/></svg>
  
  <span class="md-ellipsis">
    简要介绍
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

    
  </ul>
</nav>
                  </div>
                </div>
              </div>
            
            
              
              <div class="md-sidebar md-sidebar--secondary" data-md-component="sidebar" data-md-type="toc" >
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    

<nav class="md-nav md-nav--secondary" aria-label="Table of contents">
  
  
  
  
    <label class="md-nav__title" for="__toc">
      <span class="md-nav__icon md-icon"></span>
      Table of contents
    </label>
    <ul class="md-nav__list" data-md-component="toc" data-md-scrollfix>
      
        <li class="md-nav__item">
  <a href="#_1" class="md-nav__link">
    <span class="md-ellipsis">
      模块、包和库
    </span>
  </a>
  
    <nav class="md-nav" aria-label="模块、包和库">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#_2" class="md-nav__link">
    <span class="md-ellipsis">
      模块
    </span>
  </a>
  
    <nav class="md-nav" aria-label="模块">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#_3" class="md-nav__link">
    <span class="md-ellipsis">
      作用域
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#_4" class="md-nav__link">
    <span class="md-ellipsis">
      包
    </span>
  </a>
  
    <nav class="md-nav" aria-label="包">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#_5" class="md-nav__link">
    <span class="md-ellipsis">
      常规包
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#_6" class="md-nav__link">
    <span class="md-ellipsis">
      命名空间包
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#_7" class="md-nav__link">
    <span class="md-ellipsis">
      库
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#_8" class="md-nav__link">
    <span class="md-ellipsis">
      导入
    </span>
  </a>
  
    <nav class="md-nav" aria-label="导入">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#搜索路径" class="md-nav__link">
    <span class="md-ellipsis">
      搜索路径
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#import" class="md-nav__link">
    <span class="md-ellipsis">
      import
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#from-import" class="md-nav__link">
    <span class="md-ellipsis">
      from ... import ...
    </span>
  </a>
  
    <nav class="md-nav" aria-label="from ... import ...">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#_9" class="md-nav__link">
    <span class="md-ellipsis">
      绝对导入和相对导入
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#package属性" class="md-nav__link">
    <span class="md-ellipsis">
      __package__属性
    </span>
  </a>
  
    <nav class="md-nav" aria-label="__package__属性">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#__package__" class="md-nav__link">
    <span class="md-ellipsis">
      __package__属性和相对导入
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#__init__py" class="md-nav__link">
    <span class="md-ellipsis">
      __init__.py文件
    </span>
  </a>
  
    <nav class="md-nav" aria-label="__init__.py文件">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#init.py是一个模块" class="md-nav__link">
    <span class="md-ellipsis">
      __init__.py是一个模块
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#_10" class="md-nav__link">
    <span class="md-ellipsis">
      初始化包
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#_11" class="md-nav__link">
    <span class="md-ellipsis">
      递归包结构
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#_12" class="md-nav__link">
    <span class="md-ellipsis">
      控制包的导入行为
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#__main__py" class="md-nav__link">
    <span class="md-ellipsis">
      __main__.py文件
    </span>
  </a>
  
    <nav class="md-nav" aria-label="__main__.py文件">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#_13" class="md-nav__link">
    <span class="md-ellipsis">
      执行包
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#_14" class="md-nav__link">
    <span class="md-ellipsis">
      执行文件夹
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#_15" class="md-nav__link">
    <span class="md-ellipsis">
      打包
    </span>
  </a>
  
    <nav class="md-nav" aria-label="打包">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#setuptools" class="md-nav__link">
    <span class="md-ellipsis">
      setuptools打包
    </span>
  </a>
  
    <nav class="md-nav" aria-label="setuptools打包">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#_16" class="md-nav__link">
    <span class="md-ellipsis">
      包内容
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#_17" class="md-nav__link">
    <span class="md-ellipsis">
      打包
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#_18" class="md-nav__link">
    <span class="md-ellipsis">
      参数
    </span>
  </a>
  
    <nav class="md-nav" aria-label="参数">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#_19" class="md-nav__link">
    <span class="md-ellipsis">
      描述
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#_20" class="md-nav__link">
    <span class="md-ellipsis">
      版本
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#_21" class="md-nav__link">
    <span class="md-ellipsis">
      依赖
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#_22" class="md-nav__link">
    <span class="md-ellipsis">
      其他参数
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#_23" class="md-nav__link">
    <span class="md-ellipsis">
      上传
    </span>
  </a>
  
    <nav class="md-nav" aria-label="上传">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#twine" class="md-nav__link">
    <span class="md-ellipsis">
      twine上传
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#_24" class="md-nav__link">
    <span class="md-ellipsis">
      工具
    </span>
  </a>
  
    <nav class="md-nav" aria-label="工具">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#poetry" class="md-nav__link">
    <span class="md-ellipsis">
      poetry
    </span>
  </a>
  
    <nav class="md-nav" aria-label="poetry">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#_25" class="md-nav__link">
    <span class="md-ellipsis">
      安装依赖
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
    </ul>
  
</nav>
                  </div>
                </div>
              </div>
            
          
          
            <div class="md-content" data-md-component="content">
              <article class="md-content__inner md-typeset">
                
                  

  
    <a href="https://github.com/sigmax01/py/edit/master/docs/foundation/module.md" title="Edit this page" class="md-content__button md-icon">
      
      <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M10 20H6V4h7v5h5v3.1l2-2V8l-6-6H6c-1.1 0-2 .9-2 2v16c0 1.1.9 2 2 2h4zm10.2-7c.1 0 .3.1.4.2l1.3 1.3c.2.2.2.6 0 .8l-1 1-2.1-2.1 1-1c.1-.1.2-.2.4-.2m0 3.9L14.1 23H12v-2.1l6.1-6.1z"/></svg>
    </a>
  
  
    
      
    
    <a href="https://github.com/sigmax01/py/raw/master/docs/foundation/module.md" title="View source of this page" class="md-content__button md-icon">
      
      <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M17 18c.56 0 1 .44 1 1s-.44 1-1 1-1-.44-1-1 .44-1 1-1m0-3c-2.73 0-5.06 1.66-6 4 .94 2.34 3.27 4 6 4s5.06-1.66 6-4c-.94-2.34-3.27-4-6-4m0 6.5a2.5 2.5 0 0 1-2.5-2.5 2.5 2.5 0 0 1 2.5-2.5 2.5 2.5 0 0 1 2.5 2.5 2.5 2.5 0 0 1-2.5 2.5M9.27 20H6V4h7v5h5v4.07c.7.08 1.36.25 2 .49V8l-6-6H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h4.5a8.2 8.2 0 0 1-1.23-2"/></svg>
    </a>
  


  <h1>模块/包/库</h1>

<h2 id="_1">模块、包和库</h2>
<ul>
<li>模块: 一堆函数、类、变量的集合</li>
<li>包: 一个包可能由多个模块组成</li>
<li>库: 一个库可能由多个包和模块组成</li>
</ul>
<h3 id="_2">模块</h3>
<p>以<code>.py</code>为后缀的文件, 称之为模块. </p>
<details class="example" open="open">
<summary>例子</summary>
<p>假设现在有一个名为demo.py的文件: </p>
<div class="highlight"><pre><span></span><code><a id="__codelineno-0-1" name="__codelineno-0-1" href="#__codelineno-0-1"></a><span class="n">name</span> <span class="o">=</span> <span class="s2">&quot;wenzexu&quot;</span>
<a id="__codelineno-0-2" name="__codelineno-0-2" href="#__codelineno-0-2"></a><span class="nb">print</span><span class="p">(</span><span class="s2">&quot;导入成功&quot;</span><span class="p">)</span>
</code></pre></div>
<p>直接使用<code>import</code>语句就能导入, 导入之后, 可以使用<code>模块名.变量名</code>的方式访问这个变量:</p>
<div class="highlight"><pre><span></span><code><a id="__codelineno-1-1" name="__codelineno-1-1" href="#__codelineno-1-1"></a>&gt;&gt;&gt; import demo
<a id="__codelineno-1-2" name="__codelineno-1-2" href="#__codelineno-1-2"></a>导入成功 # 由于未定义__name__, 导致顶层代码执行
<a id="__codelineno-1-3" name="__codelineno-1-3" href="#__codelineno-1-3"></a>&gt;&gt;&gt; demo.name
<a id="__codelineno-1-4" name="__codelineno-1-4" href="#__codelineno-1-4"></a>&#39;wenzexu&#39;
</code></pre></div>
</details>
<details class="warning" open="open">
<summary>注意</summary>
<p>在导入模块之后, 模块之内所有未包裹在函数或者类里面的代码都会被执行. 如果你希望在导入包之后不执行顶层代码, 可以使用<code>__name__</code>参数. 这是一个特殊的内置变量, 一个文件被直接运行的时候, 其内部的<code>__name__</code>会被解释器设为<code>__main__</code>; 一个文件被作为模块导入的时候, <code>__name__</code>的值被设置为该模块的名字.</p>
<details class="example" open="open">
<summary>例子</summary>
<p>假设现在有一个名为demo.py的文件:</p>
<div class="highlight"><pre><span></span><code><a id="__codelineno-2-1" name="__codelineno-2-1" href="#__codelineno-2-1"></a><span class="n">name</span> <span class="o">=</span> <span class="s2">&quot;wenzexu&quot;</span>
<a id="__codelineno-2-2" name="__codelineno-2-2" href="#__codelineno-2-2"></a>
<a id="__codelineno-2-3" name="__codelineno-2-3" href="#__codelineno-2-3"></a><span class="k">def</span> <span class="nf">main</span><span class="p">():</span>
<a id="__codelineno-2-4" name="__codelineno-2-4" href="#__codelineno-2-4"></a>    <span class="nb">print</span><span class="p">(</span><span class="s2">&quot;导入成功&quot;</span><span class="p">)</span>
<a id="__codelineno-2-5" name="__codelineno-2-5" href="#__codelineno-2-5"></a>    <span class="nb">print</span><span class="p">(</span><span class="vm">__name__</span><span class="p">)</span>
<a id="__codelineno-2-6" name="__codelineno-2-6" href="#__codelineno-2-6"></a>
<a id="__codelineno-2-7" name="__codelineno-2-7" href="#__codelineno-2-7"></a><span class="k">if</span> <span class="vm">__name__</span> <span class="o">==</span> <span class="s2">&quot;__main__&quot;</span><span class="p">:</span>
<a id="__codelineno-2-8" name="__codelineno-2-8" href="#__codelineno-2-8"></a>    <span class="n">main</span><span class="p">()</span>
</code></pre></div>
<p>运行demo.py:</p>
<div class="highlight"><pre><span></span><code><a id="__codelineno-3-1" name="__codelineno-3-1" href="#__codelineno-3-1"></a>$<span class="w"> </span>python<span class="w"> </span>demo.py
<a id="__codelineno-3-2" name="__codelineno-3-2" href="#__codelineno-3-2"></a>导入成功
<a id="__codelineno-3-3" name="__codelineno-3-3" href="#__codelineno-3-3"></a>__main__
</code></pre></div>
<p>在另一个文件run.py导入这个demo.py模块: </p>
<div class="highlight"><pre><span></span><code><a id="__codelineno-4-1" name="__codelineno-4-1" href="#__codelineno-4-1"></a><span class="kn">import</span> <span class="nn">demo</span>
<a id="__codelineno-4-2" name="__codelineno-4-2" href="#__codelineno-4-2"></a><span class="nb">print</span><span class="p">(</span><span class="n">demo</span><span class="o">.</span><span class="n">name</span><span class="p">)</span>
</code></pre></div>
<p>运行run.py:</p>
<div class="highlight"><pre><span></span><code><a id="__codelineno-5-1" name="__codelineno-5-1" href="#__codelineno-5-1"></a>$<span class="w"> </span>python<span class="w"> </span>run.py
<a id="__codelineno-5-2" name="__codelineno-5-2" href="#__codelineno-5-2"></a>wenzexu
<a id="__codelineno-5-3" name="__codelineno-5-3" href="#__codelineno-5-3"></a>demo
</code></pre></div>
</details>
<details class="tip" open="open">
<summary>Tip</summary>
<p>可以使用<code>python</code>命令的<code>-m</code>选项用于直接运行模块, 该选项后接模块名. 当你使用这个选项之后, 解释器将制定的模块作为脚本执行, 而不仅仅是导入它. 这意味着模块中的所有代码都会被执行, 包括顶层代码, 即被<code>if __name__ == "__main__"</code>保护的代码块. </p>
</details>
</details>
<details class="tip" open="open">
<summary>Tip</summary>
<p>当模块被导入之后, 会在当前目录下产生一个叫做<code>__pycache__</code>的缓存文件夹. 这里面的文件是模块被导入之后解释器根据模块代码编译生成的字节码. 这样如果以后再次运行的话. 如果调用的模块未发生改变, 那就直接跳过编译这一步, 直接去<code>__pycache__</code>文件夹里去运行相关的<code>*.pyc</code>文件, 大大缩短了项目运行前的准备时间.</p>
<details class="example" open="open">
<summary>例子</summary>
<div class="highlight"><pre><span></span><code><a id="__codelineno-6-1" name="__codelineno-6-1" href="#__codelineno-6-1"></a>$<span class="w"> </span>tree<span class="w"> </span>.
<a id="__codelineno-6-2" name="__codelineno-6-2" href="#__codelineno-6-2"></a>.
<a id="__codelineno-6-3" name="__codelineno-6-3" href="#__codelineno-6-3"></a>├──<span class="w"> </span>__pycache__
<a id="__codelineno-6-4" name="__codelineno-6-4" href="#__codelineno-6-4"></a>│<span class="w">   </span>└──<span class="w"> </span>demo.cpython-312.pyc
<a id="__codelineno-6-5" name="__codelineno-6-5" href="#__codelineno-6-5"></a>├──<span class="w"> </span>demo.py
<a id="__codelineno-6-6" name="__codelineno-6-6" href="#__codelineno-6-6"></a>└──<span class="w"> </span>run.py
</code></pre></div>
</details>
</details>
<h4 id="_3">作用域</h4>
<p>在一个模块中, 我们可能定义很多的函数和变量, 有的函数和变量我们希望给别人使用, 有的函数和变量我们希望仅仅在模块内部使用, 这可以通过<code>_</code>前缀实现. </p>
<details class="example" open="open">
<summary>例子</summary>
<div class="highlight"><pre><span></span><code><a id="__codelineno-7-1" name="__codelineno-7-1" href="#__codelineno-7-1"></a><span class="k">def</span> <span class="nf">_private_1</span><span class="p">(</span><span class="n">name</span><span class="p">):</span>
<a id="__codelineno-7-2" name="__codelineno-7-2" href="#__codelineno-7-2"></a><span class="k">return</span> <span class="s1">&#39;Hello, </span><span class="si">%s</span><span class="s1">&#39;</span> <span class="o">%</span> <span class="n">name</span>
<a id="__codelineno-7-3" name="__codelineno-7-3" href="#__codelineno-7-3"></a>
<a id="__codelineno-7-4" name="__codelineno-7-4" href="#__codelineno-7-4"></a><span class="k">def</span> <span class="nf">_private_2</span><span class="p">(</span><span class="n">name</span><span class="p">):</span>
<a id="__codelineno-7-5" name="__codelineno-7-5" href="#__codelineno-7-5"></a>    <span class="k">return</span> <span class="s1">&#39;Hi, </span><span class="si">%s</span><span class="s1">&#39;</span> <span class="o">%</span> <span class="n">name</span>
<a id="__codelineno-7-6" name="__codelineno-7-6" href="#__codelineno-7-6"></a>
<a id="__codelineno-7-7" name="__codelineno-7-7" href="#__codelineno-7-7"></a><span class="k">def</span> <span class="nf">greeting</span><span class="p">(</span><span class="n">name</span><span class="p">):</span>
<a id="__codelineno-7-8" name="__codelineno-7-8" href="#__codelineno-7-8"></a>    <span class="k">if</span> <span class="nb">len</span><span class="p">(</span><span class="n">name</span><span class="p">)</span> <span class="o">&gt;</span> <span class="mi">3</span><span class="p">:</span>
<a id="__codelineno-7-9" name="__codelineno-7-9" href="#__codelineno-7-9"></a>        <span class="k">return</span> <span class="n">_private_1</span><span class="p">(</span><span class="n">name</span><span class="p">)</span>
<a id="__codelineno-7-10" name="__codelineno-7-10" href="#__codelineno-7-10"></a>    <span class="k">else</span><span class="p">:</span>
<a id="__codelineno-7-11" name="__codelineno-7-11" href="#__codelineno-7-11"></a>        <span class="k">return</span> <span class="n">_private_2</span><span class="p">(</span><span class="n">name</span><span class="p">)</span>
</code></pre></div>
</details>
<details class="warning" open="open">
<summary>注意</summary>
<p>这种函数是"不应该"被直接引用, 而不是"不能"被直接引用, 这是一种约定俗称的方法, 告诉开发者这个函数不能引用. 在实例变量/函数的<a href="/foundation/object/#访问限制">访问限制</a>也提到过这个概念. </p>
</details>
<h3 id="_4">包</h3>
<h4 id="_5">常规包</h4>
<p>在Python3.3之前, 一个包想要被导入使用, 包内必须要有<code>__init__.py</code>文件, 这个是Python识别一个文件夹是否为一个包的重要标志.</p>
<details class="example" open="open">
<summary>例子</summary>
<p>目录结构: </p>
<div class="highlight"><pre><span></span><code><a id="__codelineno-8-1" name="__codelineno-8-1" href="#__codelineno-8-1"></a>demo/
<a id="__codelineno-8-2" name="__codelineno-8-2" href="#__codelineno-8-2"></a>├── bar
<a id="__codelineno-8-3" name="__codelineno-8-3" href="#__codelineno-8-3"></a>│   └── __init__.py
<a id="__codelineno-8-4" name="__codelineno-8-4" href="#__codelineno-8-4"></a>├── foo
<a id="__codelineno-8-5" name="__codelineno-8-5" href="#__codelineno-8-5"></a>│   └── __init__.py
<a id="__codelineno-8-6" name="__codelineno-8-6" href="#__codelineno-8-6"></a>└── __init__.py
</code></pre></div>
<p>现在, 把<code>demo</code>下的<code>__init__.py</code>删除, 执行语句: </p>
<div class="highlight"><pre><span></span><code><a id="__codelineno-9-1" name="__codelineno-9-1" href="#__codelineno-9-1"></a>&gt;&gt;&gt; import demo
<a id="__codelineno-9-2" name="__codelineno-9-2" href="#__codelineno-9-2"></a>Traceback (most recent call last):
<a id="__codelineno-9-3" name="__codelineno-9-3" href="#__codelineno-9-3"></a>    File &quot;&lt;stdin&gt;&quot;, line 1, in &lt;module&gt;
<a id="__codelineno-9-4" name="__codelineno-9-4" href="#__codelineno-9-4"></a>ImportError: No module named demo
</code></pre></div>
</details>
<h4 id="_6">命名空间包</h4>
<p>在Python3.3之后, 即使一个文件夹中没有定义<code>__init__.py</code>, 也可以被作为命名空间包的形式导入.</p>
<details class="example" open="open">
<summary>例子</summary>
<p>目录结构:</p>
<div class="highlight"><pre><span></span><code><a id="__codelineno-10-1" name="__codelineno-10-1" href="#__codelineno-10-1"></a>demo/
<a id="__codelineno-10-2" name="__codelineno-10-2" href="#__codelineno-10-2"></a>├── bar
<a id="__codelineno-10-3" name="__codelineno-10-3" href="#__codelineno-10-3"></a>│   └── __init__.py
<a id="__codelineno-10-4" name="__codelineno-10-4" href="#__codelineno-10-4"></a>└── foo
<a id="__codelineno-10-5" name="__codelineno-10-5" href="#__codelineno-10-5"></a>    └── __init__.py
</code></pre></div>
<p>尝试导入<code>demo</code>: </p>
<div class="highlight"><pre><span></span><code><a id="__codelineno-11-1" name="__codelineno-11-1" href="#__codelineno-11-1"></a>&gt;&gt;&gt; import demo
</code></pre></div>
<p>并没有报错</p>
</details>
<h3 id="_7">库</h3>
<p>库是一定功能代码的集合, 通常认为他是一个完整的项目打包.</p>
<h2 id="_8">导入</h2>
<h3 id="搜索路径">搜索路径</h3>
<p>当我们导入包或者模块的时候, Python解释器会在这两个地方寻找包或者模块:</p>
<ol>
<li><code>sys.path</code></li>
<li>运行文件所在的目录</li>
</ol>
<details class="tip" open="open">
<summary>Tip</summary>
<p>可以通过<code>sys</code>模块查看<code>sys.path</code>.</p>
<details class="example" open="open">
<summary>例子</summary>
<div class="highlight"><pre><span></span><code><a id="__codelineno-12-1" name="__codelineno-12-1" href="#__codelineno-12-1"></a>&gt;&gt;&gt; import sys
<a id="__codelineno-12-2" name="__codelineno-12-2" href="#__codelineno-12-2"></a>&gt;&gt;&gt; sys.path
<a id="__codelineno-12-3" name="__codelineno-12-3" href="#__codelineno-12-3"></a>[&#39;&#39;, &#39;/usr/lib64/python39.zip&#39;, &#39;/usr/lib64/python3.9&#39;, &#39;/usr/lib64/python3.9/lib-dynload&#39;, &#39;/usr/lib64/python3.9/site-packages&#39;, &#39;/usr/lib/python3.9/site-packages&#39;]
</code></pre></div>
</details>
</details>
<h3 id="import"><code>import</code></h3>
<p><code>import</code>只能用于导入包或者模块, 不能导入模块内部的变量/函数/类. 使用内部变量/函数/类的时候要加包或者模块的前缀.</p>
<ul>
<li><code>import [module]</code><ul>
<li><code>import [module] as [alias]</code></li>
</ul>
</li>
<li><code>import [package].[module]</code><ul>
<li><code>import [package].[module] as [alias]</code></li>
</ul>
</li>
<li><code>import [package]</code>: 详见<a href="#init.py是一个module">导入包</a></li>
<li>
<p><code>import [package].[subpackage]</code>: 详见<a href="#init.py是一个module">导入包</a></p>
<details class="warning" open="open">
<summary>注意</summary>
<p>这种情况下加载的其实是包下的<code>__init__.py</code>文件. </p>
<details class="example">
<summary>例子</summary>
<p>目录结构:</p>
<div class="highlight"><pre><span></span><code><a id="__codelineno-13-1" name="__codelineno-13-1" href="#__codelineno-13-1"></a>.
<a id="__codelineno-13-2" name="__codelineno-13-2" href="#__codelineno-13-2"></a>├──<span class="w"> </span>pac
<a id="__codelineno-13-3" name="__codelineno-13-3" href="#__codelineno-13-3"></a>│<span class="w">   </span>├──<span class="w"> </span>__init__.py
<a id="__codelineno-13-4" name="__codelineno-13-4" href="#__codelineno-13-4"></a>│<span class="w">   </span>└──<span class="w"> </span>demo.py
<a id="__codelineno-13-5" name="__codelineno-13-5" href="#__codelineno-13-5"></a>└──<span class="w"> </span>run.py
</code></pre></div>
<p><code>__init__.py</code>文件:</p>
<div class="highlight"><pre><span></span><code><a id="__codelineno-14-1" name="__codelineno-14-1" href="#__codelineno-14-1"></a><span class="nb">print</span><span class="p">(</span><span class="s2">&quot;hello&quot;</span><span class="p">)</span>
<a id="__codelineno-14-2" name="__codelineno-14-2" href="#__codelineno-14-2"></a><span class="nb">print</span><span class="p">(</span><span class="vm">__name__</span><span class="p">)</span>
</code></pre></div>
<p><code>run.py</code>文件:</p>
<div class="highlight"><pre><span></span><code><a id="__codelineno-15-1" name="__codelineno-15-1" href="#__codelineno-15-1"></a><span class="kn">import</span> <span class="nn">pac</span>
</code></pre></div>
<p>执行<code>run.py</code></p>
<div class="highlight"><pre><span></span><code><a id="__codelineno-16-1" name="__codelineno-16-1" href="#__codelineno-16-1"></a>$<span class="w"> </span>python<span class="w"> </span>run.py
<a id="__codelineno-16-2" name="__codelineno-16-2" href="#__codelineno-16-2"></a>hello
<a id="__codelineno-16-3" name="__codelineno-16-3" href="#__codelineno-16-3"></a>demo
</code></pre></div>
</details>
</details>
</li>
</ul>
<details class="example" open="open">
<summary>例子</summary>
<div class="tabbed-set tabbed-alternate" data-tabs="1:2"><input checked="checked" id="__tabbed_1_1" name="__tabbed_1" type="radio" /><input id="__tabbed_1_2" name="__tabbed_1" type="radio" /><div class="tabbed-labels"><label for="__tabbed_1_1">例子1</label><label for="__tabbed_1_2">例子2</label></div>
<div class="tabbed-content">
<div class="tabbed-block">
<p>目录结构:</p>
<div class="highlight"><pre><span></span><code><a id="__codelineno-17-1" name="__codelineno-17-1" href="#__codelineno-17-1"></a>.
<a id="__codelineno-17-2" name="__codelineno-17-2" href="#__codelineno-17-2"></a>├──<span class="w"> </span>demo.py
<a id="__codelineno-17-3" name="__codelineno-17-3" href="#__codelineno-17-3"></a>└──<span class="w"> </span>run.py
</code></pre></div>
<p><code>demo.py</code>文件: </p>
<div class="highlight"><pre><span></span><code><a id="__codelineno-18-1" name="__codelineno-18-1" href="#__codelineno-18-1"></a><span class="n">name</span> <span class="o">=</span> <span class="s2">&quot;wenzexu&quot;</span>
<a id="__codelineno-18-2" name="__codelineno-18-2" href="#__codelineno-18-2"></a>
<a id="__codelineno-18-3" name="__codelineno-18-3" href="#__codelineno-18-3"></a><span class="k">def</span> <span class="nf">main</span><span class="p">():</span>
<a id="__codelineno-18-4" name="__codelineno-18-4" href="#__codelineno-18-4"></a>    <span class="nb">print</span><span class="p">(</span><span class="s2">&quot;导入成功&quot;</span><span class="p">)</span>
<a id="__codelineno-18-5" name="__codelineno-18-5" href="#__codelineno-18-5"></a>    <span class="nb">print</span><span class="p">(</span><span class="vm">__name__</span><span class="p">)</span>
<a id="__codelineno-18-6" name="__codelineno-18-6" href="#__codelineno-18-6"></a>
<a id="__codelineno-18-7" name="__codelineno-18-7" href="#__codelineno-18-7"></a><span class="k">if</span> <span class="vm">__name__</span> <span class="o">==</span> <span class="s2">&quot;__main__&quot;</span><span class="p">:</span>
<a id="__codelineno-18-8" name="__codelineno-18-8" href="#__codelineno-18-8"></a>    <span class="n">main</span><span class="p">()</span>
</code></pre></div>
<p><code>run.py</code>文件:</p>
<div class="highlight"><pre><span></span><code><a id="__codelineno-19-1" name="__codelineno-19-1" href="#__codelineno-19-1"></a><span class="kn">import</span> <span class="nn">demo</span>
<a id="__codelineno-19-2" name="__codelineno-19-2" href="#__codelineno-19-2"></a>
<a id="__codelineno-19-3" name="__codelineno-19-3" href="#__codelineno-19-3"></a><span class="nb">print</span><span class="p">(</span><span class="n">demo</span><span class="o">.</span><span class="n">name</span><span class="p">)</span>
</code></pre></div>
<p>执行<code>run.py</code>: </p>
<div class="highlight"><pre><span></span><code><a id="__codelineno-20-1" name="__codelineno-20-1" href="#__codelineno-20-1"></a>$<span class="w"> </span>python<span class="w"> </span>run.py
<a id="__codelineno-20-2" name="__codelineno-20-2" href="#__codelineno-20-2"></a>wenzexu
</code></pre></div>
</div>
<div class="tabbed-block">
<p>目录结构:</p>
<div class="highlight"><pre><span></span><code><a id="__codelineno-21-1" name="__codelineno-21-1" href="#__codelineno-21-1"></a>.
<a id="__codelineno-21-2" name="__codelineno-21-2" href="#__codelineno-21-2"></a>├──<span class="w"> </span>pac
<a id="__codelineno-21-3" name="__codelineno-21-3" href="#__codelineno-21-3"></a>│<span class="w">   </span>├──<span class="w"> </span>__init__.py
<a id="__codelineno-21-4" name="__codelineno-21-4" href="#__codelineno-21-4"></a>│<span class="w">   </span>└──<span class="w"> </span>demo.py
<a id="__codelineno-21-5" name="__codelineno-21-5" href="#__codelineno-21-5"></a>└──<span class="w"> </span>run.py<span class="w"> </span>
</code></pre></div>
<p><code>demo.py</code>文件:</p>
<div class="highlight"><pre><span></span><code><a id="__codelineno-22-1" name="__codelineno-22-1" href="#__codelineno-22-1"></a><span class="n">name</span> <span class="o">=</span> <span class="s2">&quot;wenzexu&quot;</span>
<a id="__codelineno-22-2" name="__codelineno-22-2" href="#__codelineno-22-2"></a>
<a id="__codelineno-22-3" name="__codelineno-22-3" href="#__codelineno-22-3"></a><span class="k">def</span> <span class="nf">main</span><span class="p">():</span>
<a id="__codelineno-22-4" name="__codelineno-22-4" href="#__codelineno-22-4"></a>    <span class="nb">print</span><span class="p">(</span><span class="s2">&quot;导入成功&quot;</span><span class="p">)</span>
<a id="__codelineno-22-5" name="__codelineno-22-5" href="#__codelineno-22-5"></a>    <span class="nb">print</span><span class="p">(</span><span class="vm">__name__</span><span class="p">)</span>
<a id="__codelineno-22-6" name="__codelineno-22-6" href="#__codelineno-22-6"></a>
<a id="__codelineno-22-7" name="__codelineno-22-7" href="#__codelineno-22-7"></a><span class="k">if</span> <span class="vm">__name__</span> <span class="o">==</span> <span class="s2">&quot;__main__&quot;</span><span class="p">:</span>
<a id="__codelineno-22-8" name="__codelineno-22-8" href="#__codelineno-22-8"></a>    <span class="n">main</span><span class="p">()</span>
</code></pre></div>
<p><code>run.py</code>文件:</p>
<div class="highlight"><pre><span></span><code><a id="__codelineno-23-1" name="__codelineno-23-1" href="#__codelineno-23-1"></a><span class="kn">import</span> <span class="nn">pac.demo</span>
<a id="__codelineno-23-2" name="__codelineno-23-2" href="#__codelineno-23-2"></a>
<a id="__codelineno-23-3" name="__codelineno-23-3" href="#__codelineno-23-3"></a><span class="nb">print</span><span class="p">(</span><span class="n">pac</span><span class="o">.</span><span class="n">demo</span><span class="o">.</span><span class="n">name</span><span class="p">)</span> 
</code></pre></div>
<p>运行<code>run.py</code>:</p>
<div class="highlight"><pre><span></span><code><a id="__codelineno-24-1" name="__codelineno-24-1" href="#__codelineno-24-1"></a>$<span class="w"> </span>python<span class="w"> </span>run.py
<a id="__codelineno-24-2" name="__codelineno-24-2" href="#__codelineno-24-2"></a>wenzexu
</code></pre></div>
</div>
</div>
</div>
</details>
<h3 id="from-import"><code>from ... import ...</code></h3>
<p><code>from ... import ...</code>可以用于导入模块, 以及模块中的变量/函数/类, 但是不能用于导入包. 如果导入的是模块, 使用内部变量/函数/类的时候要加上前缀.</p>
<ul>
<li><code>from [package] import [module]</code></li>
<li><code>from [module] import [var, function, class]</code></li>
<li><code>from [package].[module] import [var, function, class]</code></li>
<li><code>from [package].[module] import [var, function, class], [var, function, class]</code></li>
<li><code>from [package].[module] import *</code> </li>
<li><code>from [package].[subpackage] import [module]</code></li>
<li><code>from [package] import *</code></li>
<li><code>from [package] import [var, function, class]</code></li>
</ul>
<details class="example" open="open">
<summary>例子</summary>
<div class="tabbed-set tabbed-alternate" data-tabs="2:2"><input checked="checked" id="__tabbed_2_1" name="__tabbed_2" type="radio" /><input id="__tabbed_2_2" name="__tabbed_2" type="radio" /><div class="tabbed-labels"><label for="__tabbed_2_1">例子1</label><label for="__tabbed_2_2">例子2</label></div>
<div class="tabbed-content">
<div class="tabbed-block">
<p>目录结构:</p>
<div class="highlight"><pre><span></span><code><a id="__codelineno-25-1" name="__codelineno-25-1" href="#__codelineno-25-1"></a>.
<a id="__codelineno-25-2" name="__codelineno-25-2" href="#__codelineno-25-2"></a>├──<span class="w"> </span>pac
<a id="__codelineno-25-3" name="__codelineno-25-3" href="#__codelineno-25-3"></a>│<span class="w">   </span>├──<span class="w"> </span>__init__.py
<a id="__codelineno-25-4" name="__codelineno-25-4" href="#__codelineno-25-4"></a>│<span class="w">   </span>└──<span class="w"> </span>demo.py
<a id="__codelineno-25-5" name="__codelineno-25-5" href="#__codelineno-25-5"></a>└──<span class="w"> </span>run.py<span class="w"> </span>
</code></pre></div>
<p><code>demo.py</code>文件: </p>
<div class="highlight"><pre><span></span><code><a id="__codelineno-26-1" name="__codelineno-26-1" href="#__codelineno-26-1"></a><span class="kn">from</span> <span class="nn">pac.demo</span> <span class="kn">import</span> <span class="n">name</span>
<a id="__codelineno-26-2" name="__codelineno-26-2" href="#__codelineno-26-2"></a>
<a id="__codelineno-26-3" name="__codelineno-26-3" href="#__codelineno-26-3"></a><span class="nb">print</span><span class="p">(</span><span class="n">name</span><span class="p">)</span>
</code></pre></div>
<p><code>run.py</code>文件:</p>
<div class="highlight"><pre><span></span><code><a id="__codelineno-27-1" name="__codelineno-27-1" href="#__codelineno-27-1"></a><span class="n">name</span> <span class="o">=</span> <span class="s2">&quot;wenzexu&quot;</span>
</code></pre></div>
<p>运行<code>run.py</code>文件:</p>
<div class="highlight"><pre><span></span><code><a id="__codelineno-28-1" name="__codelineno-28-1" href="#__codelineno-28-1"></a>$<span class="w"> </span>python<span class="w"> </span>run.py
<a id="__codelineno-28-2" name="__codelineno-28-2" href="#__codelineno-28-2"></a>wenzexu
</code></pre></div>
</div>
<div class="tabbed-block">
<p>目录结构:</p>
<div class="highlight"><pre><span></span><code><a id="__codelineno-29-1" name="__codelineno-29-1" href="#__codelineno-29-1"></a>.
<a id="__codelineno-29-2" name="__codelineno-29-2" href="#__codelineno-29-2"></a>├──<span class="w"> </span>pac
<a id="__codelineno-29-3" name="__codelineno-29-3" href="#__codelineno-29-3"></a>│<span class="w">   </span>├──<span class="w"> </span>__init__.py
<a id="__codelineno-29-4" name="__codelineno-29-4" href="#__codelineno-29-4"></a>│<span class="w">   </span>└──<span class="w"> </span>demo.py
<a id="__codelineno-29-5" name="__codelineno-29-5" href="#__codelineno-29-5"></a>└──<span class="w"> </span>run.py<span class="w"> </span>
</code></pre></div>
<p><code>demo.py</code>文件: </p>
<div class="highlight"><pre><span></span><code><a id="__codelineno-30-1" name="__codelineno-30-1" href="#__codelineno-30-1"></a><span class="kn">from</span> <span class="nn">pac</span> <span class="kn">import</span> <span class="n">demo</span>
<a id="__codelineno-30-2" name="__codelineno-30-2" href="#__codelineno-30-2"></a>
<a id="__codelineno-30-3" name="__codelineno-30-3" href="#__codelineno-30-3"></a><span class="nb">print</span><span class="p">(</span><span class="n">demo</span><span class="o">.</span><span class="n">name</span><span class="p">)</span>
</code></pre></div>
<p><code>run.py</code>文件:</p>
<div class="highlight"><pre><span></span><code><a id="__codelineno-31-1" name="__codelineno-31-1" href="#__codelineno-31-1"></a><span class="n">name</span> <span class="o">=</span> <span class="s2">&quot;wenzexu&quot;</span>
</code></pre></div>
<p>运行<code>run.py</code>文件:</p>
<div class="highlight"><pre><span></span><code><a id="__codelineno-32-1" name="__codelineno-32-1" href="#__codelineno-32-1"></a>$<span class="w"> </span>python<span class="w"> </span>run.py
<a id="__codelineno-32-2" name="__codelineno-32-2" href="#__codelineno-32-2"></a>wenzexu
</code></pre></div>
</div>
</div>
</div>
</details>
<h4 id="_9">绝对导入和相对导入</h4>
<p>绝对导入指的是从根目录开始导入模块. 相对导入指的是从当前文件所在的目录开始导入模块. </p>
<p>相对导入的写法为:</p>
<ul>
<li><code>from . import [module]</code></li>
<li><code>from .[package] import [module]</code></li>
<li><code>from .. import [module]</code></li>
<li><code>from ..[package] import [module]</code></li>
<li><code>from . import [package]</code></li>
<li><code>from . import [package].[module]</code></li>
</ul>
<details class="example" open="open">
<summary>例子</summary>
<div class="tabbed-set tabbed-alternate" data-tabs="3:2"><input checked="checked" id="__tabbed_3_1" name="__tabbed_3" type="radio" /><input id="__tabbed_3_2" name="__tabbed_3" type="radio" /><div class="tabbed-labels"><label for="__tabbed_3_1">例子1</label><label for="__tabbed_3_2">例子2</label></div>
<div class="tabbed-content">
<div class="tabbed-block">
<p>目录结构:</p>
<div class="highlight"><pre><span></span><code><a id="__codelineno-33-1" name="__codelineno-33-1" href="#__codelineno-33-1"></a><span class="o">.</span>
<a id="__codelineno-33-2" name="__codelineno-33-2" href="#__codelineno-33-2"></a><span class="err">├──</span> <span class="n">a</span><span class="o">.</span><span class="n">py</span>
<a id="__codelineno-33-3" name="__codelineno-33-3" href="#__codelineno-33-3"></a><span class="err">├──</span> <span class="n">b</span><span class="o">.</span><span class="n">py</span>
<a id="__codelineno-33-4" name="__codelineno-33-4" href="#__codelineno-33-4"></a><span class="err">└──</span> <span class="n">step</span>
<a id="__codelineno-33-5" name="__codelineno-33-5" href="#__codelineno-33-5"></a>    <span class="err">├──</span> <span class="n">c</span><span class="o">.</span><span class="n">py</span>
<a id="__codelineno-33-6" name="__codelineno-33-6" href="#__codelineno-33-6"></a>    <span class="err">└──</span> <span class="n">d</span><span class="o">.</span><span class="n">py</span>
</code></pre></div>
<p><code>c.py</code>文件内容: </p>
<div class="highlight"><pre><span></span><code><a id="__codelineno-34-1" name="__codelineno-34-1" href="#__codelineno-34-1"></a><span class="kn">import</span> <span class="nn">d</span> <span class="c1"># 在Python3中导致报错</span>
<a id="__codelineno-34-2" name="__codelineno-34-2" href="#__codelineno-34-2"></a>
<a id="__codelineno-34-3" name="__codelineno-34-3" href="#__codelineno-34-3"></a><span class="k">def</span> <span class="nf">printSelf</span><span class="p">():</span>
<a id="__codelineno-34-4" name="__codelineno-34-4" href="#__codelineno-34-4"></a>    <span class="nb">print</span><span class="p">(</span><span class="s2">&quot;In c&quot;</span><span class="p">)</span>
</code></pre></div>
<p><code>a.py</code>文件内容:</p>
<div class="highlight"><pre><span></span><code><a id="__codelineno-35-1" name="__codelineno-35-1" href="#__codelineno-35-1"></a><span class="kn">from</span> <span class="nn">step</span> <span class="kn">import</span> <span class="n">c</span>
<a id="__codelineno-35-2" name="__codelineno-35-2" href="#__codelineno-35-2"></a>
<a id="__codelineno-35-3" name="__codelineno-35-3" href="#__codelineno-35-3"></a><span class="n">c</span><span class="o">.</span><span class="n">printSelf</span><span class="p">()</span>
</code></pre></div>
<p>上述运行<code>a.py</code>之后会报错, 因为<code>a.py</code>导入<code>c.py</code>之后, 再要导入<code>d.py</code>, 由于<code>a.py</code>和<code>d.py</code>在不同的目录下, 所以<code>c.py</code>导入<code>d.py</code>的时候会报错. 上述的写法在Python2里面没问题, 但是在Python3里面会报错. 因为这种写法在Python2里面是相对导入, 在Python3里面是绝对导入. </p>
</div>
<div class="tabbed-block">
<p>目录结构:</p>
<div class="highlight"><pre><span></span><code><a id="__codelineno-36-1" name="__codelineno-36-1" href="#__codelineno-36-1"></a><span class="o">.</span>
<a id="__codelineno-36-2" name="__codelineno-36-2" href="#__codelineno-36-2"></a><span class="err">├──</span> <span class="n">a</span><span class="o">.</span><span class="n">py</span>
<a id="__codelineno-36-3" name="__codelineno-36-3" href="#__codelineno-36-3"></a><span class="err">├──</span> <span class="n">b</span><span class="o">.</span><span class="n">py</span>
<a id="__codelineno-36-4" name="__codelineno-36-4" href="#__codelineno-36-4"></a><span class="err">└──</span> <span class="n">step</span>
<a id="__codelineno-36-5" name="__codelineno-36-5" href="#__codelineno-36-5"></a>    <span class="err">├──</span> <span class="n">c</span><span class="o">.</span><span class="n">py</span>
<a id="__codelineno-36-6" name="__codelineno-36-6" href="#__codelineno-36-6"></a>    <span class="err">└──</span> <span class="n">d</span><span class="o">.</span><span class="n">py</span>
</code></pre></div>
<p><code>c.py</code>文件内容: </p>
<div class="highlight"><pre><span></span><code><a id="__codelineno-37-1" name="__codelineno-37-1" href="#__codelineno-37-1"></a><span class="kn">from</span> <span class="nn">.</span> <span class="kn">import</span> <span class="n">d</span> <span class="c1"># 采用相对导入的写法</span>
<a id="__codelineno-37-2" name="__codelineno-37-2" href="#__codelineno-37-2"></a>
<a id="__codelineno-37-3" name="__codelineno-37-3" href="#__codelineno-37-3"></a><span class="k">def</span> <span class="nf">printSelf</span><span class="p">():</span>
<a id="__codelineno-37-4" name="__codelineno-37-4" href="#__codelineno-37-4"></a>    <span class="nb">print</span><span class="p">(</span><span class="s2">&quot;In c&quot;</span><span class="p">)</span>
</code></pre></div>
<p><code>a.py</code>文件内容:</p>
<div class="highlight"><pre><span></span><code><a id="__codelineno-38-1" name="__codelineno-38-1" href="#__codelineno-38-1"></a><span class="kn">from</span> <span class="nn">step</span> <span class="kn">import</span> <span class="n">c</span>
<a id="__codelineno-38-2" name="__codelineno-38-2" href="#__codelineno-38-2"></a>
<a id="__codelineno-38-3" name="__codelineno-38-3" href="#__codelineno-38-3"></a><span class="n">c</span><span class="o">.</span><span class="n">printSelf</span><span class="p">()</span>
</code></pre></div>
<p>运行<code>a.py</code>:</p>
<div class="highlight"><pre><span></span><code><a id="__codelineno-39-1" name="__codelineno-39-1" href="#__codelineno-39-1"></a>$<span class="w"> </span>python<span class="w"> </span>a.py
<a id="__codelineno-39-2" name="__codelineno-39-2" href="#__codelineno-39-2"></a>In<span class="w"> </span>c
</code></pre></div>
<p>这样使用相对导入就没问题了.</p>
</div>
</div>
</div>
</details>
<h2 id="package属性"><code>__package__</code>属性</h2>
<p><code>__package__</code>属性用于标识模块所属的包, 它在一个模块的值是这样确定的</p>
<ul>
<li>当这个模块是被作为包的一部分导入的时候, 这个模块内的<code>__package__</code>是包的名称</li>
<li>当这个模块是没有被作为包的一部分导入的时候, 这个模块内的<code>__package__</code>是空字符串</li>
<li>当这个模块是被直接执行的时候, 这个模块内的<code>__package__</code>是<code>None</code></li>
</ul>
<details class="example" open="open">
<summary>例子</summary>
<div class="tabbed-set tabbed-alternate" data-tabs="4:3"><input checked="checked" id="__tabbed_4_1" name="__tabbed_4" type="radio" /><input id="__tabbed_4_2" name="__tabbed_4" type="radio" /><input id="__tabbed_4_3" name="__tabbed_4" type="radio" /><div class="tabbed-labels"><label for="__tabbed_4_1"><code>module.py</code>作为包的一部分被导入</label><label for="__tabbed_4_2"><code>module.py</code>不作为包的一部分导入被导入</label><label for="__tabbed_4_3"><code>module.py</code>直接被执行</label></div>
<div class="tabbed-content">
<div class="tabbed-block">
<p>目录结构:</p>
<div class="highlight"><pre><span></span><code><a id="__codelineno-40-1" name="__codelineno-40-1" href="#__codelineno-40-1"></a>.
<a id="__codelineno-40-2" name="__codelineno-40-2" href="#__codelineno-40-2"></a>├── main
<a id="__codelineno-40-3" name="__codelineno-40-3" href="#__codelineno-40-3"></a>│   ├── __init__.py
<a id="__codelineno-40-4" name="__codelineno-40-4" href="#__codelineno-40-4"></a>│   └── module.py
<a id="__codelineno-40-5" name="__codelineno-40-5" href="#__codelineno-40-5"></a>└── test.py
</code></pre></div>
<p><code>test.py</code>文件:</p>
<div class="highlight"><pre><span></span><code><a id="__codelineno-41-1" name="__codelineno-41-1" href="#__codelineno-41-1"></a><span class="kn">import</span> <span class="nn">main.module</span>
</code></pre></div>
<p><code>module.py</code>文件:</p>
<div class="highlight"><pre><span></span><code><a id="__codelineno-42-1" name="__codelineno-42-1" href="#__codelineno-42-1"></a><span class="nb">print</span><span class="p">(</span><span class="n">__package__</span><span class="p">)</span>
</code></pre></div>
<p>执行: </p>
<div class="highlight"><pre><span></span><code><a id="__codelineno-43-1" name="__codelineno-43-1" href="#__codelineno-43-1"></a>$ python test.py
<a id="__codelineno-43-2" name="__codelineno-43-2" href="#__codelineno-43-2"></a>main
</code></pre></div>
</div>
<div class="tabbed-block">
<p>目录结构:</p>
<div class="highlight"><pre><span></span><code><a id="__codelineno-44-1" name="__codelineno-44-1" href="#__codelineno-44-1"></a>.
<a id="__codelineno-44-2" name="__codelineno-44-2" href="#__codelineno-44-2"></a>└── main
<a id="__codelineno-44-3" name="__codelineno-44-3" href="#__codelineno-44-3"></a>    ├── __init__.py
<a id="__codelineno-44-4" name="__codelineno-44-4" href="#__codelineno-44-4"></a>    ├── module.py
<a id="__codelineno-44-5" name="__codelineno-44-5" href="#__codelineno-44-5"></a>    └── test.py
</code></pre></div>
<p><code>test.py</code>文件:</p>
<div class="highlight"><pre><span></span><code><a id="__codelineno-45-1" name="__codelineno-45-1" href="#__codelineno-45-1"></a><span class="kn">import</span> <span class="nn">module</span>
</code></pre></div>
<p><code>module.py</code>文件:</p>
<div class="highlight"><pre><span></span><code><a id="__codelineno-46-1" name="__codelineno-46-1" href="#__codelineno-46-1"></a><span class="nb">print</span><span class="p">(</span><span class="n">__package__</span><span class="p">)</span>
</code></pre></div>
<p>执行: </p>
<div class="highlight"><pre><span></span><code><a id="__codelineno-47-1" name="__codelineno-47-1" href="#__codelineno-47-1"></a>$ python test.py
<a id="__codelineno-47-2" name="__codelineno-47-2" href="#__codelineno-47-2"></a>&#39;&#39;
</code></pre></div>
</div>
<div class="tabbed-block">
<p>目录结构:</p>
<div class="highlight"><pre><span></span><code><a id="__codelineno-48-1" name="__codelineno-48-1" href="#__codelineno-48-1"></a>.
<a id="__codelineno-48-2" name="__codelineno-48-2" href="#__codelineno-48-2"></a>└── main
<a id="__codelineno-48-3" name="__codelineno-48-3" href="#__codelineno-48-3"></a>    ├── __init__.py
<a id="__codelineno-48-4" name="__codelineno-48-4" href="#__codelineno-48-4"></a>    └── module.py
</code></pre></div>
<p><code>module.py</code>文件:</p>
<div class="highlight"><pre><span></span><code><a id="__codelineno-49-1" name="__codelineno-49-1" href="#__codelineno-49-1"></a><span class="nb">print</span><span class="p">(</span><span class="n">__package__</span><span class="p">)</span>
</code></pre></div>
<p>执行: </p>
<div class="highlight"><pre><span></span><code><a id="__codelineno-50-1" name="__codelineno-50-1" href="#__codelineno-50-1"></a>$ python module.py
<a id="__codelineno-50-2" name="__codelineno-50-2" href="#__codelineno-50-2"></a>None
</code></pre></div>
</div>
</div>
</div>
</details>
<h3 id="__package__"><code>__package__</code>属性和相对导入</h3>
<p>当遇到相对导入的时候, 当前模块会将自己的<code>__package__</code>做为基础, 在这个之上对路径做拼接或者删除, 从而找到对应的模块.</p>
<details class="example" open="open">
<summary>例子</summary>
<div class="tabbed-set tabbed-alternate" data-tabs="5:2"><input checked="checked" id="__tabbed_5_1" name="__tabbed_5" type="radio" /><input id="__tabbed_5_2" name="__tabbed_5" type="radio" /><div class="tabbed-labels"><label for="__tabbed_5_1">例子1</label><label for="__tabbed_5_2">例子2</label></div>
<div class="tabbed-content">
<div class="tabbed-block">
<p>目录结构:</p>
<div class="highlight"><pre><span></span><code><a id="__codelineno-51-1" name="__codelineno-51-1" href="#__codelineno-51-1"></a>.
<a id="__codelineno-51-2" name="__codelineno-51-2" href="#__codelineno-51-2"></a>├── main
<a id="__codelineno-51-3" name="__codelineno-51-3" href="#__codelineno-51-3"></a>│   ├── __init__.py
<a id="__codelineno-51-4" name="__codelineno-51-4" href="#__codelineno-51-4"></a>│   ├── module.py
<a id="__codelineno-51-5" name="__codelineno-51-5" href="#__codelineno-51-5"></a>│   └── test
<a id="__codelineno-51-6" name="__codelineno-51-6" href="#__codelineno-51-6"></a>│       ├── __init__.py
<a id="__codelineno-51-7" name="__codelineno-51-7" href="#__codelineno-51-7"></a>│       └── module1.py
<a id="__codelineno-51-8" name="__codelineno-51-8" href="#__codelineno-51-8"></a>└── out.py
</code></pre></div>
<p><code>module.py</code>文件: </p>
<div class="highlight"><pre><span></span><code><a id="__codelineno-52-1" name="__codelineno-52-1" href="#__codelineno-52-1"></a><span class="kn">from</span> <span class="nn">.test</span> <span class="kn">import</span> <span class="n">module1</span>
<a id="__codelineno-52-2" name="__codelineno-52-2" href="#__codelineno-52-2"></a>
<a id="__codelineno-52-3" name="__codelineno-52-3" href="#__codelineno-52-3"></a><span class="nb">print</span><span class="p">(</span><span class="n">__package__</span><span class="p">)</span>
<a id="__codelineno-52-4" name="__codelineno-52-4" href="#__codelineno-52-4"></a><span class="n">module1</span><span class="o">.</span><span class="n">hello</span><span class="p">()</span>
</code></pre></div>
<p><code>module1.py</code>文件:</p>
<div class="highlight"><pre><span></span><code><a id="__codelineno-53-1" name="__codelineno-53-1" href="#__codelineno-53-1"></a><span class="k">def</span> <span class="nf">hello</span><span class="p">():</span>
<a id="__codelineno-53-2" name="__codelineno-53-2" href="#__codelineno-53-2"></a>    <span class="nb">print</span><span class="p">(</span><span class="s1">&#39;Hello from module1.py&#39;</span><span class="p">)</span>
</code></pre></div>
<p><code>out.py</code>文件:</p>
<div class="highlight"><pre><span></span><code><a id="__codelineno-54-1" name="__codelineno-54-1" href="#__codelineno-54-1"></a><span class="kn">import</span> <span class="nn">main.module</span>
</code></pre></div>
<p>执行: </p>
<div class="highlight"><pre><span></span><code><a id="__codelineno-55-1" name="__codelineno-55-1" href="#__codelineno-55-1"></a>$ python out.py
<a id="__codelineno-55-2" name="__codelineno-55-2" href="#__codelineno-55-2"></a>main
<a id="__codelineno-55-3" name="__codelineno-55-3" href="#__codelineno-55-3"></a>Hello from module1.py
</code></pre></div>
<p>解释: <code>module.py</code>文件被作为<code>main</code>包的一部分导入, 所以<code>module.py</code>模块内的<code>__package__</code>是<code>main</code>. 里面的相对导入在这个基础上做拼接: <code>main/test</code>, 最终找到了<code>module1.py</code>.</p>
</div>
<div class="tabbed-block">
<p>目录结构:</p>
<div class="highlight"><pre><span></span><code><a id="__codelineno-56-1" name="__codelineno-56-1" href="#__codelineno-56-1"></a>.
<a id="__codelineno-56-2" name="__codelineno-56-2" href="#__codelineno-56-2"></a>└── main
<a id="__codelineno-56-3" name="__codelineno-56-3" href="#__codelineno-56-3"></a>    ├── __init__.py
<a id="__codelineno-56-4" name="__codelineno-56-4" href="#__codelineno-56-4"></a>    ├── module.py
<a id="__codelineno-56-5" name="__codelineno-56-5" href="#__codelineno-56-5"></a>    └── test
<a id="__codelineno-56-6" name="__codelineno-56-6" href="#__codelineno-56-6"></a>        ├── __init__.py
<a id="__codelineno-56-7" name="__codelineno-56-7" href="#__codelineno-56-7"></a>        └── module1.py
</code></pre></div>
<p><code>module.py</code>文件: </p>
<div class="highlight"><pre><span></span><code><a id="__codelineno-57-1" name="__codelineno-57-1" href="#__codelineno-57-1"></a><span class="kn">from</span> <span class="nn">.test</span> <span class="kn">import</span> <span class="n">module1</span>
<a id="__codelineno-57-2" name="__codelineno-57-2" href="#__codelineno-57-2"></a>
<a id="__codelineno-57-3" name="__codelineno-57-3" href="#__codelineno-57-3"></a><span class="n">module1</span><span class="o">.</span><span class="n">hello</span><span class="p">()</span>
</code></pre></div>
<p><code>module1.py</code>文件:</p>
<div class="highlight"><pre><span></span><code><a id="__codelineno-58-1" name="__codelineno-58-1" href="#__codelineno-58-1"></a><span class="k">def</span> <span class="nf">hello</span><span class="p">():</span>
<a id="__codelineno-58-2" name="__codelineno-58-2" href="#__codelineno-58-2"></a>    <span class="nb">print</span><span class="p">(</span><span class="s1">&#39;Hello from module1.py&#39;</span><span class="p">)</span>
</code></pre></div>
<p>执行: </p>
<div class="highlight"><pre><span></span><code><a id="__codelineno-59-1" name="__codelineno-59-1" href="#__codelineno-59-1"></a>$ python module.py
<a id="__codelineno-59-2" name="__codelineno-59-2" href="#__codelineno-59-2"></a>Traceback (most recent call last):
<a id="__codelineno-59-3" name="__codelineno-59-3" href="#__codelineno-59-3"></a>    File &quot;/home/wenzexu/test/main/module.py&quot;, line 1, in &lt;module&gt;
<a id="__codelineno-59-4" name="__codelineno-59-4" href="#__codelineno-59-4"></a>        from .test import module1
<a id="__codelineno-59-5" name="__codelineno-59-5" href="#__codelineno-59-5"></a>ImportError: attempted relative import with no known parent package
</code></pre></div>
<p>出错的原因是: <code>module.py</code>由于是直接执行的, 所以其<code>__package__</code>为<code>None</code>, 所以解释器无法在<code>None</code>上做拼接, 所以无法找到对应模块.</p>
</div>
</div>
</div>
</details>
<h2 id="__init__py"><code>__init__.py</code>文件</h2>
<p><code>__init__.py</code>文件是一个特殊的文件, 主要用于标识某个目录是一个Python包, 它的主要作用不仅仅只是标识包, 还有很多功能, 下面会一一说明.</p>
<h3 id="init.py是一个模块"><code>__init__.py</code>是一个模块</h3>
<details class="danger" open="open">
<summary>特别注意</summary>
<ul>
<li>包其实就是模块</li>
<li>导入包, 就是导入它的<code>__init__.py</code>模块.</li>
<li>第一次导入包的时候, 其<code>__init__.py</code>中的所有代码都会被执行.</li>
<li><code>import</code>语句或者<code>from ... import ...</code>中出现的包的<code>__init__.py</code>模块在第一次导入的时候都会被执行</li>
<li>所有被导入的模块都会被放在<code>sys.modules</code>中, 重复导入这些模块不会被执行, 包括<code>__init__.py</code>, 因为缓存机制</li>
</ul>
</details>
<details class="warning" open="open">
<summary>注意</summary>
<p>包中的<code>__init__.py</code>本身就是一个模块, 在直接导入包的时候, 如<code>import [package]</code>的时候, 这个<code>__init__.py</code>的模块会被默认导入, 我们导入之后可以查看<code>sys.modules</code>, 发现其实<code>__init__.py</code>这个就是一个被导入的模块.</p>
<details class="example" open="open">
<summary>例子</summary>
<p>目录结构:</p>
<div class="highlight"><pre><span></span><code><a id="__codelineno-60-1" name="__codelineno-60-1" href="#__codelineno-60-1"></a> .
<a id="__codelineno-60-2" name="__codelineno-60-2" href="#__codelineno-60-2"></a>└── main
<a id="__codelineno-60-3" name="__codelineno-60-3" href="#__codelineno-60-3"></a>    ├── __init__.py
<a id="__codelineno-60-4" name="__codelineno-60-4" href="#__codelineno-60-4"></a>    ├── test1
<a id="__codelineno-60-5" name="__codelineno-60-5" href="#__codelineno-60-5"></a>    │   ├── __init__.py
<a id="__codelineno-60-6" name="__codelineno-60-6" href="#__codelineno-60-6"></a>    │   └── module1.py
<a id="__codelineno-60-7" name="__codelineno-60-7" href="#__codelineno-60-7"></a>    └── test2
<a id="__codelineno-60-8" name="__codelineno-60-8" href="#__codelineno-60-8"></a>        ├── __init__.py
<a id="__codelineno-60-9" name="__codelineno-60-9" href="#__codelineno-60-9"></a>        └── module2.py
</code></pre></div>
<p><code>main/__init__.py</code>文件:</p>
<div class="highlight"><pre><span></span><code><a id="__codelineno-61-1" name="__codelineno-61-1" href="#__codelineno-61-1"></a><span class="kn">import</span> <span class="nn">sys</span>
<a id="__codelineno-61-2" name="__codelineno-61-2" href="#__codelineno-61-2"></a>
<a id="__codelineno-61-3" name="__codelineno-61-3" href="#__codelineno-61-3"></a><span class="nb">print</span><span class="p">(</span><span class="s1">&#39;parent package was called&#39;</span><span class="p">)</span>
<a id="__codelineno-61-4" name="__codelineno-61-4" href="#__codelineno-61-4"></a><span class="nb">print</span><span class="p">(</span><span class="n">sys</span><span class="o">.</span><span class="n">modules</span><span class="p">)</span>
</code></pre></div>
<p>在<code>main</code>的上级文件夹执行: </p>
<div class="highlight"><pre><span></span><code><a id="__codelineno-62-1" name="__codelineno-62-1" href="#__codelineno-62-1"></a>&gt;&gt;&gt; import main
<a id="__codelineno-62-2" name="__codelineno-62-2" href="#__codelineno-62-2"></a>parent package was called
<a id="__codelineno-62-3" name="__codelineno-62-3" href="#__codelineno-62-3"></a>{[省略]&#39;main&#39;: &lt;module &#39;main&#39; from &#39;/home/wenzexu/test/main/__init__.py&#39;&gt;}
<a id="__codelineno-62-4" name="__codelineno-62-4" href="#__codelineno-62-4"></a>&gt;&gt;&gt; import main
<a id="__codelineno-62-5" name="__codelineno-62-5" href="#__codelineno-62-5"></a>&gt;&gt;&gt;
</code></pre></div>
</details>
</details>
<h3 id="_10">初始化包</h3>
<p>当包第一次被导入的时候, 相当于导入的是<code>__init__.py</code>模块, <code>__init__.py</code>文件中的代码会被立即执行, 可以在此文件中初始化包, 设置一些包级别的变量或者执行包级别的初始化操作.</p>
<details class="example" open="open">
<summary>例子</summary>
<p>目录结构:</p>
<div class="highlight"><pre><span></span><code><a id="__codelineno-63-1" name="__codelineno-63-1" href="#__codelineno-63-1"></a>.
<a id="__codelineno-63-2" name="__codelineno-63-2" href="#__codelineno-63-2"></a>└── main
<a id="__codelineno-63-3" name="__codelineno-63-3" href="#__codelineno-63-3"></a>    ├── __init__.py
<a id="__codelineno-63-4" name="__codelineno-63-4" href="#__codelineno-63-4"></a>    ├── test1
<a id="__codelineno-63-5" name="__codelineno-63-5" href="#__codelineno-63-5"></a>    │   ├── __init__.py
<a id="__codelineno-63-6" name="__codelineno-63-6" href="#__codelineno-63-6"></a>    │   └── module1.py
<a id="__codelineno-63-7" name="__codelineno-63-7" href="#__codelineno-63-7"></a>    └── test2
<a id="__codelineno-63-8" name="__codelineno-63-8" href="#__codelineno-63-8"></a>        ├── __init__.py
<a id="__codelineno-63-9" name="__codelineno-63-9" href="#__codelineno-63-9"></a>        └── module2.py
</code></pre></div>
<p><code>main/__init__.py</code>文件:</p>
<div class="highlight"><pre><span></span><code><a id="__codelineno-64-1" name="__codelineno-64-1" href="#__codelineno-64-1"></a><span class="nb">print</span><span class="p">(</span><span class="s1">&#39;parent package was called&#39;</span><span class="p">)</span>
</code></pre></div>
<p>在<code>main</code>的上级文件夹执行: </p>
<div class="highlight"><pre><span></span><code><a id="__codelineno-65-1" name="__codelineno-65-1" href="#__codelineno-65-1"></a>&gt;&gt;&gt; import main
<a id="__codelineno-65-2" name="__codelineno-65-2" href="#__codelineno-65-2"></a>parent package was called
<a id="__codelineno-65-3" name="__codelineno-65-3" href="#__codelineno-65-3"></a>&gt;&gt;&gt; import main
<a id="__codelineno-65-4" name="__codelineno-65-4" href="#__codelineno-65-4"></a>&gt;&gt;&gt;
</code></pre></div>
<details class="tip" open="open">
<summary>Tip</summary>
<p>第一次导入后, 导入的<code>__init__.py</code>模块会被放在<code>sys.modules</code>中, 随后如果再导入, <code>__init__.py</code>文件将不会再执行. </p>
</details>
</details>
<h3 id="_11">递归包结构</h3>
<p>在包含子包的复杂包结构中, 每个子包目录中也需要包含一个<code>__init__.py</code>文件.</p>
<details class="example" open="open">
<summary>例子</summary>
<p>目录结构:</p>
<div class="highlight"><pre><span></span><code><a id="__codelineno-66-1" name="__codelineno-66-1" href="#__codelineno-66-1"></a>.
<a id="__codelineno-66-2" name="__codelineno-66-2" href="#__codelineno-66-2"></a>└── main
<a id="__codelineno-66-3" name="__codelineno-66-3" href="#__codelineno-66-3"></a>    ├── __init__.py
<a id="__codelineno-66-4" name="__codelineno-66-4" href="#__codelineno-66-4"></a>    ├── test1
<a id="__codelineno-66-5" name="__codelineno-66-5" href="#__codelineno-66-5"></a>    │   ├── __init__.py
<a id="__codelineno-66-6" name="__codelineno-66-6" href="#__codelineno-66-6"></a>    │   └── module1.py
<a id="__codelineno-66-7" name="__codelineno-66-7" href="#__codelineno-66-7"></a>    └── test2
<a id="__codelineno-66-8" name="__codelineno-66-8" href="#__codelineno-66-8"></a>        ├── __init__.py
<a id="__codelineno-66-9" name="__codelineno-66-9" href="#__codelineno-66-9"></a>        └── module2.py
</code></pre></div>
<p><code>main/__init__.py</code>文件:</p>
<div class="highlight"><pre><span></span><code><a id="__codelineno-67-1" name="__codelineno-67-1" href="#__codelineno-67-1"></a><span class="nb">print</span><span class="p">(</span><span class="s1">&#39;parent package was called&#39;</span><span class="p">)</span>
</code></pre></div>
<p><code>main/test1/__init__.py</code>文件:</p>
<div class="highlight"><pre><span></span><code><a id="__codelineno-68-1" name="__codelineno-68-1" href="#__codelineno-68-1"></a><span class="nb">print</span><span class="p">(</span><span class="s1">&#39;test1 was called&#39;</span><span class="p">)</span>
</code></pre></div>
<p>在<code>main</code>的上级文件夹执行: </p>
<div class="highlight"><pre><span></span><code><a id="__codelineno-69-1" name="__codelineno-69-1" href="#__codelineno-69-1"></a>&gt;&gt;&gt; import main.test1
<a id="__codelineno-69-2" name="__codelineno-69-2" href="#__codelineno-69-2"></a>parent package was called
<a id="__codelineno-69-3" name="__codelineno-69-3" href="#__codelineno-69-3"></a>test1 was called
<a id="__codelineno-69-4" name="__codelineno-69-4" href="#__codelineno-69-4"></a>&gt;&gt;&gt; import main.test1
<a id="__codelineno-69-5" name="__codelineno-69-5" href="#__codelineno-69-5"></a>&gt;&gt;&gt;
</code></pre></div>
</details>
<h3 id="_12">控制包的导入行为</h3>
<p>通过在<code>__init__.py</code>中定义<code>__all__</code>变量, 可以控制<code>from [package] import *</code>语句的导入行为.</p>
<details class="example" open="open">
<summary>例子</summary>
<div class="tabbed-set tabbed-alternate" data-tabs="6:2"><input checked="checked" id="__tabbed_6_1" name="__tabbed_6" type="radio" /><input id="__tabbed_6_2" name="__tabbed_6" type="radio" /><div class="tabbed-labels"><label for="__tabbed_6_1">例子1</label><label for="__tabbed_6_2">例子2</label></div>
<div class="tabbed-content">
<div class="tabbed-block">
<p>目录结构:</p>
<div class="highlight"><pre><span></span><code><a id="__codelineno-70-1" name="__codelineno-70-1" href="#__codelineno-70-1"></a>.
<a id="__codelineno-70-2" name="__codelineno-70-2" href="#__codelineno-70-2"></a>└── main
<a id="__codelineno-70-3" name="__codelineno-70-3" href="#__codelineno-70-3"></a>    ├── __init__.py
<a id="__codelineno-70-4" name="__codelineno-70-4" href="#__codelineno-70-4"></a>    ├── test1
<a id="__codelineno-70-5" name="__codelineno-70-5" href="#__codelineno-70-5"></a>    │   ├── __init__.py
<a id="__codelineno-70-6" name="__codelineno-70-6" href="#__codelineno-70-6"></a>    │   └── module1.py
<a id="__codelineno-70-7" name="__codelineno-70-7" href="#__codelineno-70-7"></a>    └── test2
<a id="__codelineno-70-8" name="__codelineno-70-8" href="#__codelineno-70-8"></a>        ├── __init__.py
<a id="__codelineno-70-9" name="__codelineno-70-9" href="#__codelineno-70-9"></a>        └── module2.py
</code></pre></div>
<p><code>main/__init__.py</code>文件:</p>
<div class="highlight"><pre><span></span><code><a id="__codelineno-71-1" name="__codelineno-71-1" href="#__codelineno-71-1"></a><span class="nb">print</span><span class="p">(</span><span class="s1">&#39;parent package was called&#39;</span><span class="p">)</span>
<a id="__codelineno-71-2" name="__codelineno-71-2" href="#__codelineno-71-2"></a><span class="n">__all__</span> <span class="o">=</span> <span class="p">[</span><span class="s1">&#39;test1&#39;</span><span class="p">]</span>
</code></pre></div>
<p><code>main/test1/__init__.py</code>文件:</p>
<div class="highlight"><pre><span></span><code><a id="__codelineno-72-1" name="__codelineno-72-1" href="#__codelineno-72-1"></a><span class="nb">print</span><span class="p">(</span><span class="s1">&#39;test1 was called&#39;</span><span class="p">)</span>
</code></pre></div>
<p><code>main/test1/module1.py</code>文件:</p>
<div class="highlight"><pre><span></span><code><a id="__codelineno-73-1" name="__codelineno-73-1" href="#__codelineno-73-1"></a><span class="nb">print</span><span class="p">(</span><span class="s1">&#39;module1 was called&#39;</span><span class="p">)</span>
</code></pre></div>
<p><code>main/test2/__init__.py</code>文件:</p>
<div class="highlight"><pre><span></span><code><a id="__codelineno-74-1" name="__codelineno-74-1" href="#__codelineno-74-1"></a><span class="nb">print</span><span class="p">(</span><span class="s1">&#39;test2 was called&#39;</span><span class="p">)</span>
</code></pre></div>
<p><code>main/test2/module2.py</code>文件:</p>
<div class="highlight"><pre><span></span><code><a id="__codelineno-75-1" name="__codelineno-75-1" href="#__codelineno-75-1"></a><span class="nb">print</span><span class="p">(</span><span class="s1">&#39;module2 was called&#39;</span><span class="p">)</span>
</code></pre></div>
<p>在<code>main</code>的上级文件夹执行: </p>
<div class="highlight"><pre><span></span><code><a id="__codelineno-76-1" name="__codelineno-76-1" href="#__codelineno-76-1"></a>&gt;&gt;&gt; from main import *
<a id="__codelineno-76-2" name="__codelineno-76-2" href="#__codelineno-76-2"></a>parent package was called
<a id="__codelineno-76-3" name="__codelineno-76-3" href="#__codelineno-76-3"></a>test1 was called
<a id="__codelineno-76-4" name="__codelineno-76-4" href="#__codelineno-76-4"></a>&gt;&gt;&gt; import main
<a id="__codelineno-76-5" name="__codelineno-76-5" href="#__codelineno-76-5"></a>&gt;&gt;&gt;
</code></pre></div>
<p>解释: </p>
<ol>
<li>第一次从<code>main</code>包执行导入<code>from main import *</code></li>
<li><code>main</code>包的<code>__init__.py</code>模块自动执行</li>
<li><code>__all__</code>定义为<code>test1</code>包</li>
<li>第一次从<code>test1</code>包执行导入<code>import test1</code></li>
<li><code>test1</code>包的<code>__init__.py</code>模块自动执行</li>
</ol>
</div>
<div class="tabbed-block">
<p>目录结构:</p>
<div class="highlight"><pre><span></span><code><a id="__codelineno-77-1" name="__codelineno-77-1" href="#__codelineno-77-1"></a>.
<a id="__codelineno-77-2" name="__codelineno-77-2" href="#__codelineno-77-2"></a>└── main
<a id="__codelineno-77-3" name="__codelineno-77-3" href="#__codelineno-77-3"></a>    ├── __init__.py
<a id="__codelineno-77-4" name="__codelineno-77-4" href="#__codelineno-77-4"></a>    ├── test1
<a id="__codelineno-77-5" name="__codelineno-77-5" href="#__codelineno-77-5"></a>    │   ├── __init__.py
<a id="__codelineno-77-6" name="__codelineno-77-6" href="#__codelineno-77-6"></a>    │   └── module1.py
<a id="__codelineno-77-7" name="__codelineno-77-7" href="#__codelineno-77-7"></a>    └── test2
<a id="__codelineno-77-8" name="__codelineno-77-8" href="#__codelineno-77-8"></a>        ├── __init__.py
<a id="__codelineno-77-9" name="__codelineno-77-9" href="#__codelineno-77-9"></a>        └── module2.py
</code></pre></div>
<p><code>main/__init__.py</code>文件:</p>
<div class="highlight"><pre><span></span><code><a id="__codelineno-78-1" name="__codelineno-78-1" href="#__codelineno-78-1"></a><span class="nb">print</span><span class="p">(</span><span class="s1">&#39;parent package was called&#39;</span><span class="p">)</span>
<a id="__codelineno-78-2" name="__codelineno-78-2" href="#__codelineno-78-2"></a><span class="n">__all__</span> <span class="o">=</span> <span class="p">[</span><span class="s1">&#39;test1&#39;</span><span class="p">]</span>
</code></pre></div>
<p><code>main/test1/__init__.py</code>文件:</p>
<div class="highlight"><pre><span></span><code><a id="__codelineno-79-1" name="__codelineno-79-1" href="#__codelineno-79-1"></a><span class="kn">from</span> <span class="nn">.</span> <span class="kn">import</span> <span class="n">module1</span>
<a id="__codelineno-79-2" name="__codelineno-79-2" href="#__codelineno-79-2"></a><span class="nb">print</span><span class="p">(</span><span class="s1">&#39;test1 was called&#39;</span><span class="p">)</span>
</code></pre></div>
<p><code>main/test1/module1.py</code>文件:</p>
<div class="highlight"><pre><span></span><code><a id="__codelineno-80-1" name="__codelineno-80-1" href="#__codelineno-80-1"></a><span class="nb">print</span><span class="p">(</span><span class="s1">&#39;module1 was called&#39;</span><span class="p">)</span>
</code></pre></div>
<p><code>main/test2/__init__.py</code>文件:</p>
<div class="highlight"><pre><span></span><code><a id="__codelineno-81-1" name="__codelineno-81-1" href="#__codelineno-81-1"></a><span class="nb">print</span><span class="p">(</span><span class="s1">&#39;test2 was called&#39;</span><span class="p">)</span>
</code></pre></div>
<p><code>main/test2/module2.py</code>文件:</p>
<div class="highlight"><pre><span></span><code><a id="__codelineno-82-1" name="__codelineno-82-1" href="#__codelineno-82-1"></a><span class="nb">print</span><span class="p">(</span><span class="s1">&#39;module2 was called&#39;</span><span class="p">)</span>
</code></pre></div>
<p>在<code>main</code>的上级文件夹执行: </p>
<div class="highlight"><pre><span></span><code><a id="__codelineno-83-1" name="__codelineno-83-1" href="#__codelineno-83-1"></a>&gt;&gt;&gt; from main import *
<a id="__codelineno-83-2" name="__codelineno-83-2" href="#__codelineno-83-2"></a>parent package was called
<a id="__codelineno-83-3" name="__codelineno-83-3" href="#__codelineno-83-3"></a>module1 was called
<a id="__codelineno-83-4" name="__codelineno-83-4" href="#__codelineno-83-4"></a>test1 was called
<a id="__codelineno-83-5" name="__codelineno-83-5" href="#__codelineno-83-5"></a>&gt;&gt;&gt; import main
<a id="__codelineno-83-6" name="__codelineno-83-6" href="#__codelineno-83-6"></a>&gt;&gt;&gt;
</code></pre></div>
<p>解释: </p>
<ol>
<li>第一次从<code>main</code>包执行导入<code>from main import *</code></li>
<li><code>main</code>包的<code>__init__.py</code>模块自动执行</li>
<li><code>__all__</code>定义为<code>test1</code>包</li>
<li>第一次从<code>test1</code>包执行导入<code>import test1</code></li>
<li><code>test1</code>包的<code>__init__.py</code>模块自动执行</li>
<li>执行<code>test1</code>包的<code>__init__.py</code>时发现要导入<code>module1</code>模块, 执行<code>module1</code>模块</li>
</ol>
</div>
</div>
</div>
</details>
<h2 id="__main__py"><code>__main__.py</code>文件</h2>
<p><code>__main__.py</code>文件的作用是作为一个包的入口点, 使得包可以像脚本一样直接运行. 当使用<code>python -m [package]</code>时, <code>[package]</code>内的<code>__main__.py</code>模块会自动执行.</p>
<h3 id="_13">执行包</h3>
<p>当我们使用<code>python -m [包]</code>运行包的时候, 会先执行包内的<code>__init__.py</code>然后执行<code>__main__.py</code>. </p>
<details class="example" open="open">
<summary>例子</summary>
<p>目录结构:  </p>
<div class="highlight"><pre><span></span><code><a id="__codelineno-84-1" name="__codelineno-84-1" href="#__codelineno-84-1"></a>.
<a id="__codelineno-84-2" name="__codelineno-84-2" href="#__codelineno-84-2"></a>└── pkg
<a id="__codelineno-84-3" name="__codelineno-84-3" href="#__codelineno-84-3"></a>    ├── __init__.py
<a id="__codelineno-84-4" name="__codelineno-84-4" href="#__codelineno-84-4"></a>    └── __main__.py
</code></pre></div>
<p><code>__init__.py</code>文件:</p>
<div class="highlight"><pre><span></span><code><a id="__codelineno-85-1" name="__codelineno-85-1" href="#__codelineno-85-1"></a><span class="kn">import</span> <span class="nn">sys</span>
<a id="__codelineno-85-2" name="__codelineno-85-2" href="#__codelineno-85-2"></a><span class="nb">print</span><span class="p">(</span><span class="s1">&#39;__init__&#39;</span><span class="p">)</span>
<a id="__codelineno-85-3" name="__codelineno-85-3" href="#__codelineno-85-3"></a><span class="nb">print</span><span class="p">(</span><span class="s1">&#39;__init__.__name__&#39;</span><span class="p">,</span> <span class="vm">__name__</span><span class="p">)</span>
<a id="__codelineno-85-4" name="__codelineno-85-4" href="#__codelineno-85-4"></a><span class="nb">print</span><span class="p">(</span><span class="s1">&#39;__init__.__package__&#39;</span><span class="p">,</span> <span class="n">__package__</span><span class="p">)</span>
<a id="__codelineno-85-5" name="__codelineno-85-5" href="#__codelineno-85-5"></a><span class="nb">print</span><span class="p">(</span><span class="s1">&#39;sys.path&#39;</span><span class="p">,</span> <span class="n">sys</span><span class="o">.</span><span class="n">path</span><span class="p">)</span>
<a id="__codelineno-85-6" name="__codelineno-85-6" href="#__codelineno-85-6"></a><span class="k">def</span> <span class="nf">hello</span><span class="p">():</span>
<a id="__codelineno-85-7" name="__codelineno-85-7" href="#__codelineno-85-7"></a>    <span class="nb">print</span><span class="p">(</span><span class="s2">&quot;Hello from pkg/__init__.py&quot;</span><span class="p">)</span>
</code></pre></div>
<p><code>__main__.py</code>文件:</p>
<div class="highlight"><pre><span></span><code><a id="__codelineno-86-1" name="__codelineno-86-1" href="#__codelineno-86-1"></a><span class="kn">import</span> <span class="nn">sys</span>
<a id="__codelineno-86-2" name="__codelineno-86-2" href="#__codelineno-86-2"></a><span class="nb">print</span><span class="p">(</span><span class="s1">&#39;__main__&#39;</span><span class="p">)</span>
<a id="__codelineno-86-3" name="__codelineno-86-3" href="#__codelineno-86-3"></a><span class="nb">print</span><span class="p">(</span><span class="s1">&#39;__main__.__name__&#39;</span><span class="p">,</span> <span class="vm">__name__</span><span class="p">)</span>
<a id="__codelineno-86-4" name="__codelineno-86-4" href="#__codelineno-86-4"></a><span class="nb">print</span><span class="p">(</span><span class="s1">&#39;__main__.__package__&#39;</span><span class="p">,</span> <span class="n">__package__</span><span class="p">)</span>
<a id="__codelineno-86-5" name="__codelineno-86-5" href="#__codelineno-86-5"></a><span class="nb">print</span><span class="p">(</span><span class="s1">&#39;sys.path&#39;</span><span class="p">,</span> <span class="n">sys</span><span class="o">.</span><span class="n">path</span><span class="p">)</span>
<a id="__codelineno-86-6" name="__codelineno-86-6" href="#__codelineno-86-6"></a><span class="kn">import</span> <span class="nn">pkg</span>
<a id="__codelineno-86-7" name="__codelineno-86-7" href="#__codelineno-86-7"></a><span class="n">pkg</span><span class="o">.</span><span class="n">hello</span><span class="p">()</span>
</code></pre></div>
<p>在<code>pkg</code>文件夹外执行: </p>
<div class="highlight"><pre><span></span><code><a id="__codelineno-87-1" name="__codelineno-87-1" href="#__codelineno-87-1"></a>$ python -m pkg 
<a id="__codelineno-87-2" name="__codelineno-87-2" href="#__codelineno-87-2"></a>__init__
<a id="__codelineno-87-3" name="__codelineno-87-3" href="#__codelineno-87-3"></a>__init__.__name__ pkg
<a id="__codelineno-87-4" name="__codelineno-87-4" href="#__codelineno-87-4"></a>__init__.__package__ pkg
<a id="__codelineno-87-5" name="__codelineno-87-5" href="#__codelineno-87-5"></a>sys.path [&#39;/Users/wenzexu/test&#39;, &#39;/Library/Frameworks/Python.framework/Versions/3.12/lib/python312.zip&#39;, &#39;/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12&#39;, &#39;/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/lib-dynload&#39;, &#39;/Users/wenzexu/test/.venv/lib/python3.12/site-packages&#39;]
<a id="__codelineno-87-6" name="__codelineno-87-6" href="#__codelineno-87-6"></a>__main__
<a id="__codelineno-87-7" name="__codelineno-87-7" href="#__codelineno-87-7"></a>__main__.__name__ __main__
<a id="__codelineno-87-8" name="__codelineno-87-8" href="#__codelineno-87-8"></a>__main__.__package__ pkg
<a id="__codelineno-87-9" name="__codelineno-87-9" href="#__codelineno-87-9"></a>sys.path [&#39;/Users/wenzexu/test&#39;, &#39;/Library/Frameworks/Python.framework/Versions/3.12/lib/python312.zip&#39;, &#39;/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12&#39;, &#39;/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/lib-dynload&#39;, &#39;/Users/wenzexu/test/.venv/lib/python3.12/site-packages&#39;]
<a id="__codelineno-87-10" name="__codelineno-87-10" href="#__codelineno-87-10"></a>Hello from pkg/__init__.py
</code></pre></div>
<details class="question" open="open">
<summary>疑问</summary>
<p><code>__main__.py</code>应该是直接被运行的, 所以<code>__name__</code>是<code>__main__</code>. 通常情况下, 脚本直接执行会导致其<code>__package__</code>为<code>None</code>, 详情见<a href="#package属性">这里</a>. 但是这里与直接执行脚本时稍有不同, 这里Python解释器已经知道<code>__main__.py</code>是包的一部分, 并不是一个孤立的脚本, 所以这里的<code>__package__</code>属性会设置为<code>pkg</code>.</p>
</details>
</details>
<h3 id="_14">执行文件夹</h3>
<p>当我们使用<code>python [文件夹]</code>执行文件夹的时候, 只会执行文件夹内的<code>__main__.py</code>文件.</p>
<details class="example" open="open">
<summary>例子</summary>
<p>目录结构:  </p>
<div class="highlight"><pre><span></span><code><a id="__codelineno-88-1" name="__codelineno-88-1" href="#__codelineno-88-1"></a>.
<a id="__codelineno-88-2" name="__codelineno-88-2" href="#__codelineno-88-2"></a>└── pkg
<a id="__codelineno-88-3" name="__codelineno-88-3" href="#__codelineno-88-3"></a>    ├── __init__.py
<a id="__codelineno-88-4" name="__codelineno-88-4" href="#__codelineno-88-4"></a>    └── __main__.py
</code></pre></div>
<p><code>__init__.py</code>文件:</p>
<div class="highlight"><pre><span></span><code><a id="__codelineno-89-1" name="__codelineno-89-1" href="#__codelineno-89-1"></a><span class="kn">import</span> <span class="nn">sys</span>
<a id="__codelineno-89-2" name="__codelineno-89-2" href="#__codelineno-89-2"></a><span class="nb">print</span><span class="p">(</span><span class="s1">&#39;__init__&#39;</span><span class="p">)</span>
<a id="__codelineno-89-3" name="__codelineno-89-3" href="#__codelineno-89-3"></a><span class="nb">print</span><span class="p">(</span><span class="s1">&#39;__init__.__name__&#39;</span><span class="p">,</span> <span class="vm">__name__</span><span class="p">)</span>
<a id="__codelineno-89-4" name="__codelineno-89-4" href="#__codelineno-89-4"></a><span class="nb">print</span><span class="p">(</span><span class="s1">&#39;__init__.__package__&#39;</span><span class="p">,</span> <span class="n">__package__</span><span class="p">)</span>
<a id="__codelineno-89-5" name="__codelineno-89-5" href="#__codelineno-89-5"></a><span class="nb">print</span><span class="p">(</span><span class="s1">&#39;sys.path&#39;</span><span class="p">,</span> <span class="n">sys</span><span class="o">.</span><span class="n">path</span><span class="p">)</span>
<a id="__codelineno-89-6" name="__codelineno-89-6" href="#__codelineno-89-6"></a><span class="k">def</span> <span class="nf">hello</span><span class="p">():</span>
<a id="__codelineno-89-7" name="__codelineno-89-7" href="#__codelineno-89-7"></a>    <span class="nb">print</span><span class="p">(</span><span class="s2">&quot;Hello from pkg/__init__.py&quot;</span><span class="p">)</span>
</code></pre></div>
<p><code>__main__.py</code>文件:</p>
<div class="highlight"><pre><span></span><code><a id="__codelineno-90-1" name="__codelineno-90-1" href="#__codelineno-90-1"></a><span class="kn">import</span> <span class="nn">sys</span>
<a id="__codelineno-90-2" name="__codelineno-90-2" href="#__codelineno-90-2"></a><span class="nb">print</span><span class="p">(</span><span class="s1">&#39;__main__&#39;</span><span class="p">)</span>
<a id="__codelineno-90-3" name="__codelineno-90-3" href="#__codelineno-90-3"></a><span class="nb">print</span><span class="p">(</span><span class="s1">&#39;__main__.__name__&#39;</span><span class="p">,</span> <span class="vm">__name__</span><span class="p">)</span>
<a id="__codelineno-90-4" name="__codelineno-90-4" href="#__codelineno-90-4"></a><span class="nb">print</span><span class="p">(</span><span class="s1">&#39;__main__.__package__&#39;</span><span class="p">,</span> <span class="n">__package__</span><span class="p">)</span>
<a id="__codelineno-90-5" name="__codelineno-90-5" href="#__codelineno-90-5"></a><span class="nb">print</span><span class="p">(</span><span class="s1">&#39;sys.path&#39;</span><span class="p">,</span> <span class="n">sys</span><span class="o">.</span><span class="n">path</span><span class="p">)</span>
<a id="__codelineno-90-6" name="__codelineno-90-6" href="#__codelineno-90-6"></a><span class="kn">import</span> <span class="nn">pkg</span>
<a id="__codelineno-90-7" name="__codelineno-90-7" href="#__codelineno-90-7"></a><span class="n">pkg</span><span class="o">.</span><span class="n">hello</span><span class="p">()</span>
</code></pre></div>
<p>在<code>pkg</code>文件夹外执行: </p>
<div class="highlight"><pre><span></span><code><a id="__codelineno-91-1" name="__codelineno-91-1" href="#__codelineno-91-1"></a>$ python pkg 
<a id="__codelineno-91-2" name="__codelineno-91-2" href="#__codelineno-91-2"></a>__main__
<a id="__codelineno-91-3" name="__codelineno-91-3" href="#__codelineno-91-3"></a>__main__.__name__ __main__
<a id="__codelineno-91-4" name="__codelineno-91-4" href="#__codelineno-91-4"></a>__main__.__package__ 
<a id="__codelineno-91-5" name="__codelineno-91-5" href="#__codelineno-91-5"></a>sys.path [&#39;/Users/wenzexu/test/pkg&#39;, &#39;/Library/Frameworks/Python.framework/Versions/3.12/lib/python312.zip&#39;, &#39;/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12&#39;, &#39;/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/lib-dynload&#39;, &#39;/Users/wenzexu/test/.venv/lib/python3.12/site-packages&#39;]
<a id="__codelineno-91-6" name="__codelineno-91-6" href="#__codelineno-91-6"></a>Traceback (most recent call last):
<a id="__codelineno-91-7" name="__codelineno-91-7" href="#__codelineno-91-7"></a>File &quot;&lt;frozen runpy&gt;&quot;, line 198, in _run_module_as_main
<a id="__codelineno-91-8" name="__codelineno-91-8" href="#__codelineno-91-8"></a>File &quot;&lt;frozen runpy&gt;&quot;, line 88, in _run_code
<a id="__codelineno-91-9" name="__codelineno-91-9" href="#__codelineno-91-9"></a>File &quot;/Users/wenzexu/test/pkg/__main__.py&quot;, line 6, in &lt;module&gt;
<a id="__codelineno-91-10" name="__codelineno-91-10" href="#__codelineno-91-10"></a>    import pkg
<a id="__codelineno-91-11" name="__codelineno-91-11" href="#__codelineno-91-11"></a>ModuleNotFoundError: No module named &#39;pkg&#39;
</code></pre></div>
<p>由于没有加载<code>pkg</code>包, 所以<code>sys.path</code>中没有这个包的路径, 所以<code>import pkg</code>导入失败, 所以, 只要在<code>__main__.py</code>文件中手动将这个包的路径加入到<code>sys.path</code>中就好了.</p>
<p>修改后的<code>__main__.py</code>: </p>
<div class="highlight"><pre><span></span><code><a id="__codelineno-92-1" name="__codelineno-92-1" href="#__codelineno-92-1"></a><span class="kn">import</span> <span class="nn">os</span><span class="o">,</span> <span class="nn">sys</span>
<a id="__codelineno-92-2" name="__codelineno-92-2" href="#__codelineno-92-2"></a><span class="nb">print</span><span class="p">(</span><span class="s1">&#39;__main__&#39;</span><span class="p">)</span>
<a id="__codelineno-92-3" name="__codelineno-92-3" href="#__codelineno-92-3"></a><span class="nb">print</span><span class="p">(</span><span class="s1">&#39;__main__.__name__&#39;</span><span class="p">,</span> <span class="vm">__name__</span><span class="p">)</span>
<a id="__codelineno-92-4" name="__codelineno-92-4" href="#__codelineno-92-4"></a><span class="nb">print</span><span class="p">(</span><span class="s1">&#39;__main__.__package__&#39;</span><span class="p">,</span> <span class="n">__package__</span><span class="p">)</span>
<a id="__codelineno-92-5" name="__codelineno-92-5" href="#__codelineno-92-5"></a><span class="k">if</span> <span class="ow">not</span> <span class="n">__package__</span><span class="p">:</span>
<a id="__codelineno-92-6" name="__codelineno-92-6" href="#__codelineno-92-6"></a>    <span class="n">path</span> <span class="o">=</span> <span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">dirname</span><span class="p">(</span><span class="vm">__file__</span><span class="p">),</span> <span class="n">os</span><span class="o">.</span><span class="n">pardir</span><span class="p">)</span>
<a id="__codelineno-92-7" name="__codelineno-92-7" href="#__codelineno-92-7"></a>    <span class="n">sys</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">insert</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="n">path</span><span class="p">)</span>
<a id="__codelineno-92-8" name="__codelineno-92-8" href="#__codelineno-92-8"></a><span class="nb">print</span><span class="p">(</span><span class="s1">&#39;sys.path&#39;</span><span class="p">,</span> <span class="n">sys</span><span class="o">.</span><span class="n">path</span><span class="p">)</span>
<a id="__codelineno-92-9" name="__codelineno-92-9" href="#__codelineno-92-9"></a><span class="kn">import</span> <span class="nn">pkg</span>
<a id="__codelineno-92-10" name="__codelineno-92-10" href="#__codelineno-92-10"></a><span class="n">pkg</span><span class="o">.</span><span class="n">hello</span><span class="p">()</span> 
</code></pre></div>
<p>在<code>pkg</code>文件夹外执行: </p>
<div class="highlight"><pre><span></span><code><a id="__codelineno-93-1" name="__codelineno-93-1" href="#__codelineno-93-1"></a>$ python pkg
<a id="__codelineno-93-2" name="__codelineno-93-2" href="#__codelineno-93-2"></a>__main__
<a id="__codelineno-93-3" name="__codelineno-93-3" href="#__codelineno-93-3"></a>__main__.__name__ __main__
<a id="__codelineno-93-4" name="__codelineno-93-4" href="#__codelineno-93-4"></a>__main__.__package__ 
<a id="__codelineno-93-5" name="__codelineno-93-5" href="#__codelineno-93-5"></a>sys.path [&#39;/Users/wenzexu/test/pkg/..&#39;, &#39;/Users/wenzexu/test/pkg&#39;, &#39;/Library/Frameworks/Python.framework/Versions/3.12/lib/python312.zip&#39;, &#39;/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12&#39;, &#39;/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/lib-dynload&#39;, &#39;/Users/wenzexu/test/.venv/lib/python3.12/site-packages&#39;]
<a id="__codelineno-93-6" name="__codelineno-93-6" href="#__codelineno-93-6"></a>__init__
<a id="__codelineno-93-7" name="__codelineno-93-7" href="#__codelineno-93-7"></a>__init__.__name__ pkg
<a id="__codelineno-93-8" name="__codelineno-93-8" href="#__codelineno-93-8"></a>__init__.__package__ pkg
<a id="__codelineno-93-9" name="__codelineno-93-9" href="#__codelineno-93-9"></a>sys.path [&#39;/Users/wenzexu/test/pkg/..&#39;, &#39;/Users/wenzexu/test/pkg&#39;, &#39;/Library/Frameworks/Python.framework/Versions/3.12/lib/python312.zip&#39;, &#39;/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12&#39;, &#39;/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/lib-dynload&#39;, &#39;/Users/wenzexu/test/.venv/lib/python3.12/site-packages&#39;]
<a id="__codelineno-93-10" name="__codelineno-93-10" href="#__codelineno-93-10"></a>Hello from pkg/__init__.py
</code></pre></div>
<p>现在就正常了.</p>
</details>
<h2 id="_15">打包</h2>
<p>打包指的是将一个项目打包成可分发的格式, 以便其他用户或者开发者能够轻松安装和使用. 打包主要可以分为以下几类: </p>
<ul>
<li>原分发包: sdist, 包含了项目的源代码, 通常以<code>.tar.gz</code>格式发布, 这种包在安装时需要根据源码进行构建和编译(如过有需要编译的部分, 如C扩展; 如果为纯Python代码, 不需要编译), 常用的工具是setuptools</li>
<li>二进制分发包: bdist, 包含了预编译的二进制文件, 通常以<code>.whl</code>格式发布, 这种包在安装需要根据远吗进行构建, 但是不需要编译(已经包含了预编译的文件, 无论是C扩展还是其他二进制依赖), 常用的工具是setuptools</li>
<li>独立可执行文件: 这种文件将Python代码和解释器以及搜索的依赖打包在一起, 生成一个可以在没有解释器的环境中运行的单独可执行文件, 常用的工具有pyinstaller, cx_Freeze和py2exe</li>
</ul>
<p>此外, 我们可以通过twine将打包好的包上传到<a href="https://pypi.org">PYPI</a>.</p>
<h3 id="setuptools"><code>setuptools</code>打包</h3>
<details class="warning" open="open">
<summary>注意</summary>
<p>需要先安装<code>setuptools</code>: <code>pip install setuptools</code>.</p>
</details>
<details class="example">
<summary>例子</summary>
<p>项目结构:</p>
<div class="highlight"><pre><span></span><code><a id="__codelineno-94-1" name="__codelineno-94-1" href="#__codelineno-94-1"></a>.
<a id="__codelineno-94-2" name="__codelineno-94-2" href="#__codelineno-94-2"></a>├── LICENSE
<a id="__codelineno-94-3" name="__codelineno-94-3" href="#__codelineno-94-3"></a>├── MANIFEST.in
<a id="__codelineno-94-4" name="__codelineno-94-4" href="#__codelineno-94-4"></a>├── README.md
<a id="__codelineno-94-5" name="__codelineno-94-5" href="#__codelineno-94-5"></a>├── mypackage
<a id="__codelineno-94-6" name="__codelineno-94-6" href="#__codelineno-94-6"></a>│   ├── __init__.py
<a id="__codelineno-94-7" name="__codelineno-94-7" href="#__codelineno-94-7"></a>│   ├── __version__.py
<a id="__codelineno-94-8" name="__codelineno-94-8" href="#__codelineno-94-8"></a>│   └── core.py
<a id="__codelineno-94-9" name="__codelineno-94-9" href="#__codelineno-94-9"></a>└── setup.py
</code></pre></div>
<p><code>MANIFEST.in</code>文件: </p>
<div class="highlight"><pre><span></span><code><a id="__codelineno-95-1" name="__codelineno-95-1" href="#__codelineno-95-1"></a>include README.md LICENSE
</code></pre></div>
<p><code>__init__.py</code>文件:</p>
<div class="highlight"><pre><span></span><code><a id="__codelineno-96-1" name="__codelineno-96-1" href="#__codelineno-96-1"></a><span class="kn">from</span> <span class="nn">.core</span> <span class="kn">import</span> <span class="o">*</span>
</code></pre></div>
<p><code>__version__.py</code>文件:</p>
<div class="highlight"><pre><span></span><code><a id="__codelineno-97-1" name="__codelineno-97-1" href="#__codelineno-97-1"></a><span class="c1"># 8b    d8 Yb  dP 88&quot;&quot;Yb    db     dP&quot;&quot;b8 88  dP    db     dP&quot;&quot;b8 888888</span>
<a id="__codelineno-97-2" name="__codelineno-97-2" href="#__codelineno-97-2"></a><span class="c1"># 88b  d88  YbdP  88__dP   dPYb   dP   `&quot; 88odP    dPYb   dP   `&quot; 88__</span>
<a id="__codelineno-97-3" name="__codelineno-97-3" href="#__codelineno-97-3"></a><span class="c1"># 88YbdP88   8P   88&quot;&quot;&quot;   dP__Yb  Yb      88&quot;Yb   dP__Yb  Yb  &quot;88 88&quot;&quot;</span>
<a id="__codelineno-97-4" name="__codelineno-97-4" href="#__codelineno-97-4"></a><span class="c1"># 88 YY 88  dP    88     dP&quot;&quot;&quot;&quot;Yb  YboodP 88  Yb dP&quot;&quot;&quot;&quot;Yb  YboodP 888888</span>
<a id="__codelineno-97-5" name="__codelineno-97-5" href="#__codelineno-97-5"></a>
<a id="__codelineno-97-6" name="__codelineno-97-6" href="#__codelineno-97-6"></a><span class="n">VERSION</span> <span class="o">=</span> <span class="p">(</span><span class="mi">5</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="mi">0</span><span class="p">)</span>
<a id="__codelineno-97-7" name="__codelineno-97-7" href="#__codelineno-97-7"></a>
<a id="__codelineno-97-8" name="__codelineno-97-8" href="#__codelineno-97-8"></a><span class="n">__version__</span> <span class="o">=</span> <span class="s1">&#39;.&#39;</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="nb">map</span><span class="p">(</span><span class="nb">str</span><span class="p">,</span> <span class="n">VERSION</span><span class="p">))</span>
</code></pre></div>
<p><code>core.py</code>文件:</p>
<div class="highlight"><pre><span></span><code><a id="__codelineno-98-1" name="__codelineno-98-1" href="#__codelineno-98-1"></a><span class="c1"># Insert your code here.</span>
</code></pre></div>
<p><code>setup.py</code>文件:</p>
<div class="highlight"><pre><span></span><code><a id="__codelineno-99-1" name="__codelineno-99-1" href="#__codelineno-99-1"></a><span class="ch">#!/usr/bin/env python</span>
<a id="__codelineno-99-2" name="__codelineno-99-2" href="#__codelineno-99-2"></a><span class="c1"># -*- coding: utf-8 -*-</span>
<a id="__codelineno-99-3" name="__codelineno-99-3" href="#__codelineno-99-3"></a>
<a id="__codelineno-99-4" name="__codelineno-99-4" href="#__codelineno-99-4"></a><span class="c1"># Note: To use the &#39;upload&#39; functionality of this file, you must:</span>
<a id="__codelineno-99-5" name="__codelineno-99-5" href="#__codelineno-99-5"></a><span class="c1">#   $ pipenv install twine --dev</span>
<a id="__codelineno-99-6" name="__codelineno-99-6" href="#__codelineno-99-6"></a>
<a id="__codelineno-99-7" name="__codelineno-99-7" href="#__codelineno-99-7"></a><span class="kn">import</span> <span class="nn">io</span>
<a id="__codelineno-99-8" name="__codelineno-99-8" href="#__codelineno-99-8"></a><span class="kn">import</span> <span class="nn">os</span>
<a id="__codelineno-99-9" name="__codelineno-99-9" href="#__codelineno-99-9"></a><span class="kn">import</span> <span class="nn">sys</span>
<a id="__codelineno-99-10" name="__codelineno-99-10" href="#__codelineno-99-10"></a><span class="kn">from</span> <span class="nn">shutil</span> <span class="kn">import</span> <span class="n">rmtree</span>
<a id="__codelineno-99-11" name="__codelineno-99-11" href="#__codelineno-99-11"></a>
<a id="__codelineno-99-12" name="__codelineno-99-12" href="#__codelineno-99-12"></a><span class="kn">from</span> <span class="nn">setuptools</span> <span class="kn">import</span> <span class="n">find_packages</span><span class="p">,</span> <span class="n">setup</span>
<a id="__codelineno-99-13" name="__codelineno-99-13" href="#__codelineno-99-13"></a>
<a id="__codelineno-99-14" name="__codelineno-99-14" href="#__codelineno-99-14"></a><span class="c1"># Package meta-data.</span>
<a id="__codelineno-99-15" name="__codelineno-99-15" href="#__codelineno-99-15"></a><span class="n">NAME</span> <span class="o">=</span> <span class="s1">&#39;[name]&#39;</span>
<a id="__codelineno-99-16" name="__codelineno-99-16" href="#__codelineno-99-16"></a><span class="n">DESCRIPTION</span> <span class="o">=</span> <span class="s1">&#39;[desc]&#39;</span>
<a id="__codelineno-99-17" name="__codelineno-99-17" href="#__codelineno-99-17"></a><span class="n">URL</span> <span class="o">=</span> <span class="s1">&#39;https://github.com/ricolxwz/[repo]&#39;</span>
<a id="__codelineno-99-18" name="__codelineno-99-18" href="#__codelineno-99-18"></a><span class="n">EMAIL</span> <span class="o">=</span> <span class="s1">&#39;ricol.xwz@outlook.com&#39;</span>
<a id="__codelineno-99-19" name="__codelineno-99-19" href="#__codelineno-99-19"></a><span class="n">AUTHOR</span> <span class="o">=</span> <span class="s1">&#39;ricolxwz&#39;</span>
<a id="__codelineno-99-20" name="__codelineno-99-20" href="#__codelineno-99-20"></a><span class="n">REQUIRES_PYTHON</span> <span class="o">=</span> <span class="s1">&#39;&gt;=3.6.0&#39;</span>
<a id="__codelineno-99-21" name="__codelineno-99-21" href="#__codelineno-99-21"></a><span class="n">VERSION</span> <span class="o">=</span> <span class="s1">&#39;0.1.0&#39;</span>
<a id="__codelineno-99-22" name="__codelineno-99-22" href="#__codelineno-99-22"></a>
<a id="__codelineno-99-23" name="__codelineno-99-23" href="#__codelineno-99-23"></a><span class="c1"># What packages are required for this module to be executed?</span>
<a id="__codelineno-99-24" name="__codelineno-99-24" href="#__codelineno-99-24"></a><span class="n">REQUIRED</span> <span class="o">=</span> <span class="p">[</span>
<a id="__codelineno-99-25" name="__codelineno-99-25" href="#__codelineno-99-25"></a>    <span class="c1"># &#39;requests&#39;, &#39;maya&#39;, &#39;records&#39;,</span>
<a id="__codelineno-99-26" name="__codelineno-99-26" href="#__codelineno-99-26"></a><span class="p">]</span>
<a id="__codelineno-99-27" name="__codelineno-99-27" href="#__codelineno-99-27"></a>
<a id="__codelineno-99-28" name="__codelineno-99-28" href="#__codelineno-99-28"></a><span class="c1"># What packages are optional?</span>
<a id="__codelineno-99-29" name="__codelineno-99-29" href="#__codelineno-99-29"></a><span class="n">EXTRAS</span> <span class="o">=</span> <span class="p">{</span>
<a id="__codelineno-99-30" name="__codelineno-99-30" href="#__codelineno-99-30"></a>    <span class="c1"># &#39;fancy feature&#39;: [&#39;django&#39;],</span>
<a id="__codelineno-99-31" name="__codelineno-99-31" href="#__codelineno-99-31"></a><span class="p">}</span>
<a id="__codelineno-99-32" name="__codelineno-99-32" href="#__codelineno-99-32"></a>
<a id="__codelineno-99-33" name="__codelineno-99-33" href="#__codelineno-99-33"></a><span class="c1"># The rest you shouldn&#39;t have to touch too much :)</span>
<a id="__codelineno-99-34" name="__codelineno-99-34" href="#__codelineno-99-34"></a><span class="c1"># ------------------------------------------------</span>
<a id="__codelineno-99-35" name="__codelineno-99-35" href="#__codelineno-99-35"></a><span class="c1"># Except, perhaps the License and Trove Classifiers!</span>
<a id="__codelineno-99-36" name="__codelineno-99-36" href="#__codelineno-99-36"></a><span class="c1"># If you do change the License, remember to change the Trove Classifier for that!</span>
<a id="__codelineno-99-37" name="__codelineno-99-37" href="#__codelineno-99-37"></a>
<a id="__codelineno-99-38" name="__codelineno-99-38" href="#__codelineno-99-38"></a><span class="n">here</span> <span class="o">=</span> <span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">abspath</span><span class="p">(</span><span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">dirname</span><span class="p">(</span><span class="vm">__file__</span><span class="p">))</span>
<a id="__codelineno-99-39" name="__codelineno-99-39" href="#__codelineno-99-39"></a>
<a id="__codelineno-99-40" name="__codelineno-99-40" href="#__codelineno-99-40"></a><span class="c1"># Import the README and use it as the long-description.</span>
<a id="__codelineno-99-41" name="__codelineno-99-41" href="#__codelineno-99-41"></a><span class="c1"># Note: this will only work if &#39;README.md&#39; is present in your MANIFEST.in file!</span>
<a id="__codelineno-99-42" name="__codelineno-99-42" href="#__codelineno-99-42"></a><span class="k">try</span><span class="p">:</span>
<a id="__codelineno-99-43" name="__codelineno-99-43" href="#__codelineno-99-43"></a>    <span class="k">with</span> <span class="n">io</span><span class="o">.</span><span class="n">open</span><span class="p">(</span><span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="n">here</span><span class="p">,</span> <span class="s1">&#39;README.md&#39;</span><span class="p">),</span> <span class="n">encoding</span><span class="o">=</span><span class="s1">&#39;utf-8&#39;</span><span class="p">)</span> <span class="k">as</span> <span class="n">f</span><span class="p">:</span>
<a id="__codelineno-99-44" name="__codelineno-99-44" href="#__codelineno-99-44"></a>        <span class="n">long_description</span> <span class="o">=</span> <span class="s1">&#39;</span><span class="se">\n</span><span class="s1">&#39;</span> <span class="o">+</span> <span class="n">f</span><span class="o">.</span><span class="n">read</span><span class="p">()</span>
<a id="__codelineno-99-45" name="__codelineno-99-45" href="#__codelineno-99-45"></a><span class="k">except</span> <span class="ne">FileNotFoundError</span><span class="p">:</span>
<a id="__codelineno-99-46" name="__codelineno-99-46" href="#__codelineno-99-46"></a>    <span class="n">long_description</span> <span class="o">=</span> <span class="n">DESCRIPTION</span>
<a id="__codelineno-99-47" name="__codelineno-99-47" href="#__codelineno-99-47"></a>
<a id="__codelineno-99-48" name="__codelineno-99-48" href="#__codelineno-99-48"></a><span class="c1"># Load the package&#39;s __version__.py module as a dictionary.</span>
<a id="__codelineno-99-49" name="__codelineno-99-49" href="#__codelineno-99-49"></a><span class="n">about</span> <span class="o">=</span> <span class="p">{}</span>
<a id="__codelineno-99-50" name="__codelineno-99-50" href="#__codelineno-99-50"></a><span class="k">if</span> <span class="ow">not</span> <span class="n">VERSION</span><span class="p">:</span>
<a id="__codelineno-99-51" name="__codelineno-99-51" href="#__codelineno-99-51"></a>    <span class="n">project_slug</span> <span class="o">=</span> <span class="n">NAME</span><span class="o">.</span><span class="n">lower</span><span class="p">()</span><span class="o">.</span><span class="n">replace</span><span class="p">(</span><span class="s2">&quot;-&quot;</span><span class="p">,</span> <span class="s2">&quot;_&quot;</span><span class="p">)</span><span class="o">.</span><span class="n">replace</span><span class="p">(</span><span class="s2">&quot; &quot;</span><span class="p">,</span> <span class="s2">&quot;_&quot;</span><span class="p">)</span>
<a id="__codelineno-99-52" name="__codelineno-99-52" href="#__codelineno-99-52"></a>    <span class="k">with</span> <span class="nb">open</span><span class="p">(</span><span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="n">here</span><span class="p">,</span> <span class="n">project_slug</span><span class="p">,</span> <span class="s1">&#39;__version__.py&#39;</span><span class="p">))</span> <span class="k">as</span> <span class="n">f</span><span class="p">:</span>
<a id="__codelineno-99-53" name="__codelineno-99-53" href="#__codelineno-99-53"></a>        <span class="n">exec</span><span class="p">(</span><span class="n">f</span><span class="o">.</span><span class="n">read</span><span class="p">(),</span> <span class="n">about</span><span class="p">)</span>
<a id="__codelineno-99-54" name="__codelineno-99-54" href="#__codelineno-99-54"></a><span class="k">else</span><span class="p">:</span>
<a id="__codelineno-99-55" name="__codelineno-99-55" href="#__codelineno-99-55"></a>    <span class="n">about</span><span class="p">[</span><span class="s1">&#39;__version__&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="n">VERSION</span>
<a id="__codelineno-99-56" name="__codelineno-99-56" href="#__codelineno-99-56"></a>
<a id="__codelineno-99-57" name="__codelineno-99-57" href="#__codelineno-99-57"></a><span class="c1"># Where the magic happens:</span>
<a id="__codelineno-99-58" name="__codelineno-99-58" href="#__codelineno-99-58"></a><span class="n">setup</span><span class="p">(</span>
<a id="__codelineno-99-59" name="__codelineno-99-59" href="#__codelineno-99-59"></a>    <span class="n">name</span><span class="o">=</span><span class="n">NAME</span><span class="p">,</span>
<a id="__codelineno-99-60" name="__codelineno-99-60" href="#__codelineno-99-60"></a>    <span class="n">version</span><span class="o">=</span><span class="n">about</span><span class="p">[</span><span class="s1">&#39;__version__&#39;</span><span class="p">],</span>
<a id="__codelineno-99-61" name="__codelineno-99-61" href="#__codelineno-99-61"></a>    <span class="n">description</span><span class="o">=</span><span class="n">DESCRIPTION</span><span class="p">,</span>
<a id="__codelineno-99-62" name="__codelineno-99-62" href="#__codelineno-99-62"></a>    <span class="n">long_description</span><span class="o">=</span><span class="n">long_description</span><span class="p">,</span>
<a id="__codelineno-99-63" name="__codelineno-99-63" href="#__codelineno-99-63"></a>    <span class="n">long_description_content_type</span><span class="o">=</span><span class="s1">&#39;text/markdown&#39;</span><span class="p">,</span>
<a id="__codelineno-99-64" name="__codelineno-99-64" href="#__codelineno-99-64"></a>    <span class="n">author</span><span class="o">=</span><span class="n">AUTHOR</span><span class="p">,</span>
<a id="__codelineno-99-65" name="__codelineno-99-65" href="#__codelineno-99-65"></a>    <span class="n">author_email</span><span class="o">=</span><span class="n">EMAIL</span><span class="p">,</span>
<a id="__codelineno-99-66" name="__codelineno-99-66" href="#__codelineno-99-66"></a>    <span class="n">python_requires</span><span class="o">=</span><span class="n">REQUIRES_PYTHON</span><span class="p">,</span>
<a id="__codelineno-99-67" name="__codelineno-99-67" href="#__codelineno-99-67"></a>    <span class="n">url</span><span class="o">=</span><span class="n">URL</span><span class="p">,</span>
<a id="__codelineno-99-68" name="__codelineno-99-68" href="#__codelineno-99-68"></a>    <span class="n">packages</span><span class="o">=</span><span class="n">find_packages</span><span class="p">(</span><span class="n">exclude</span><span class="o">=</span><span class="p">[</span><span class="s2">&quot;tests&quot;</span><span class="p">,</span> <span class="s2">&quot;*.tests&quot;</span><span class="p">,</span> <span class="s2">&quot;*.tests.*&quot;</span><span class="p">,</span> <span class="s2">&quot;tests.*&quot;</span><span class="p">]),</span>
<a id="__codelineno-99-69" name="__codelineno-99-69" href="#__codelineno-99-69"></a>    <span class="c1"># If your package is a single module, use this instead of &#39;packages&#39;:</span>
<a id="__codelineno-99-70" name="__codelineno-99-70" href="#__codelineno-99-70"></a>    <span class="c1"># py_modules=[&#39;mypackage&#39;],</span>
<a id="__codelineno-99-71" name="__codelineno-99-71" href="#__codelineno-99-71"></a>
<a id="__codelineno-99-72" name="__codelineno-99-72" href="#__codelineno-99-72"></a>    <span class="c1"># entry_points={</span>
<a id="__codelineno-99-73" name="__codelineno-99-73" href="#__codelineno-99-73"></a>    <span class="c1">#     &#39;console_scripts&#39;: [&#39;mycli=mymodule:cli&#39;],</span>
<a id="__codelineno-99-74" name="__codelineno-99-74" href="#__codelineno-99-74"></a>    <span class="c1"># },</span>
<a id="__codelineno-99-75" name="__codelineno-99-75" href="#__codelineno-99-75"></a>    <span class="n">install_requires</span><span class="o">=</span><span class="n">REQUIRED</span><span class="p">,</span>
<a id="__codelineno-99-76" name="__codelineno-99-76" href="#__codelineno-99-76"></a>    <span class="n">extras_require</span><span class="o">=</span><span class="n">EXTRAS</span><span class="p">,</span>
<a id="__codelineno-99-77" name="__codelineno-99-77" href="#__codelineno-99-77"></a>    <span class="n">include_package_data</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span>
<a id="__codelineno-99-78" name="__codelineno-99-78" href="#__codelineno-99-78"></a>    <span class="n">license</span><span class="o">=</span><span class="s1">&#39;MIT&#39;</span><span class="p">,</span>
<a id="__codelineno-99-79" name="__codelineno-99-79" href="#__codelineno-99-79"></a>    <span class="n">classifiers</span><span class="o">=</span><span class="p">[</span>
<a id="__codelineno-99-80" name="__codelineno-99-80" href="#__codelineno-99-80"></a>        <span class="c1"># Trove classifiers</span>
<a id="__codelineno-99-81" name="__codelineno-99-81" href="#__codelineno-99-81"></a>        <span class="c1"># Full list: https://pypi.python.org/pypi?%3Aaction=list_classifiers</span>
<a id="__codelineno-99-82" name="__codelineno-99-82" href="#__codelineno-99-82"></a>        <span class="s1">&#39;License :: OSI Approved :: MIT License&#39;</span><span class="p">,</span>
<a id="__codelineno-99-83" name="__codelineno-99-83" href="#__codelineno-99-83"></a>        <span class="s1">&#39;Programming Language :: Python&#39;</span><span class="p">,</span>
<a id="__codelineno-99-84" name="__codelineno-99-84" href="#__codelineno-99-84"></a>        <span class="s1">&#39;Programming Language :: Python :: 3&#39;</span><span class="p">,</span>
<a id="__codelineno-99-85" name="__codelineno-99-85" href="#__codelineno-99-85"></a>        <span class="s1">&#39;Programming Language :: Python :: 3.6&#39;</span><span class="p">,</span>
<a id="__codelineno-99-86" name="__codelineno-99-86" href="#__codelineno-99-86"></a>        <span class="s1">&#39;Programming Language :: Python :: Implementation :: CPython&#39;</span><span class="p">,</span>
<a id="__codelineno-99-87" name="__codelineno-99-87" href="#__codelineno-99-87"></a>        <span class="s1">&#39;Programming Language :: Python :: Implementation :: PyPy&#39;</span>
<a id="__codelineno-99-88" name="__codelineno-99-88" href="#__codelineno-99-88"></a>    <span class="p">],</span>
<a id="__codelineno-99-89" name="__codelineno-99-89" href="#__codelineno-99-89"></a><span class="p">)</span>
</code></pre></div>
</details>
<h4 id="_16">包内容</h4>
<p>默认情况下, <code>setuptools</code>在构建包的时候会包含以下内容: </p>
<ol>
<li>Python包: 通过<code>find_packages()</code>找到的所有包</li>
<li>由<code>package_data</code>指定的文件</li>
<li>由<code>MANIFEST.in</code>指定的文件</li>
</ol>
<details class="warning" open="open">
<summary>注意</summary>
<p>使用后两种方法必须要设置<code>include_package_data = True</code></p>
</details>
<details class="example" open="open">
<summary>例子</summary>
<div class="tabbed-set tabbed-alternate" data-tabs="7:2"><input checked="checked" id="__tabbed_7_1" name="__tabbed_7" type="radio" /><input id="__tabbed_7_2" name="__tabbed_7" type="radio" /><div class="tabbed-labels"><label for="__tabbed_7_1"><code>package_data</code></label><label for="__tabbed_7_2"><code>MANIFEST.in</code></label></div>
<div class="tabbed-content">
<div class="tabbed-block">
<details class="warning" open="open">
<summary>注意</summary>
<p>由<code>package_data</code>参数指定的文件必须包含在包目录内, 不能指定包含包外面的文件, 如果文件位于包外, 则需要先将其移动到包外面, 然后使用<code>MAINIFEST.in</code>指定.</p>
</details>
<p>项目结构: </p>
<div class="highlight"><pre><span></span><code><a id="__codelineno-100-1" name="__codelineno-100-1" href="#__codelineno-100-1"></a>myproject/
<a id="__codelineno-100-2" name="__codelineno-100-2" href="#__codelineno-100-2"></a>├── mypackage/
<a id="__codelineno-100-3" name="__codelineno-100-3" href="#__codelineno-100-3"></a>│   ├── __init__.py
<a id="__codelineno-100-4" name="__codelineno-100-4" href="#__codelineno-100-4"></a>│   ├── module.py
<a id="__codelineno-100-5" name="__codelineno-100-5" href="#__codelineno-100-5"></a>│   └── data/
<a id="__codelineno-100-6" name="__codelineno-100-6" href="#__codelineno-100-6"></a>│       ├── config.json
<a id="__codelineno-100-7" name="__codelineno-100-7" href="#__codelineno-100-7"></a>│       └── sample_data.csv
<a id="__codelineno-100-8" name="__codelineno-100-8" href="#__codelineno-100-8"></a>├── README.md
<a id="__codelineno-100-9" name="__codelineno-100-9" href="#__codelineno-100-9"></a>└── setup.py
</code></pre></div>
<p><code>setup.py</code>文件: </p>
<div class="highlight"><pre><span></span><code><a id="__codelineno-101-1" name="__codelineno-101-1" href="#__codelineno-101-1"></a><span class="kn">from</span> <span class="nn">setuptools</span> <span class="kn">import</span> <span class="n">setup</span><span class="p">,</span> <span class="n">find_packages</span>
<a id="__codelineno-101-2" name="__codelineno-101-2" href="#__codelineno-101-2"></a>
<a id="__codelineno-101-3" name="__codelineno-101-3" href="#__codelineno-101-3"></a><span class="n">setup</span><span class="p">(</span>
<a id="__codelineno-101-4" name="__codelineno-101-4" href="#__codelineno-101-4"></a>    <span class="n">name</span><span class="o">=</span><span class="s1">&#39;mypackage&#39;</span><span class="p">,</span>
<a id="__codelineno-101-5" name="__codelineno-101-5" href="#__codelineno-101-5"></a>    <span class="n">version</span><span class="o">=</span><span class="s1">&#39;0.1.0&#39;</span><span class="p">,</span>
<a id="__codelineno-101-6" name="__codelineno-101-6" href="#__codelineno-101-6"></a>    <span class="n">description</span><span class="o">=</span><span class="s1">&#39;A simple example package&#39;</span><span class="p">,</span>
<a id="__codelineno-101-7" name="__codelineno-101-7" href="#__codelineno-101-7"></a>    <span class="n">long_description</span><span class="o">=</span><span class="nb">open</span><span class="p">(</span><span class="s1">&#39;README.md&#39;</span><span class="p">)</span><span class="o">.</span><span class="n">read</span><span class="p">(),</span>
<a id="__codelineno-101-8" name="__codelineno-101-8" href="#__codelineno-101-8"></a>    <span class="n">long_description_content_type</span><span class="o">=</span><span class="s1">&#39;text/markdown&#39;</span><span class="p">,</span>
<a id="__codelineno-101-9" name="__codelineno-101-9" href="#__codelineno-101-9"></a>    <span class="n">author</span><span class="o">=</span><span class="s1">&#39;Your Name&#39;</span><span class="p">,</span>
<a id="__codelineno-101-10" name="__codelineno-101-10" href="#__codelineno-101-10"></a>    <span class="n">author_email</span><span class="o">=</span><span class="s1">&#39;your.email@example.com&#39;</span><span class="p">,</span>
<a id="__codelineno-101-11" name="__codelineno-101-11" href="#__codelineno-101-11"></a>    <span class="n">url</span><span class="o">=</span><span class="s1">&#39;https://github.com/yourname/mypackage&#39;</span><span class="p">,</span>
<a id="__codelineno-101-12" name="__codelineno-101-12" href="#__codelineno-101-12"></a>    <span class="n">packages</span><span class="o">=</span><span class="n">find_packages</span><span class="p">(),</span>
<a id="__codelineno-101-13" name="__codelineno-101-13" href="#__codelineno-101-13"></a>    <span class="n">include_package_data</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span>  <span class="c1"># 必须启用这个选项</span>
<a id="__codelineno-101-14" name="__codelineno-101-14" href="#__codelineno-101-14"></a>    <span class="n">package_data</span><span class="o">=</span><span class="p">{</span>
<a id="__codelineno-101-15" name="__codelineno-101-15" href="#__codelineno-101-15"></a>        <span class="c1"># 包含在 mypackage 中的所有文件</span>
<a id="__codelineno-101-16" name="__codelineno-101-16" href="#__codelineno-101-16"></a>        <span class="s1">&#39;mypackage&#39;</span><span class="p">:</span> <span class="p">[</span><span class="s1">&#39;data/*.json&#39;</span><span class="p">,</span> <span class="s1">&#39;data/*.csv&#39;</span><span class="p">],</span>
<a id="__codelineno-101-17" name="__codelineno-101-17" href="#__codelineno-101-17"></a>    <span class="p">},</span>
<a id="__codelineno-101-18" name="__codelineno-101-18" href="#__codelineno-101-18"></a>    <span class="n">python_requires</span><span class="o">=</span><span class="s1">&#39;&gt;=3.6&#39;</span><span class="p">,</span>
<a id="__codelineno-101-19" name="__codelineno-101-19" href="#__codelineno-101-19"></a><span class="p">)</span>
</code></pre></div>
<p>这种情况下, 如果你运行<code>python setup.py sdist</code>, 默认情况下, 源分发包只会包含<code>mypackage</code>目录以及其中的模块以及包外的<code>README.md</code>和<code>LICENSE</code>等必要文件, 其他的文件, 如<code>data/config.json</code>和<code>data/sample_data.csv</code>不会包含在源分发包中. 为了包含着这两个文件, 使用了<code>package_data</code>指定这些文件需要包含到打包好的包里面. </p>
</div>
<div class="tabbed-block">
<details class="note" open="open">
<summary>笔记</summary>
<p>由<code>MANIFEST.in</code>指定的文件可以在包内也可以在包外.</p>
</details>
<p>项目结构:</p>
<div class="highlight"><pre><span></span><code><a id="__codelineno-102-1" name="__codelineno-102-1" href="#__codelineno-102-1"></a>myproject/
<a id="__codelineno-102-2" name="__codelineno-102-2" href="#__codelineno-102-2"></a>├── mypackage/
<a id="__codelineno-102-3" name="__codelineno-102-3" href="#__codelineno-102-3"></a>│   ├── __init__.py
<a id="__codelineno-102-4" name="__codelineno-102-4" href="#__codelineno-102-4"></a>│   └── module.py
<a id="__codelineno-102-5" name="__codelineno-102-5" href="#__codelineno-102-5"></a>├── README.md
<a id="__codelineno-102-6" name="__codelineno-102-6" href="#__codelineno-102-6"></a>├── setup.py
<a id="__codelineno-102-7" name="__codelineno-102-7" href="#__codelineno-102-7"></a>└── data/
<a id="__codelineno-102-8" name="__codelineno-102-8" href="#__codelineno-102-8"></a>    └── dataset.csv
</code></pre></div>
<p><code>setup.py</code>文件:</p>
<div class="highlight"><pre><span></span><code><a id="__codelineno-103-1" name="__codelineno-103-1" href="#__codelineno-103-1"></a><span class="kn">from</span> <span class="nn">setuptools</span> <span class="kn">import</span> <span class="n">setup</span><span class="p">,</span> <span class="n">find_packages</span>
<a id="__codelineno-103-2" name="__codelineno-103-2" href="#__codelineno-103-2"></a>
<a id="__codelineno-103-3" name="__codelineno-103-3" href="#__codelineno-103-3"></a><span class="n">setup</span><span class="p">(</span>
<a id="__codelineno-103-4" name="__codelineno-103-4" href="#__codelineno-103-4"></a>    <span class="n">name</span><span class="o">=</span><span class="s1">&#39;mypackage&#39;</span><span class="p">,</span>
<a id="__codelineno-103-5" name="__codelineno-103-5" href="#__codelineno-103-5"></a>    <span class="n">version</span><span class="o">=</span><span class="s1">&#39;0.1.0&#39;</span><span class="p">,</span>
<a id="__codelineno-103-6" name="__codelineno-103-6" href="#__codelineno-103-6"></a>    <span class="n">description</span><span class="o">=</span><span class="s1">&#39;A simple example package&#39;</span><span class="p">,</span>
<a id="__codelineno-103-7" name="__codelineno-103-7" href="#__codelineno-103-7"></a>    <span class="n">long_description</span><span class="o">=</span><span class="nb">open</span><span class="p">(</span><span class="s1">&#39;README.md&#39;</span><span class="p">)</span><span class="o">.</span><span class="n">read</span><span class="p">(),</span>
<a id="__codelineno-103-8" name="__codelineno-103-8" href="#__codelineno-103-8"></a>    <span class="n">long_description_content_type</span><span class="o">=</span><span class="s1">&#39;text/markdown&#39;</span><span class="p">,</span>
<a id="__codelineno-103-9" name="__codelineno-103-9" href="#__codelineno-103-9"></a>    <span class="n">author</span><span class="o">=</span><span class="s1">&#39;Your Name&#39;</span><span class="p">,</span>
<a id="__codelineno-103-10" name="__codelineno-103-10" href="#__codelineno-103-10"></a>    <span class="n">author_email</span><span class="o">=</span><span class="s1">&#39;your.email@example.com&#39;</span><span class="p">,</span>
<a id="__codelineno-103-11" name="__codelineno-103-11" href="#__codelineno-103-11"></a>    <span class="n">url</span><span class="o">=</span><span class="s1">&#39;https://github.com/yourname/mypackage&#39;</span><span class="p">,</span>
<a id="__codelineno-103-12" name="__codelineno-103-12" href="#__codelineno-103-12"></a>    <span class="n">packages</span><span class="o">=</span><span class="n">find_packages</span><span class="p">(),</span>
<a id="__codelineno-103-13" name="__codelineno-103-13" href="#__codelineno-103-13"></a>    <span class="n">include_package_data</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span>
<a id="__codelineno-103-14" name="__codelineno-103-14" href="#__codelineno-103-14"></a>    <span class="n">python_requires</span><span class="o">=</span><span class="s1">&#39;&gt;=3.6&#39;</span><span class="p">,</span>
<a id="__codelineno-103-15" name="__codelineno-103-15" href="#__codelineno-103-15"></a><span class="p">)</span>
</code></pre></div>
<p>这种情况下, 如果你运行<code>python setup.py sdist</code>, 默认情况下, 源分发包只会包含<code>mypackage</code>目录以及其中的模块以及包外的<code>README.md</code>和<code>LICENSE</code>等必要文件, 其他的文件, 如<code>data/dataset.csv</code>不会包含在源分发包中.</p>
<p>为了包含着两个文件, 可以创建一个<code>MANIFEST.in</code>, 并指定这些文件:</p>
<div class="highlight"><pre><span></span><code><a id="__codelineno-104-1" name="__codelineno-104-1" href="#__codelineno-104-1"></a>recursive-include data *.csv
</code></pre></div>
<p>再次运行时, 源分发包将包含: </p>
<ul>
<li><code>mypackage/</code>目录以及其中的所有模块以及包外的<code>README.md</code>和<code>LICENSE</code>等必要文件</li>
<li><code>data/</code>目录以及其中所有的<code>.csv</code>文件</li>
</ul>
</div>
</div>
</div>
</details>
<h4 id="_17">打包</h4>
<p>可以通过<code>python setup.py sdist</code>生成原分法包, 或者使用<code>python setup.py bdist_wheel</code>生成二进制分发包, 打包后的文件放在dist文件夹中, 扩展名分别为<code>.tar.gz</code>和<code>.whl</code>. </p>
<details class="warning" open="open">
<summary>注意</summary>
<p>在打包之前, 需要清理掉之前所有打包产生的文件: <code>rm -rf build dist *.egg-info</code></p>
</details>
<h4 id="_18">参数</h4>
<h5 id="_19">描述</h5>
<p>我们可以在<code>setup.py</code>中将<code>long_description</code>设置为项目下的<code>README.md</code>文件:</p>
<details class="example" open="open">
<summary>例子</summary>
<div class="highlight"><pre><span></span><code><a id="__codelineno-105-1" name="__codelineno-105-1" href="#__codelineno-105-1"></a><span class="n">here</span> <span class="o">=</span> <span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">abspath</span><span class="p">(</span><span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">dirname</span><span class="p">(</span><span class="vm">__file__</span><span class="p">))</span>
<a id="__codelineno-105-2" name="__codelineno-105-2" href="#__codelineno-105-2"></a>
<a id="__codelineno-105-3" name="__codelineno-105-3" href="#__codelineno-105-3"></a><span class="c1"># Import the README and use it as the long-description.</span>
<a id="__codelineno-105-4" name="__codelineno-105-4" href="#__codelineno-105-4"></a><span class="c1"># Note: this will only work if &#39;README.md&#39; is present in your MANIFEST.in file!</span>
<a id="__codelineno-105-5" name="__codelineno-105-5" href="#__codelineno-105-5"></a><span class="k">try</span><span class="p">:</span>
<a id="__codelineno-105-6" name="__codelineno-105-6" href="#__codelineno-105-6"></a>    <span class="k">with</span> <span class="n">io</span><span class="o">.</span><span class="n">open</span><span class="p">(</span><span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="n">here</span><span class="p">,</span> <span class="s1">&#39;README.md&#39;</span><span class="p">),</span> <span class="n">encoding</span><span class="o">=</span><span class="s1">&#39;utf-8&#39;</span><span class="p">)</span> <span class="k">as</span> <span class="n">f</span><span class="p">:</span>
<a id="__codelineno-105-7" name="__codelineno-105-7" href="#__codelineno-105-7"></a>        <span class="n">long_description</span> <span class="o">=</span> <span class="s1">&#39;</span><span class="se">\n</span><span class="s1">&#39;</span> <span class="o">+</span> <span class="n">f</span><span class="o">.</span><span class="n">read</span><span class="p">()</span>
<a id="__codelineno-105-8" name="__codelineno-105-8" href="#__codelineno-105-8"></a><span class="k">except</span> <span class="ne">FileNotFoundError</span><span class="p">:</span>
<a id="__codelineno-105-9" name="__codelineno-105-9" href="#__codelineno-105-9"></a>        <span class="n">long_description</span> <span class="o">=</span> <span class="n">DESCRIPTION</span>
</code></pre></div>
<p><code>__file__</code>在这里时<code>setup.py</code>的文件名, <code>here</code>保存的是<code>setup.py</code>的绝对路径. 我们将<code>README.md</code>文件读出, 然后赋值给<code>long_description</code>. 最后在<code>setup()</code>函数中设置.</p>
</details>
<h5 id="_20">版本</h5>
<p>我们可以将版本设置为包目录下<code>__version__.py</code>文件中设置的版本:</p>
<details class="example" open="open">
<summary>例子</summary>
<p><code>setup.py</code>文件(部分):</p>
<div class="highlight"><pre><span></span><code><a id="__codelineno-106-1" name="__codelineno-106-1" href="#__codelineno-106-1"></a><span class="c1"># Load the package&#39;s __version__.py module as a dictionary.</span>
<a id="__codelineno-106-2" name="__codelineno-106-2" href="#__codelineno-106-2"></a><span class="n">about</span> <span class="o">=</span> <span class="p">{}</span>
<a id="__codelineno-106-3" name="__codelineno-106-3" href="#__codelineno-106-3"></a><span class="k">if</span> <span class="ow">not</span> <span class="n">VERSION</span><span class="p">:</span>
<a id="__codelineno-106-4" name="__codelineno-106-4" href="#__codelineno-106-4"></a>    <span class="n">project_slug</span> <span class="o">=</span> <span class="n">NAME</span><span class="o">.</span><span class="n">lower</span><span class="p">()</span><span class="o">.</span><span class="n">replace</span><span class="p">(</span><span class="s2">&quot;-&quot;</span><span class="p">,</span> <span class="s2">&quot;_&quot;</span><span class="p">)</span><span class="o">.</span><span class="n">replace</span><span class="p">(</span><span class="s2">&quot; &quot;</span><span class="p">,</span> <span class="s2">&quot;_&quot;</span><span class="p">)</span>
<a id="__codelineno-106-5" name="__codelineno-106-5" href="#__codelineno-106-5"></a>    <span class="k">with</span> <span class="nb">open</span><span class="p">(</span><span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="n">here</span><span class="p">,</span> <span class="n">project_slug</span><span class="p">,</span> <span class="s1">&#39;__version__.py&#39;</span><span class="p">))</span> <span class="k">as</span> <span class="n">f</span><span class="p">:</span>
<a id="__codelineno-106-6" name="__codelineno-106-6" href="#__codelineno-106-6"></a>        <span class="n">exec</span><span class="p">(</span><span class="n">f</span><span class="o">.</span><span class="n">read</span><span class="p">(),</span> <span class="n">about</span><span class="p">)</span>
<a id="__codelineno-106-7" name="__codelineno-106-7" href="#__codelineno-106-7"></a><span class="k">else</span><span class="p">:</span>
<a id="__codelineno-106-8" name="__codelineno-106-8" href="#__codelineno-106-8"></a>    <span class="n">about</span><span class="p">[</span><span class="s1">&#39;__version__&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="n">VERSION</span>
</code></pre></div>
<p><code>__version__.py</code>文件:</p>
<div class="highlight"><pre><span></span><code><a id="__codelineno-107-1" name="__codelineno-107-1" href="#__codelineno-107-1"></a><span class="err">`</span><span class="n">__version__</span><span class="o">.</span><span class="n">py</span><span class="err">`</span><span class="n">文件</span><span class="p">:</span>
<a id="__codelineno-107-2" name="__codelineno-107-2" href="#__codelineno-107-2"></a>
<a id="__codelineno-107-3" name="__codelineno-107-3" href="#__codelineno-107-3"></a><span class="err">```</span><span class="n">py</span>
<a id="__codelineno-107-4" name="__codelineno-107-4" href="#__codelineno-107-4"></a><span class="c1"># 8b    d8 Yb  dP 88&quot;&quot;Yb    db     dP&quot;&quot;b8 88  dP    db     dP&quot;&quot;b8 888888</span>
<a id="__codelineno-107-5" name="__codelineno-107-5" href="#__codelineno-107-5"></a><span class="c1"># 88b  d88  YbdP  88__dP   dPYb   dP   `&quot; 88odP    dPYb   dP   `&quot; 88__</span>
<a id="__codelineno-107-6" name="__codelineno-107-6" href="#__codelineno-107-6"></a><span class="c1"># 88YbdP88   8P   88&quot;&quot;&quot;   dP__Yb  Yb      88&quot;Yb   dP__Yb  Yb  &quot;88 88&quot;&quot;</span>
<a id="__codelineno-107-7" name="__codelineno-107-7" href="#__codelineno-107-7"></a><span class="c1"># 88 YY 88  dP    88     dP&quot;&quot;&quot;&quot;Yb  YboodP 88  Yb dP&quot;&quot;&quot;&quot;Yb  YboodP 888888</span>
<a id="__codelineno-107-8" name="__codelineno-107-8" href="#__codelineno-107-8"></a>
<a id="__codelineno-107-9" name="__codelineno-107-9" href="#__codelineno-107-9"></a><span class="n">VERSION</span> <span class="o">=</span> <span class="p">(</span><span class="mi">5</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="mi">0</span><span class="p">)</span>
<a id="__codelineno-107-10" name="__codelineno-107-10" href="#__codelineno-107-10"></a>
<a id="__codelineno-107-11" name="__codelineno-107-11" href="#__codelineno-107-11"></a><span class="n">__version__</span> <span class="o">=</span> <span class="s1">&#39;.&#39;</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="nb">map</span><span class="p">(</span><span class="nb">str</span><span class="p">,</span> <span class="n">VERSION</span><span class="p">))</span>
</code></pre></div>
<p>找到<code>__version__.py</code>文件之后, 使用<code>exec()</code>执行里面的代码, 第二个参数指定了一个命名空间.</p>
<details class="example" open="open">
<summary>例子</summary>
<div class="highlight"><pre><span></span><code><a id="__codelineno-108-1" name="__codelineno-108-1" href="#__codelineno-108-1"></a><span class="n">code</span> <span class="o">=</span> <span class="s1">&#39;a = 5</span><span class="se">\n</span><span class="s1">b = 10</span><span class="se">\n</span><span class="s1">print(a + b)&#39;</span>
<a id="__codelineno-108-2" name="__codelineno-108-2" href="#__codelineno-108-2"></a><span class="n">namespace</span> <span class="o">=</span> <span class="p">{}</span>
<a id="__codelineno-108-3" name="__codelineno-108-3" href="#__codelineno-108-3"></a><span class="n">exec</span><span class="p">(</span><span class="n">code</span><span class="p">,</span> <span class="n">namespace</span><span class="p">)</span>
<a id="__codelineno-108-4" name="__codelineno-108-4" href="#__codelineno-108-4"></a><span class="nb">print</span><span class="p">(</span><span class="n">namespace</span><span class="p">)</span>  <span class="c1"># {&#39;a&#39;: 5, &#39;b&#39;: 10}</span>
</code></pre></div>
</details>
<p>将其版本保存到<code>about</code>这个字典中, 在<code>setup()</code>函数中使用. 如果没找到这个文件的话, 使用的是<code>setup.py</code>中定义的<code>VERSION</code>变量的值. </p>
</details>
<h5 id="_21">依赖</h5>
<p><code>setup()</code>函数中的<code>install_requires</code>用于指定核心依赖, <code>extras_require</code>用于指定可选依赖. </p>
<ul>
<li>
<p><code>install_requires</code>指定的依赖无论用户以何种方式安装你的包, 这些都会被安装.</p>
<details class="example" open="open">
<summary>例子</summary>
<div class="highlight"><pre><span></span><code><a id="__codelineno-109-1" name="__codelineno-109-1" href="#__codelineno-109-1"></a><span class="kn">from</span> <span class="nn">setuptools</span> <span class="kn">import</span> <span class="n">setup</span>
<a id="__codelineno-109-2" name="__codelineno-109-2" href="#__codelineno-109-2"></a>
<a id="__codelineno-109-3" name="__codelineno-109-3" href="#__codelineno-109-3"></a><span class="n">REQUIRED</span> <span class="o">=</span> <span class="p">[</span>
<a id="__codelineno-109-4" name="__codelineno-109-4" href="#__codelineno-109-4"></a>    <span class="s1">&#39;numpy&gt;=1.18.0&#39;</span><span class="p">,</span>
<a id="__codelineno-109-5" name="__codelineno-109-5" href="#__codelineno-109-5"></a>    <span class="s1">&#39;pandas&gt;=1.0.0&#39;</span><span class="p">,</span>
<a id="__codelineno-109-6" name="__codelineno-109-6" href="#__codelineno-109-6"></a><span class="p">]</span>
<a id="__codelineno-109-7" name="__codelineno-109-7" href="#__codelineno-109-7"></a>
<a id="__codelineno-109-8" name="__codelineno-109-8" href="#__codelineno-109-8"></a><span class="n">setup</span><span class="p">(</span>
<a id="__codelineno-109-9" name="__codelineno-109-9" href="#__codelineno-109-9"></a>    <span class="o">...</span>
<a id="__codelineno-109-10" name="__codelineno-109-10" href="#__codelineno-109-10"></a>    <span class="n">install_requires</span><span class="o">=</span><span class="n">REQUIRED</span><span class="p">,</span>
<a id="__codelineno-109-11" name="__codelineno-109-11" href="#__codelineno-109-11"></a>    <span class="o">...</span>
<a id="__codelineno-109-12" name="__codelineno-109-12" href="#__codelineno-109-12"></a><span class="p">)</span>
</code></pre></div>
</details>
</li>
<li>
<p><code>extras_require</code>指定的是可选依赖, 可以为你的包指定一些额外的依赖, 但不是必需品, 用户可以选择是否安装这些依赖.</p>
<details class="example" open="open">
<summary>例子</summary>
<div class="highlight"><pre><span></span><code><a id="__codelineno-110-1" name="__codelineno-110-1" href="#__codelineno-110-1"></a><span class="kn">from</span> <span class="nn">setuptools</span> <span class="kn">import</span> <span class="n">setup</span>
<a id="__codelineno-110-2" name="__codelineno-110-2" href="#__codelineno-110-2"></a>
<a id="__codelineno-110-3" name="__codelineno-110-3" href="#__codelineno-110-3"></a><span class="n">EXTRAS</span> <span class="o">=</span> <span class="p">{</span>
<a id="__codelineno-110-4" name="__codelineno-110-4" href="#__codelineno-110-4"></a>    <span class="s1">&#39;dev&#39;</span><span class="p">:</span> <span class="p">[</span><span class="s1">&#39;check-manifest&#39;</span><span class="p">],</span>
<a id="__codelineno-110-5" name="__codelineno-110-5" href="#__codelineno-110-5"></a>    <span class="s1">&#39;test&#39;</span><span class="p">:</span> <span class="p">[</span><span class="s1">&#39;coverage&#39;</span><span class="p">],</span>
<a id="__codelineno-110-6" name="__codelineno-110-6" href="#__codelineno-110-6"></a><span class="p">}</span>
<a id="__codelineno-110-7" name="__codelineno-110-7" href="#__codelineno-110-7"></a>
<a id="__codelineno-110-8" name="__codelineno-110-8" href="#__codelineno-110-8"></a><span class="n">setup</span><span class="p">(</span>
<a id="__codelineno-110-9" name="__codelineno-110-9" href="#__codelineno-110-9"></a>    <span class="o">...</span>
<a id="__codelineno-110-10" name="__codelineno-110-10" href="#__codelineno-110-10"></a>    <span class="n">extras_require</span><span class="o">=</span><span class="n">EXTRAS</span><span class="p">,</span>
<a id="__codelineno-110-11" name="__codelineno-110-11" href="#__codelineno-110-11"></a>    <span class="o">...</span>
<a id="__codelineno-110-12" name="__codelineno-110-12" href="#__codelineno-110-12"></a><span class="p">)</span>
</code></pre></div>
<p>用户可以通过以下命令安装可选依赖: </p>
<div class="highlight"><pre><span></span><code><a id="__codelineno-111-1" name="__codelineno-111-1" href="#__codelineno-111-1"></a>pip<span class="w"> </span>install<span class="w"> </span>your_package_name<span class="o">[</span>dev<span class="o">]</span>
<a id="__codelineno-111-2" name="__codelineno-111-2" href="#__codelineno-111-2"></a>pip<span class="w"> </span>install<span class="w"> </span>your_package_name<span class="o">[</span>test<span class="o">]</span>
</code></pre></div>
</details>
</li>
</ul>
<h5 id="_22">其他参数</h5>
<p>简短解释一下<code>setup()</code>函数中的其他参数以及复习一下已经讲过的参数:</p>
<ul>
<li>
<p><code>name</code>: 包的名称</p>
<details class="tip" open="open">
<summary>Tip</summary>
<p>包的名称中的连字符用<code>-</code>, 而实际包的名字中的连字符用<code>_</code>, 因为导入包的时候带有<code>-</code>的包需要用到<code>importlib</code>, 比较麻烦.</p>
</details>
</li>
<li>
<p><code>verision</code>: 包的版本号</p>
</li>
<li><code>description</code>: 包的简短描述</li>
<li><code>long_description</code>: 包的详细描述</li>
<li><code>long_description_content_type</code>: 包的详细描述的文件类型, 一般是<code>text/markdown</code></li>
<li><code>author</code>: 包的作者</li>
<li><code>author_email</code>: 包的作者的邮箱</li>
<li><code>python_requires</code>: 指定Python的版本范围</li>
<li><code>url</code>: 包的主页地址</li>
<li><code>packages</code>: 指定要打的包, 可以使用<code>find_packages()</code>函数自动寻找要打的包</li>
<li><code>py_modules</code>: 如果是单个模块, 使用的不是<code>package</code>而是<code>py_modules</code></li>
<li><code>entry_point</code>: 定义包的命令行脚本入口点</li>
<li><code>install_requires</code>: 指定核心依赖</li>
<li><code>extras_require</code>: 指定可选依赖</li>
<li><code>include_package_data</code>: 设置是否可以包含其他文件</li>
<li><code>license</code>: 包的许可证</li>
<li><code>classifiers</code>: 分类标签, 帮助用户找到你的包</li>
<li><code>cmdclass</code>: 支持在命令行运行自定义命令</li>
</ul>
<h2 id="_23">上传</h2>
<h3 id="twine"><code>twine</code>上传</h3>
<details class="warning" open="open">
<summary>注意</summary>
<p>需要先安装<code>twine</code>: <code>pip install twine</code>.</p>
</details>
<p>可以通过<code>twine upload dist/*</code>命令将<code>dist</code>文件夹下的所有包都上传到<a href="https://pypi.org">PYPI</a>.</p>
<details class="tip" open="open">
<summary>Tip</summary>
<ul>
<li>
<p>可以先上传到<a href="https://test.pypi.org/">TestPYPI</a>检测一下自己的包是否正常, 是否可以通过<code>pip</code>下载安装. </p>
<div class="highlight"><pre><span></span><code><a id="__codelineno-112-1" name="__codelineno-112-1" href="#__codelineno-112-1"></a>twine upload --repository testpypi dist/*
</code></pre></div>
</li>
<li>
<p>可以在用户目录<code>~</code>下创建一个文件<code>.pypirc</code>保存自己的Token: </p>
<div class="highlight"><pre><span></span><code><a id="__codelineno-113-1" name="__codelineno-113-1" href="#__codelineno-113-1"></a>[pypi]
<a id="__codelineno-113-2" name="__codelineno-113-2" href="#__codelineno-113-2"></a>username = __token__
<a id="__codelineno-113-3" name="__codelineno-113-3" href="#__codelineno-113-3"></a>password = [token]
<a id="__codelineno-113-4" name="__codelineno-113-4" href="#__codelineno-113-4"></a>
<a id="__codelineno-113-5" name="__codelineno-113-5" href="#__codelineno-113-5"></a>[testpypi]
<a id="__codelineno-113-6" name="__codelineno-113-6" href="#__codelineno-113-6"></a>username = __token__
<a id="__codelineno-113-7" name="__codelineno-113-7" href="#__codelineno-113-7"></a>password = [token]
</code></pre></div>
</li>
</ul>
</details>
<h2 id="_24">工具</h2>
<h3 id="poetry">poetry</h3>
<p>poetry是一个Python的依赖, 环境管理和打包工具.</p>
<h4 id="_25">安装依赖<sup id="fnref:11"><a class="footnote-ref" href="#fn:11">11</a></sup></h4>
<p>可以通过<code>poetry install</code>安装所有的依赖, 执行该命令后, 会有两种情况:</p>
<ol>
<li>
<p>当前目录下没有<code>poetry.lock</code>文件, 有<code>pyproject.toml</code>文件</p>
<p>poetry会解析<code>pyproject.toml</code>文件中的依赖并下载条件范围内最新的依赖. 完成安装后, 将所有依赖的版本记录在<code>poetry.lock</code>文件中. </p>
</li>
<li>
<p>当前目录下有<code>poetry.lock</code>文件, 有<code>pyproject.toml</code>文件</p>
<p>poetry会解析<code>pyproject.toml</code>文件中的依赖, 并查看<code>poetry.lock</code>文件</p>
<ol>
<li>若<code>poetry.lock</code>中的相应依赖的版本号在<code>pyproject.toml</code>声明的范围内, 下载<code>poetry.lock</code>的版本</li>
<li>若<code>poetry.lock</code>中的相应依赖的版本号不在<code>pyproject.toml</code>声明的范围内, 报错</li>
</ol>
</li>
</ol>
<p>2a见下方例子1, 2, 3; 2b见下方例子4.</p>
<details class="warning" open="open">
<summary>注意</summary>
<p>在2a.情况下, 每次执行<code>poetry install</code>之前会检查<code>pyproject.toml</code>文件有无变化, 具体的原理是对去掉空格后的<code>pyproject.toml</code>文件求哈希值, 并记录在<code>poetry.lock</code>文件的<code>content-hash</code>字段中, 若修改<code>pyproject.toml</code>文件后没有更新<code>content-hash</code>, 那么执行<code>poetry install</code>会报错. </p>
<p>解决方法: 修改<code>pyproject.toml</code>文件后, 使用<code>poetry lock --no-update</code>更新这个哈希值, 需要注意的是这个命令和<code>poetry lock</code>的区别: </p>
<ul>
<li><code>poetry lock</code>: 解析<code>pyproject.toml</code>文件中的依赖, 将条件范围内最新的依赖版本号更新到<code>poetry.lock</code>文件中</li>
<li><code>poetry lock --no-update</code>: 解析<code>pyproject.toml</code>文件中的依赖<ul>
<li>若<code>poetry.lock</code>中的相应依赖的版本号在<code>pyproject.toml</code>声明的范围内, 保持<code>poetry.lock</code>的该版本号不变, 见下方例子1</li>
<li>若<code>poetry.lock</code>中的相应依赖的版本号不在<code>pyproject.toml</code>声明的范围内, 更新<code>poetry.lock</code>中的相应依赖的版本号为<code>pyproject.toml</code>条件范围内最新的依赖版本号, 见下方例子3</li>
</ul>
</li>
</ul>
<p>使用<code>poetry lock --no-update</code>更新这个哈希值的原因是因为我们不希望<code>poetry.lock</code>中在<code>pyproject.toml</code>条件范围内的版本号发生变化, 只希望更新<code>content-hash</code>字段的值(注意两个命令都会更新<code>content-hash</code>). </p>
</details>
<details class="tip" open="open">
<summary>Tip</summary>
<ul>
<li>若项目无需打包, 可以在<code>pyproject.toml</code>文件在<code>[tool.poetry]</code>中设置<code>package-mode = false</code></li>
<li>
<p>若需要在本地生成虚拟环境, 可以在<code>poetry.toml</code>文件中设置:</p>
<div class="highlight"><pre><span></span><code><a id="__codelineno-114-1" name="__codelineno-114-1" href="#__codelineno-114-1"></a>[virtualenvs]
<a id="__codelineno-114-2" name="__codelineno-114-2" href="#__codelineno-114-2"></a>in-project = true
</code></pre></div>
</li>
</ul>
</details>
<details class="example" open="open">
<summary>例子</summary>
<div class="tabbed-set tabbed-alternate" data-tabs="8:4"><input checked="checked" id="__tabbed_8_1" name="__tabbed_8" type="radio" /><input id="__tabbed_8_2" name="__tabbed_8" type="radio" /><input id="__tabbed_8_3" name="__tabbed_8" type="radio" /><input id="__tabbed_8_4" name="__tabbed_8" type="radio" /><div class="tabbed-labels"><label for="__tabbed_8_1">例子1</label><label for="__tabbed_8_2">例子2</label><label for="__tabbed_8_3">例子3</label><label for="__tabbed_8_4">例子4</label></div>
<div class="tabbed-content">
<div class="tabbed-block">
<p>结构:</p>
<div class="highlight"><pre><span></span><code><a id="__codelineno-115-1" name="__codelineno-115-1" href="#__codelineno-115-1"></a>.
<a id="__codelineno-115-2" name="__codelineno-115-2" href="#__codelineno-115-2"></a>├── poetry.lock
<a id="__codelineno-115-3" name="__codelineno-115-3" href="#__codelineno-115-3"></a>└── pyproject.toml
</code></pre></div>
<p><code>pyproject.toml</code>文件:</p>
<div class="highlight"><pre><span></span><code><a id="__codelineno-116-1" name="__codelineno-116-1" href="#__codelineno-116-1"></a>[tool.poetry]
<a id="__codelineno-116-2" name="__codelineno-116-2" href="#__codelineno-116-2"></a>name = &quot;test&quot;
<a id="__codelineno-116-3" name="__codelineno-116-3" href="#__codelineno-116-3"></a>version = &quot;0.1.0&quot;
<a id="__codelineno-116-4" name="__codelineno-116-4" href="#__codelineno-116-4"></a>description = &quot;&quot;
<a id="__codelineno-116-5" name="__codelineno-116-5" href="#__codelineno-116-5"></a>authors = [&quot;wenzexu &lt;ricol.xwz@outlook.com&gt;&quot;]
<a id="__codelineno-116-6" name="__codelineno-116-6" href="#__codelineno-116-6"></a>package-mode = false
<a id="__codelineno-116-7" name="__codelineno-116-7" href="#__codelineno-116-7"></a>
<a id="__codelineno-116-8" name="__codelineno-116-8" href="#__codelineno-116-8"></a>[tool.poetry.dependencies]
<a id="__codelineno-116-9" name="__codelineno-116-9" href="#__codelineno-116-9"></a>python = &quot;^3.12&quot;
<a id="__codelineno-116-10" name="__codelineno-116-10" href="#__codelineno-116-10"></a><span class="hll">requests = &quot;2.10.0&quot;
</span><a id="__codelineno-116-11" name="__codelineno-116-11" href="#__codelineno-116-11"></a>
<a id="__codelineno-116-12" name="__codelineno-116-12" href="#__codelineno-116-12"></a>[build-system]
<a id="__codelineno-116-13" name="__codelineno-116-13" href="#__codelineno-116-13"></a>requires = [&quot;poetry-core&quot;]
<a id="__codelineno-116-14" name="__codelineno-116-14" href="#__codelineno-116-14"></a>build-backend = &quot;poetry.core.masonry.api&quot;
</code></pre></div>
<p><code>poetry.lock</code>文件:</p>
<div class="highlight"><pre><span></span><code><a id="__codelineno-117-1" name="__codelineno-117-1" href="#__codelineno-117-1"></a># This file is automatically @generated by Poetry 1.8.3 and should not be changed by hand.
<a id="__codelineno-117-2" name="__codelineno-117-2" href="#__codelineno-117-2"></a>
<a id="__codelineno-117-3" name="__codelineno-117-3" href="#__codelineno-117-3"></a>[[package]]
<a id="__codelineno-117-4" name="__codelineno-117-4" href="#__codelineno-117-4"></a>name = &quot;requests&quot;
<a id="__codelineno-117-5" name="__codelineno-117-5" href="#__codelineno-117-5"></a><span class="hll">version = &quot;2.10.0&quot;
</span><a id="__codelineno-117-6" name="__codelineno-117-6" href="#__codelineno-117-6"></a>description = &quot;Python HTTP for Humans.&quot;
<a id="__codelineno-117-7" name="__codelineno-117-7" href="#__codelineno-117-7"></a>optional = false
<a id="__codelineno-117-8" name="__codelineno-117-8" href="#__codelineno-117-8"></a>python-versions = &quot;*&quot;
<a id="__codelineno-117-9" name="__codelineno-117-9" href="#__codelineno-117-9"></a>files = [
<a id="__codelineno-117-10" name="__codelineno-117-10" href="#__codelineno-117-10"></a>    {file = &quot;requests-2.10.0-py2.py3-none-any.whl&quot;, hash = &quot;sha256:09bc1b5f3a56cd8c48d433213a8cba51a67d12936568f73b5f1793fcb0c0979e&quot;},
<a id="__codelineno-117-11" name="__codelineno-117-11" href="#__codelineno-117-11"></a>    {file = &quot;requests-2.10.0.tar.gz&quot;, hash = &quot;sha256:63f1815788157130cee16a933b2ee184038e975f0017306d723ac326b5525b54&quot;},
<a id="__codelineno-117-12" name="__codelineno-117-12" href="#__codelineno-117-12"></a>]
<a id="__codelineno-117-13" name="__codelineno-117-13" href="#__codelineno-117-13"></a>
<a id="__codelineno-117-14" name="__codelineno-117-14" href="#__codelineno-117-14"></a>[package.extras]
<a id="__codelineno-117-15" name="__codelineno-117-15" href="#__codelineno-117-15"></a>security = [&quot;ndg-httpsclient&quot;, &quot;pyOpenSSL (&gt;=0.13)&quot;, &quot;pyasn1&quot;]
<a id="__codelineno-117-16" name="__codelineno-117-16" href="#__codelineno-117-16"></a>socks = [&quot;PySocks (&gt;=1.5.6)&quot;]
<a id="__codelineno-117-17" name="__codelineno-117-17" href="#__codelineno-117-17"></a>
<a id="__codelineno-117-18" name="__codelineno-117-18" href="#__codelineno-117-18"></a>[metadata]
<a id="__codelineno-117-19" name="__codelineno-117-19" href="#__codelineno-117-19"></a>lock-version = &quot;2.0&quot;
<a id="__codelineno-117-20" name="__codelineno-117-20" href="#__codelineno-117-20"></a>python-versions = &quot;^3.12&quot;
<a id="__codelineno-117-21" name="__codelineno-117-21" href="#__codelineno-117-21"></a><span class="hll">content-hash = &quot;25c064eaf29678762031b94d64762b5e9c717f8c86cb22a24b35a9e469c992a8&quot;
</span></code></pre></div>
<p>现在, 手动修改<code>pyproject.toml</code>文件:</p>
<div class="highlight"><pre><span></span><code><a id="__codelineno-118-1" name="__codelineno-118-1" href="#__codelineno-118-1"></a>[tool.poetry]
<a id="__codelineno-118-2" name="__codelineno-118-2" href="#__codelineno-118-2"></a>name = &quot;test&quot;
<a id="__codelineno-118-3" name="__codelineno-118-3" href="#__codelineno-118-3"></a>version = &quot;0.1.0&quot;
<a id="__codelineno-118-4" name="__codelineno-118-4" href="#__codelineno-118-4"></a>description = &quot;&quot;
<a id="__codelineno-118-5" name="__codelineno-118-5" href="#__codelineno-118-5"></a>authors = [&quot;wenzexu &lt;ricol.xwz@outlook.com&gt;&quot;]
<a id="__codelineno-118-6" name="__codelineno-118-6" href="#__codelineno-118-6"></a>package-mode = false
<a id="__codelineno-118-7" name="__codelineno-118-7" href="#__codelineno-118-7"></a>
<a id="__codelineno-118-8" name="__codelineno-118-8" href="#__codelineno-118-8"></a>[tool.poetry.dependencies]
<a id="__codelineno-118-9" name="__codelineno-118-9" href="#__codelineno-118-9"></a>python = &quot;^3.12&quot;
<a id="__codelineno-118-10" name="__codelineno-118-10" href="#__codelineno-118-10"></a><span class="hll">requests = &quot;&gt;=2.10.0&quot;
</span><a id="__codelineno-118-11" name="__codelineno-118-11" href="#__codelineno-118-11"></a>
<a id="__codelineno-118-12" name="__codelineno-118-12" href="#__codelineno-118-12"></a>[build-system]
<a id="__codelineno-118-13" name="__codelineno-118-13" href="#__codelineno-118-13"></a>requires = [&quot;poetry-core&quot;]
<a id="__codelineno-118-14" name="__codelineno-118-14" href="#__codelineno-118-14"></a>build-backend = &quot;poetry.core.masonry.api&quot; 
</code></pre></div>
<p>执行<code>poetry install</code>: </p>
<div class="highlight"><pre><span></span><code><a id="__codelineno-119-1" name="__codelineno-119-1" href="#__codelineno-119-1"></a>$ poetry install
<a id="__codelineno-119-2" name="__codelineno-119-2" href="#__codelineno-119-2"></a>Installing dependencies from lock file
<a id="__codelineno-119-3" name="__codelineno-119-3" href="#__codelineno-119-3"></a>
<a id="__codelineno-119-4" name="__codelineno-119-4" href="#__codelineno-119-4"></a>pyproject.toml changed significantly since poetry.lock was last generated. Run `poetry lock [--no-update]` to fix the lock file.
</code></pre></div>
<p>这就是上面注意中提到的由于<code>content-hash</code>发生改变导致安装失败. 通过<code>poetry lock --no-update</code>更新哈希值:</p>
<div class="highlight"><pre><span></span><code><a id="__codelineno-120-1" name="__codelineno-120-1" href="#__codelineno-120-1"></a>$ poetry lock --no-update
<a id="__codelineno-120-2" name="__codelineno-120-2" href="#__codelineno-120-2"></a>Resolving dependencies... (0.1s)
<a id="__codelineno-120-3" name="__codelineno-120-3" href="#__codelineno-120-3"></a>
<a id="__codelineno-120-4" name="__codelineno-120-4" href="#__codelineno-120-4"></a>Writing lock file
</code></pre></div>
<p>我们来看一下新的<code>content-hash</code>: </p>
<div class="highlight"><pre><span></span><code><a id="__codelineno-121-1" name="__codelineno-121-1" href="#__codelineno-121-1"></a># This file is automatically @generated by Poetry 1.8.3 and should not be changed by hand.
<a id="__codelineno-121-2" name="__codelineno-121-2" href="#__codelineno-121-2"></a>
<a id="__codelineno-121-3" name="__codelineno-121-3" href="#__codelineno-121-3"></a>[[package]]
<a id="__codelineno-121-4" name="__codelineno-121-4" href="#__codelineno-121-4"></a>name = &quot;requests&quot;
<a id="__codelineno-121-5" name="__codelineno-121-5" href="#__codelineno-121-5"></a><span class="hll">version = &quot;2.10.0&quot;
</span><a id="__codelineno-121-6" name="__codelineno-121-6" href="#__codelineno-121-6"></a>description = &quot;Python HTTP for Humans.&quot;
<a id="__codelineno-121-7" name="__codelineno-121-7" href="#__codelineno-121-7"></a>optional = false
<a id="__codelineno-121-8" name="__codelineno-121-8" href="#__codelineno-121-8"></a>python-versions = &quot;*&quot;
<a id="__codelineno-121-9" name="__codelineno-121-9" href="#__codelineno-121-9"></a>files = [
<a id="__codelineno-121-10" name="__codelineno-121-10" href="#__codelineno-121-10"></a>    {file = &quot;requests-2.10.0-py2.py3-none-any.whl&quot;, hash = &quot;sha256:09bc1b5f3a56cd8c48d433213a8cba51a67d12936568f73b5f1793fcb0c0979e&quot;},
<a id="__codelineno-121-11" name="__codelineno-121-11" href="#__codelineno-121-11"></a>    {file = &quot;requests-2.10.0.tar.gz&quot;, hash = &quot;sha256:63f1815788157130cee16a933b2ee184038e975f0017306d723ac326b5525b54&quot;},
<a id="__codelineno-121-12" name="__codelineno-121-12" href="#__codelineno-121-12"></a>]
<a id="__codelineno-121-13" name="__codelineno-121-13" href="#__codelineno-121-13"></a>
<a id="__codelineno-121-14" name="__codelineno-121-14" href="#__codelineno-121-14"></a>[package.extras]
<a id="__codelineno-121-15" name="__codelineno-121-15" href="#__codelineno-121-15"></a>security = [&quot;ndg-httpsclient&quot;, &quot;pyOpenSSL (&gt;=0.13)&quot;, &quot;pyasn1&quot;]
<a id="__codelineno-121-16" name="__codelineno-121-16" href="#__codelineno-121-16"></a>socks = [&quot;PySocks (&gt;=1.5.6)&quot;]
<a id="__codelineno-121-17" name="__codelineno-121-17" href="#__codelineno-121-17"></a>
<a id="__codelineno-121-18" name="__codelineno-121-18" href="#__codelineno-121-18"></a>[metadata]
<a id="__codelineno-121-19" name="__codelineno-121-19" href="#__codelineno-121-19"></a>lock-version = &quot;2.0&quot;
<a id="__codelineno-121-20" name="__codelineno-121-20" href="#__codelineno-121-20"></a>python-versions = &quot;^3.12&quot;
<a id="__codelineno-121-21" name="__codelineno-121-21" href="#__codelineno-121-21"></a><span class="hll">content-hash = &quot;6363722bb38e3bb0c73ccbb1763cce8684871565683659092475ba2763c452a3&quot;
</span></code></pre></div>
<p>可以看到哈希值改变了, 但是版本号没变. 再次执行<code>poetry install</code>, 下载<code>poetry.lock</code>对应的版本, 即<code>2.10.0</code>:</p>
<div class="highlight"><pre><span></span><code><a id="__codelineno-122-1" name="__codelineno-122-1" href="#__codelineno-122-1"></a>$ poetry install
<a id="__codelineno-122-2" name="__codelineno-122-2" href="#__codelineno-122-2"></a>Installing dependencies from lock file
<a id="__codelineno-122-3" name="__codelineno-122-3" href="#__codelineno-122-3"></a>
<a id="__codelineno-122-4" name="__codelineno-122-4" href="#__codelineno-122-4"></a>Package operations: 1 install, 0 updates, 0 removals
<a id="__codelineno-122-5" name="__codelineno-122-5" href="#__codelineno-122-5"></a>
<a id="__codelineno-122-6" name="__codelineno-122-6" href="#__codelineno-122-6"></a>- Installing requests (2.10.0)
</code></pre></div>
<p>可以看到成功安装.</p>
</div>
<div class="tabbed-block">
<p>在实际开发过程中, 若某模块推出新的版本的时候, 如<code>requests</code>模块我们在<code>pyproject.toml</code>中定义的条件范围是<code>&gt;=2.32.2</code>, 若现在出现了一个新的版本<code>2.32.4</code>, 而<code>poetry.lock</code>中的版本是<code>2.32.3</code>, 这个时候我们不需要去执行<code>poetry lock --no-update</code>, 因为<code>pyproject.toml</code>文件没有发生改变, 当我们执行<code>poetry install</code>之后, 安装的还是<code>2.32.3</code>这个版本, 也就是情况<code>2a</code></p>
</div>
<div class="tabbed-block">
<p>结构:</p>
<div class="highlight"><pre><span></span><code><a id="__codelineno-123-1" name="__codelineno-123-1" href="#__codelineno-123-1"></a>.
<a id="__codelineno-123-2" name="__codelineno-123-2" href="#__codelineno-123-2"></a>├── poetry.lock
<a id="__codelineno-123-3" name="__codelineno-123-3" href="#__codelineno-123-3"></a>└── pyproject.toml
</code></pre></div>
<p><code>pyproject.toml</code>文件:</p>
<div class="highlight"><pre><span></span><code><a id="__codelineno-124-1" name="__codelineno-124-1" href="#__codelineno-124-1"></a>[tool.poetry]
<a id="__codelineno-124-2" name="__codelineno-124-2" href="#__codelineno-124-2"></a>name = &quot;test&quot;
<a id="__codelineno-124-3" name="__codelineno-124-3" href="#__codelineno-124-3"></a>version = &quot;0.1.0&quot;
<a id="__codelineno-124-4" name="__codelineno-124-4" href="#__codelineno-124-4"></a>description = &quot;&quot;
<a id="__codelineno-124-5" name="__codelineno-124-5" href="#__codelineno-124-5"></a>authors = [&quot;wenzexu &lt;ricol.xwz@outlook.com&gt;&quot;]
<a id="__codelineno-124-6" name="__codelineno-124-6" href="#__codelineno-124-6"></a>package-mode = false
<a id="__codelineno-124-7" name="__codelineno-124-7" href="#__codelineno-124-7"></a>
<a id="__codelineno-124-8" name="__codelineno-124-8" href="#__codelineno-124-8"></a>[tool.poetry.dependencies]
<a id="__codelineno-124-9" name="__codelineno-124-9" href="#__codelineno-124-9"></a>python = &quot;^3.12&quot;
<a id="__codelineno-124-10" name="__codelineno-124-10" href="#__codelineno-124-10"></a><span class="hll">requests = &quot;2.10.0&quot;
</span><a id="__codelineno-124-11" name="__codelineno-124-11" href="#__codelineno-124-11"></a>
<a id="__codelineno-124-12" name="__codelineno-124-12" href="#__codelineno-124-12"></a>[build-system]
<a id="__codelineno-124-13" name="__codelineno-124-13" href="#__codelineno-124-13"></a>requires = [&quot;poetry-core&quot;]
<a id="__codelineno-124-14" name="__codelineno-124-14" href="#__codelineno-124-14"></a>build-backend = &quot;poetry.core.masonry.api&quot;
</code></pre></div>
<p><code>poetry.lock</code>文件:</p>
<div class="highlight"><pre><span></span><code><a id="__codelineno-125-1" name="__codelineno-125-1" href="#__codelineno-125-1"></a># This file is automatically @generated by Poetry 1.8.3 and should not be changed by hand.
<a id="__codelineno-125-2" name="__codelineno-125-2" href="#__codelineno-125-2"></a>
<a id="__codelineno-125-3" name="__codelineno-125-3" href="#__codelineno-125-3"></a>[[package]]
<a id="__codelineno-125-4" name="__codelineno-125-4" href="#__codelineno-125-4"></a>name = &quot;requests&quot;
<a id="__codelineno-125-5" name="__codelineno-125-5" href="#__codelineno-125-5"></a><span class="hll">version = &quot;2.10.0&quot;
</span><a id="__codelineno-125-6" name="__codelineno-125-6" href="#__codelineno-125-6"></a>description = &quot;Python HTTP for Humans.&quot;
<a id="__codelineno-125-7" name="__codelineno-125-7" href="#__codelineno-125-7"></a>optional = false
<a id="__codelineno-125-8" name="__codelineno-125-8" href="#__codelineno-125-8"></a>python-versions = &quot;*&quot;
<a id="__codelineno-125-9" name="__codelineno-125-9" href="#__codelineno-125-9"></a>files = [
<a id="__codelineno-125-10" name="__codelineno-125-10" href="#__codelineno-125-10"></a>    {file = &quot;requests-2.10.0-py2.py3-none-any.whl&quot;, hash = &quot;sha256:09bc1b5f3a56cd8c48d433213a8cba51a67d12936568f73b5f1793fcb0c0979e&quot;},
<a id="__codelineno-125-11" name="__codelineno-125-11" href="#__codelineno-125-11"></a>    {file = &quot;requests-2.10.0.tar.gz&quot;, hash = &quot;sha256:63f1815788157130cee16a933b2ee184038e975f0017306d723ac326b5525b54&quot;},
<a id="__codelineno-125-12" name="__codelineno-125-12" href="#__codelineno-125-12"></a>]
<a id="__codelineno-125-13" name="__codelineno-125-13" href="#__codelineno-125-13"></a>
<a id="__codelineno-125-14" name="__codelineno-125-14" href="#__codelineno-125-14"></a>[package.extras]
<a id="__codelineno-125-15" name="__codelineno-125-15" href="#__codelineno-125-15"></a>security = [&quot;ndg-httpsclient&quot;, &quot;pyOpenSSL (&gt;=0.13)&quot;, &quot;pyasn1&quot;]
<a id="__codelineno-125-16" name="__codelineno-125-16" href="#__codelineno-125-16"></a>socks = [&quot;PySocks (&gt;=1.5.6)&quot;]
<a id="__codelineno-125-17" name="__codelineno-125-17" href="#__codelineno-125-17"></a>
<a id="__codelineno-125-18" name="__codelineno-125-18" href="#__codelineno-125-18"></a>[metadata]
<a id="__codelineno-125-19" name="__codelineno-125-19" href="#__codelineno-125-19"></a>lock-version = &quot;2.0&quot;
<a id="__codelineno-125-20" name="__codelineno-125-20" href="#__codelineno-125-20"></a>python-versions = &quot;^3.12&quot;
<a id="__codelineno-125-21" name="__codelineno-125-21" href="#__codelineno-125-21"></a><span class="hll">content-hash = &quot;25c064eaf29678762031b94d64762b5e9c717f8c86cb22a24b35a9e469c992a8&quot;
</span></code></pre></div>
<p>现在, 手动修改<code>pyproject.toml</code>文件:</p>
<div class="highlight"><pre><span></span><code><a id="__codelineno-126-1" name="__codelineno-126-1" href="#__codelineno-126-1"></a>[tool.poetry]
<a id="__codelineno-126-2" name="__codelineno-126-2" href="#__codelineno-126-2"></a>name = &quot;test&quot;
<a id="__codelineno-126-3" name="__codelineno-126-3" href="#__codelineno-126-3"></a>version = &quot;0.1.0&quot;
<a id="__codelineno-126-4" name="__codelineno-126-4" href="#__codelineno-126-4"></a>description = &quot;&quot;
<a id="__codelineno-126-5" name="__codelineno-126-5" href="#__codelineno-126-5"></a>authors = [&quot;wenzexu &lt;ricol.xwz@outlook.com&gt;&quot;]
<a id="__codelineno-126-6" name="__codelineno-126-6" href="#__codelineno-126-6"></a>package-mode = false
<a id="__codelineno-126-7" name="__codelineno-126-7" href="#__codelineno-126-7"></a>
<a id="__codelineno-126-8" name="__codelineno-126-8" href="#__codelineno-126-8"></a>[tool.poetry.dependencies]
<a id="__codelineno-126-9" name="__codelineno-126-9" href="#__codelineno-126-9"></a>python = &quot;^3.12&quot;
<a id="__codelineno-126-10" name="__codelineno-126-10" href="#__codelineno-126-10"></a><span class="hll">requests = &quot;&lt;2.9.0&quot;
</span><a id="__codelineno-126-11" name="__codelineno-126-11" href="#__codelineno-126-11"></a>
<a id="__codelineno-126-12" name="__codelineno-126-12" href="#__codelineno-126-12"></a>[build-system]
<a id="__codelineno-126-13" name="__codelineno-126-13" href="#__codelineno-126-13"></a>requires = [&quot;poetry-core&quot;]
<a id="__codelineno-126-14" name="__codelineno-126-14" href="#__codelineno-126-14"></a>build-backend = &quot;poetry.core.masonry.api&quot; 
</code></pre></div>
<p>执行<code>poetry install</code>: </p>
<div class="highlight"><pre><span></span><code><a id="__codelineno-127-1" name="__codelineno-127-1" href="#__codelineno-127-1"></a>$ poetry install
<a id="__codelineno-127-2" name="__codelineno-127-2" href="#__codelineno-127-2"></a>Installing dependencies from lock file
<a id="__codelineno-127-3" name="__codelineno-127-3" href="#__codelineno-127-3"></a>
<a id="__codelineno-127-4" name="__codelineno-127-4" href="#__codelineno-127-4"></a>pyproject.toml changed significantly since poetry.lock was last generated. Run `poetry lock [--no-update]` to fix the lock file.
</code></pre></div>
<p>这就是上面注意中提到的由于<code>content-hash</code>发生改变导致安装失败. 通过<code>poetry lock --no-update</code>更新哈希值:</p>
<div class="highlight"><pre><span></span><code><a id="__codelineno-128-1" name="__codelineno-128-1" href="#__codelineno-128-1"></a>$ poetry lock --no-update
<a id="__codelineno-128-2" name="__codelineno-128-2" href="#__codelineno-128-2"></a>Resolving dependencies... (0.8s)
<a id="__codelineno-128-3" name="__codelineno-128-3" href="#__codelineno-128-3"></a>
<a id="__codelineno-128-4" name="__codelineno-128-4" href="#__codelineno-128-4"></a>Writing lock file
</code></pre></div>
<p>我们来看一下新的<code>content-hash</code>: </p>
<div class="highlight"><pre><span></span><code><a id="__codelineno-129-1" name="__codelineno-129-1" href="#__codelineno-129-1"></a># This file is automatically @generated by Poetry 1.8.3 and should not be changed by hand.
<a id="__codelineno-129-2" name="__codelineno-129-2" href="#__codelineno-129-2"></a>
<a id="__codelineno-129-3" name="__codelineno-129-3" href="#__codelineno-129-3"></a>[[package]]
<a id="__codelineno-129-4" name="__codelineno-129-4" href="#__codelineno-129-4"></a>name = &quot;requests&quot;
<a id="__codelineno-129-5" name="__codelineno-129-5" href="#__codelineno-129-5"></a><span class="hll">version = &quot;2.8.1&quot;
</span><a id="__codelineno-129-6" name="__codelineno-129-6" href="#__codelineno-129-6"></a>description = &quot;Python HTTP for Humans.&quot;
<a id="__codelineno-129-7" name="__codelineno-129-7" href="#__codelineno-129-7"></a>optional = false
<a id="__codelineno-129-8" name="__codelineno-129-8" href="#__codelineno-129-8"></a>python-versions = &quot;*&quot;
<a id="__codelineno-129-9" name="__codelineno-129-9" href="#__codelineno-129-9"></a>files = [
<a id="__codelineno-129-10" name="__codelineno-129-10" href="#__codelineno-129-10"></a>    {file = &quot;requests-2.8.1-py2.py3-none-any.whl&quot;, hash = &quot;sha256:89f1b1f25dcd7b68f514e8d341a5b2eb466f960ae756822eaab480a3c1a81c28&quot;},
<a id="__codelineno-129-11" name="__codelineno-129-11" href="#__codelineno-129-11"></a>    {file = &quot;requests-2.8.1.tar.gz&quot;, hash = &quot;sha256:84fe8d5bf4dcdcc49002446c47a146d17ac10facf00d9086659064ac43b6c25b&quot;},
<a id="__codelineno-129-12" name="__codelineno-129-12" href="#__codelineno-129-12"></a>]
<a id="__codelineno-129-13" name="__codelineno-129-13" href="#__codelineno-129-13"></a>
<a id="__codelineno-129-14" name="__codelineno-129-14" href="#__codelineno-129-14"></a>[package.extras]
<a id="__codelineno-129-15" name="__codelineno-129-15" href="#__codelineno-129-15"></a>security = [&quot;ndg-httpsclient&quot;, &quot;pyOpenSSL&quot;, &quot;pyasn1&quot;]
<a id="__codelineno-129-16" name="__codelineno-129-16" href="#__codelineno-129-16"></a>
<a id="__codelineno-129-17" name="__codelineno-129-17" href="#__codelineno-129-17"></a>[metadata]
<a id="__codelineno-129-18" name="__codelineno-129-18" href="#__codelineno-129-18"></a>lock-version = &quot;2.0&quot;
<a id="__codelineno-129-19" name="__codelineno-129-19" href="#__codelineno-129-19"></a>python-versions = &quot;^3.12&quot;
<a id="__codelineno-129-20" name="__codelineno-129-20" href="#__codelineno-129-20"></a><span class="hll">content-hash = &quot;863f6f137ec905c3cca085aef062a74a42f9b9186d74d8ca18a26d70ba58e86a&quot;
</span></code></pre></div>
<p>可以看到哈希值改变了, 版本号也改变了, 变成了<code>pyproject.toml</code>中条件范围内的最新版本, 即<code>2.8.1</code>版本, 再次执行<code>poetry.install</code>, 对应情况2a, 这个时候的<code>poetry.lock</code>中相应依赖的版本号在<code>pyproject.toml</code>声明的范围内, 所以下载的是<code>2.8.1</code>版本的依赖.</p>
<div class="highlight"><pre><span></span><code><a id="__codelineno-130-1" name="__codelineno-130-1" href="#__codelineno-130-1"></a>$ poetry install
<a id="__codelineno-130-2" name="__codelineno-130-2" href="#__codelineno-130-2"></a>Installing dependencies from lock file
<a id="__codelineno-130-3" name="__codelineno-130-3" href="#__codelineno-130-3"></a>
<a id="__codelineno-130-4" name="__codelineno-130-4" href="#__codelineno-130-4"></a>Package operations: 1 install, 0 updates, 0 removals
<a id="__codelineno-130-5" name="__codelineno-130-5" href="#__codelineno-130-5"></a>
<a id="__codelineno-130-6" name="__codelineno-130-6" href="#__codelineno-130-6"></a>- Installing requests (2.8.1)
</code></pre></div>
</div>
<div class="tabbed-block">
<p>结构:</p>
<div class="highlight"><pre><span></span><code><a id="__codelineno-131-1" name="__codelineno-131-1" href="#__codelineno-131-1"></a>.
<a id="__codelineno-131-2" name="__codelineno-131-2" href="#__codelineno-131-2"></a>├── poetry.lock
<a id="__codelineno-131-3" name="__codelineno-131-3" href="#__codelineno-131-3"></a>└── pyproject.toml
</code></pre></div>
<p><code>pyproject.toml</code>文件:</p>
<div class="highlight"><pre><span></span><code><a id="__codelineno-132-1" name="__codelineno-132-1" href="#__codelineno-132-1"></a>[tool.poetry]
<a id="__codelineno-132-2" name="__codelineno-132-2" href="#__codelineno-132-2"></a>name = &quot;test&quot;
<a id="__codelineno-132-3" name="__codelineno-132-3" href="#__codelineno-132-3"></a>version = &quot;0.1.0&quot;
<a id="__codelineno-132-4" name="__codelineno-132-4" href="#__codelineno-132-4"></a>description = &quot;&quot;
<a id="__codelineno-132-5" name="__codelineno-132-5" href="#__codelineno-132-5"></a>authors = [&quot;wenzexu &lt;ricol.xwz@outlook.com&gt;&quot;]
<a id="__codelineno-132-6" name="__codelineno-132-6" href="#__codelineno-132-6"></a>package-mode = false
<a id="__codelineno-132-7" name="__codelineno-132-7" href="#__codelineno-132-7"></a>
<a id="__codelineno-132-8" name="__codelineno-132-8" href="#__codelineno-132-8"></a>[tool.poetry.dependencies]
<a id="__codelineno-132-9" name="__codelineno-132-9" href="#__codelineno-132-9"></a>python = &quot;^3.12&quot;
<a id="__codelineno-132-10" name="__codelineno-132-10" href="#__codelineno-132-10"></a><span class="hll">requests = &quot;2.10.0&quot;
</span><a id="__codelineno-132-11" name="__codelineno-132-11" href="#__codelineno-132-11"></a>
<a id="__codelineno-132-12" name="__codelineno-132-12" href="#__codelineno-132-12"></a>[build-system]
<a id="__codelineno-132-13" name="__codelineno-132-13" href="#__codelineno-132-13"></a>requires = [&quot;poetry-core&quot;]
<a id="__codelineno-132-14" name="__codelineno-132-14" href="#__codelineno-132-14"></a>build-backend = &quot;poetry.core.masonry.api&quot;
</code></pre></div>
<p><code>poetry.lock</code>文件:</p>
<div class="highlight"><pre><span></span><code><a id="__codelineno-133-1" name="__codelineno-133-1" href="#__codelineno-133-1"></a># This file is automatically @generated by Poetry 1.8.3 and should not be changed by hand.
<a id="__codelineno-133-2" name="__codelineno-133-2" href="#__codelineno-133-2"></a>
<a id="__codelineno-133-3" name="__codelineno-133-3" href="#__codelineno-133-3"></a>[[package]]
<a id="__codelineno-133-4" name="__codelineno-133-4" href="#__codelineno-133-4"></a>name = &quot;requests&quot;
<a id="__codelineno-133-5" name="__codelineno-133-5" href="#__codelineno-133-5"></a><span class="hll">version = &quot;2.10.0&quot;
</span><a id="__codelineno-133-6" name="__codelineno-133-6" href="#__codelineno-133-6"></a>description = &quot;Python HTTP for Humans.&quot;
<a id="__codelineno-133-7" name="__codelineno-133-7" href="#__codelineno-133-7"></a>optional = false
<a id="__codelineno-133-8" name="__codelineno-133-8" href="#__codelineno-133-8"></a>python-versions = &quot;*&quot;
<a id="__codelineno-133-9" name="__codelineno-133-9" href="#__codelineno-133-9"></a>files = [
<a id="__codelineno-133-10" name="__codelineno-133-10" href="#__codelineno-133-10"></a>    {file = &quot;requests-2.10.0-py2.py3-none-any.whl&quot;, hash = &quot;sha256:09bc1b5f3a56cd8c48d433213a8cba51a67d12936568f73b5f1793fcb0c0979e&quot;},
<a id="__codelineno-133-11" name="__codelineno-133-11" href="#__codelineno-133-11"></a>    {file = &quot;requests-2.10.0.tar.gz&quot;, hash = &quot;sha256:63f1815788157130cee16a933b2ee184038e975f0017306d723ac326b5525b54&quot;},
<a id="__codelineno-133-12" name="__codelineno-133-12" href="#__codelineno-133-12"></a>]
<a id="__codelineno-133-13" name="__codelineno-133-13" href="#__codelineno-133-13"></a>
<a id="__codelineno-133-14" name="__codelineno-133-14" href="#__codelineno-133-14"></a>[package.extras]
<a id="__codelineno-133-15" name="__codelineno-133-15" href="#__codelineno-133-15"></a>security = [&quot;ndg-httpsclient&quot;, &quot;pyOpenSSL (&gt;=0.13)&quot;, &quot;pyasn1&quot;]
<a id="__codelineno-133-16" name="__codelineno-133-16" href="#__codelineno-133-16"></a>socks = [&quot;PySocks (&gt;=1.5.6)&quot;]
<a id="__codelineno-133-17" name="__codelineno-133-17" href="#__codelineno-133-17"></a>
<a id="__codelineno-133-18" name="__codelineno-133-18" href="#__codelineno-133-18"></a>[metadata]
<a id="__codelineno-133-19" name="__codelineno-133-19" href="#__codelineno-133-19"></a>lock-version = &quot;2.0&quot;
<a id="__codelineno-133-20" name="__codelineno-133-20" href="#__codelineno-133-20"></a>python-versions = &quot;^3.12&quot;
<a id="__codelineno-133-21" name="__codelineno-133-21" href="#__codelineno-133-21"></a><span class="hll">content-hash = &quot;25c064eaf29678762031b94d64762b5e9c717f8c86cb22a24b35a9e469c992a8&quot;
</span></code></pre></div>
<p>现在, 手动修改<code>pyproject.toml</code>文件:</p>
<div class="highlight"><pre><span></span><code><a id="__codelineno-134-1" name="__codelineno-134-1" href="#__codelineno-134-1"></a>[tool.poetry]
<a id="__codelineno-134-2" name="__codelineno-134-2" href="#__codelineno-134-2"></a>name = &quot;test&quot;
<a id="__codelineno-134-3" name="__codelineno-134-3" href="#__codelineno-134-3"></a>version = &quot;0.1.0&quot;
<a id="__codelineno-134-4" name="__codelineno-134-4" href="#__codelineno-134-4"></a>description = &quot;&quot;
<a id="__codelineno-134-5" name="__codelineno-134-5" href="#__codelineno-134-5"></a>authors = [&quot;wenzexu &lt;ricol.xwz@outlook.com&gt;&quot;]
<a id="__codelineno-134-6" name="__codelineno-134-6" href="#__codelineno-134-6"></a>package-mode = false
<a id="__codelineno-134-7" name="__codelineno-134-7" href="#__codelineno-134-7"></a>
<a id="__codelineno-134-8" name="__codelineno-134-8" href="#__codelineno-134-8"></a>[tool.poetry.dependencies]
<a id="__codelineno-134-9" name="__codelineno-134-9" href="#__codelineno-134-9"></a>python = &quot;^3.12&quot;
<a id="__codelineno-134-10" name="__codelineno-134-10" href="#__codelineno-134-10"></a><span class="hll">requests = &quot;&lt;2.9.0&quot;
</span><a id="__codelineno-134-11" name="__codelineno-134-11" href="#__codelineno-134-11"></a>
<a id="__codelineno-134-12" name="__codelineno-134-12" href="#__codelineno-134-12"></a>[build-system]
<a id="__codelineno-134-13" name="__codelineno-134-13" href="#__codelineno-134-13"></a>requires = [&quot;poetry-core&quot;]
<a id="__codelineno-134-14" name="__codelineno-134-14" href="#__codelineno-134-14"></a>build-backend = &quot;poetry.core.masonry.api&quot; 
</code></pre></div>
<p>这里, 不能使用<code>poetry lock --no-update</code>, 若执行, 会导致版本号变为<code>2.8.1</code>, 正常安装; 而我们模拟的是没有执行<code>poetry lock --no-update</code>的情况, 所以应该把修改后的<code>pyproject.toml</code>的哈希值粘贴到<code>poetry.lock</code>文件中(这个哈希值可以参考例子3):</p>
<div class="highlight"><pre><span></span><code><a id="__codelineno-135-1" name="__codelineno-135-1" href="#__codelineno-135-1"></a># This file is automatically @generated by Poetry 1.8.3 and should not be changed by hand.
<a id="__codelineno-135-2" name="__codelineno-135-2" href="#__codelineno-135-2"></a>
<a id="__codelineno-135-3" name="__codelineno-135-3" href="#__codelineno-135-3"></a>[[package]]
<a id="__codelineno-135-4" name="__codelineno-135-4" href="#__codelineno-135-4"></a>name = &quot;requests&quot;
<a id="__codelineno-135-5" name="__codelineno-135-5" href="#__codelineno-135-5"></a><span class="hll">version = &quot;2.10.0&quot;
</span><a id="__codelineno-135-6" name="__codelineno-135-6" href="#__codelineno-135-6"></a>description = &quot;Python HTTP for Humans.&quot;
<a id="__codelineno-135-7" name="__codelineno-135-7" href="#__codelineno-135-7"></a>optional = false
<a id="__codelineno-135-8" name="__codelineno-135-8" href="#__codelineno-135-8"></a>python-versions = &quot;*&quot;
<a id="__codelineno-135-9" name="__codelineno-135-9" href="#__codelineno-135-9"></a>files = [
<a id="__codelineno-135-10" name="__codelineno-135-10" href="#__codelineno-135-10"></a>    {file = &quot;requests-2.10.0-py2.py3-none-any.whl&quot;, hash = &quot;sha256:09bc1b5f3a56cd8c48d433213a8cba51a67d12936568f73b5f1793fcb0c0979e&quot;},
<a id="__codelineno-135-11" name="__codelineno-135-11" href="#__codelineno-135-11"></a>    {file = &quot;requests-2.10.0.tar.gz&quot;, hash = &quot;sha256:63f1815788157130cee16a933b2ee184038e975f0017306d723ac326b5525b54&quot;},
<a id="__codelineno-135-12" name="__codelineno-135-12" href="#__codelineno-135-12"></a>]
<a id="__codelineno-135-13" name="__codelineno-135-13" href="#__codelineno-135-13"></a>
<a id="__codelineno-135-14" name="__codelineno-135-14" href="#__codelineno-135-14"></a>[package.extras]
<a id="__codelineno-135-15" name="__codelineno-135-15" href="#__codelineno-135-15"></a>security = [&quot;ndg-httpsclient&quot;, &quot;pyOpenSSL (&gt;=0.13)&quot;, &quot;pyasn1&quot;]
<a id="__codelineno-135-16" name="__codelineno-135-16" href="#__codelineno-135-16"></a>socks = [&quot;PySocks (&gt;=1.5.6)&quot;]
<a id="__codelineno-135-17" name="__codelineno-135-17" href="#__codelineno-135-17"></a>
<a id="__codelineno-135-18" name="__codelineno-135-18" href="#__codelineno-135-18"></a>[metadata]
<a id="__codelineno-135-19" name="__codelineno-135-19" href="#__codelineno-135-19"></a>lock-version = &quot;2.0&quot;
<a id="__codelineno-135-20" name="__codelineno-135-20" href="#__codelineno-135-20"></a>python-versions = &quot;^3.12&quot;
<a id="__codelineno-135-21" name="__codelineno-135-21" href="#__codelineno-135-21"></a><span class="hll">content-hash = &quot;863f6f137ec905c3cca085aef062a74a42f9b9186d74d8ca18a26d70ba58e86a&quot;
</span></code></pre></div>
<p>执行<code>poetry install</code>:</p>
<div class="highlight"><pre><span></span><code><a id="__codelineno-136-1" name="__codelineno-136-1" href="#__codelineno-136-1"></a>$ poetry install
<a id="__codelineno-136-2" name="__codelineno-136-2" href="#__codelineno-136-2"></a>Installing dependencies from lock file
<a id="__codelineno-136-3" name="__codelineno-136-3" href="#__codelineno-136-3"></a>
<a id="__codelineno-136-4" name="__codelineno-136-4" href="#__codelineno-136-4"></a>Because test depends on requests (&lt;2.9.0) which doesn&#39;t match any versions, version solving failed.
</code></pre></div>
<p>可以看到, 报错了.</p>
</div>
</div>
</div>
</details>
<div class="footnote">
<hr />
<ol>
<li id="fn:1">
<p>【基础】什么是包、模块和库？—Python&amp;图像处理教程 文档. (n.d.). Retrieved June 15, 2024, from <a href="http://await.fun/PythonTutorial/p06/1.html">http://await.fun/PythonTutorial/p06/1.html</a>&#160;<a class="footnote-backref" href="#fnref:1" title="Jump back to footnote 1 in the text">&#8617;</a></p>
</li>
<li id="fn:2">
<p>python中import的用法—PythonJoy. (n.d.). Retrieved June 15, 2024, from <a href="https://joy9191.github.io/16196181446571.html">https://joy9191.github.io/16196181446571.html</a>&#160;<a class="footnote-backref" href="#fnref:2" title="Jump back to footnote 2 in the text">&#8617;</a></p>
</li>
<li id="fn:3">
<p>以python -m site命令为例解释-m选项-CSDN博客. (n.d.). Retrieved June 16, 2024, from <a href="https://blog.csdn.net/jiaxin576/article/details/138574683">https://blog.csdn.net/jiaxin576/article/details/138574683</a>&#160;<a class="footnote-backref" href="#fnref:3" title="Jump back to footnote 3 in the text">&#8617;</a></p>
</li>
<li id="fn:4">
<p>使用模块. (n.d.). Retrieved June 16, 2024, from <a href="https://www.liaoxuefeng.com/wiki/1016959663602400/1017455068170048">https://www.liaoxuefeng.com/wiki/1016959663602400/1017455068170048</a>&#160;<a class="footnote-backref" href="#fnref:4" title="Jump back to footnote 4 in the text">&#8617;</a></p>
</li>
<li id="fn:5">
<p>ennethreitz/setup.py: 📦 A Human’s Ultimate Guide to setup.py. (n.d.). Retrieved June 16, 2024, from <a href="https://github.com/kennethreitz/setup.py">https://github.com/kennethreitz/setup.py</a>&#160;<a class="footnote-backref" href="#fnref:5" title="Jump back to footnote 5 in the text">&#8617;</a></p>
</li>
<li id="fn:6">
<p>Python中__init__.py文件的作用—小蓝博客. (n.d.). Retrieved June 18, 2024, from <a href="https://www.8kiz.cn/archives/20137.html">https://www.8kiz.cn/archives/20137.html</a>&#160;<a class="footnote-backref" href="#fnref:6" title="Jump back to footnote 6 in the text">&#8617;</a></p>
</li>
<li id="fn:7">
<p>Python入门之——Package内的__main__.py和__init__.py_51CTO博客___main__.py文件. (n.d.). Retrieved June 18, 2024, from <a href="https://blog.51cto.com/feishujun/5513660">https://blog.51cto.com/feishujun/5513660</a>&#160;<a class="footnote-backref" href="#fnref:7" title="Jump back to footnote 7 in the text">&#8617;</a></p>
</li>
<li id="fn:8">
<p>Henry. (2021, May 23). 一文理解Python导入机制. Henry’s Blog. <a href="https://hzhu212.github.io/posts/b9859a94/index.html">https://hzhu212.github.io/posts/b9859a94/index.html</a>&#160;<a class="footnote-backref" href="#fnref:8" title="Jump back to footnote 8 in the text">&#8617;</a></p>
</li>
<li id="fn:9">
<p>The import system. (n.d.). Python Documentation. Retrieved June 18, 2024, from <a href="https://docs.python.org/3/reference/import.html">https://docs.python.org/3/reference/import.html</a>&#160;<a class="footnote-backref" href="#fnref:9" title="Jump back to footnote 9 in the text">&#8617;</a></p>
</li>
<li id="fn:10">
<p>Command line and environment. (n.d.). Python Documentation. Retrieved June 18, 2024, from <a href="https://docs.python.org/3/using/cmdline.html">https://docs.python.org/3/using/cmdline.html</a>&#160;<a class="footnote-backref" href="#fnref:10" title="Jump back to footnote 10 in the text">&#8617;</a></p>
</li>
<li id="fn:11">
<p>Basic usage | Documentation | Poetry—Python dependency management and packaging made easy. (n.d.). Retrieved July 6, 2024, from <a href="https://python-poetry.org/docs/basic-usage/#installing-without-poetrylock">https://python-poetry.org/docs/basic-usage/#installing-without-poetrylock</a>&#160;<a class="footnote-backref" href="#fnref:11" title="Jump back to footnote 11 in the text">&#8617;</a></p>
</li>
</ol>
</div>







  
    
  
  
    
  


  <aside class="md-source-file">
    
      
  <span class="md-source-file__fact">
    <span class="md-icon" title="Last update">
      <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M21 13.1c-.1 0-.3.1-.4.2l-1 1 2.1 2.1 1-1c.2-.2.2-.6 0-.8l-1.3-1.3c-.1-.1-.2-.2-.4-.2m-1.9 1.8-6.1 6V23h2.1l6.1-6.1zM12.5 7v5.2l4 2.4-1 1L11 13V7zM11 21.9c-5.1-.5-9-4.8-9-9.9C2 6.5 6.5 2 12 2c5.3 0 9.6 4.1 10 9.3-.3-.1-.6-.2-1-.2s-.7.1-1 .2C19.6 7.2 16.2 4 12 4c-4.4 0-8 3.6-8 8 0 4.1 3.1 7.5 7.1 7.9l-.1.2z"/></svg>
    </span>
    <span class="git-revision-date-localized-plugin git-revision-date-localized-plugin-date">2024年9月30日</span>
  </span>

    
    
      
  <span class="md-source-file__fact">
    <span class="md-icon" title="Created">
      <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M14.47 15.08 11 13V7h1.5v5.25l3.08 1.83c-.41.28-.79.62-1.11 1m-1.39 4.84c-.36.05-.71.08-1.08.08-4.42 0-8-3.58-8-8s3.58-8 8-8 8 3.58 8 8c0 .37-.03.72-.08 1.08.69.1 1.33.32 1.92.64.1-.56.16-1.13.16-1.72 0-5.5-4.5-10-10-10S2 6.5 2 12s4.47 10 10 10c.59 0 1.16-.06 1.72-.16-.32-.59-.54-1.23-.64-1.92M18 15v3h-3v2h3v3h2v-3h3v-2h-3v-3z"/></svg>
    </span>
    <span class="git-revision-date-localized-plugin git-revision-date-localized-plugin-date">2024年6月15日</span>
  </span>

    
    
    
      
  <span class="md-source-file__fact">
    
      
  <span class="md-icon" title="Contributors">
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M12 2A10 10 0 0 0 2 12c0 4.42 2.87 8.17 6.84 9.5.5.08.66-.23.66-.5v-1.69c-2.77.6-3.36-1.34-3.36-1.34-.46-1.16-1.11-1.47-1.11-1.47-.91-.62.07-.6.07-.6 1 .07 1.53 1.03 1.53 1.03.87 1.52 2.34 1.07 2.91.83.09-.65.35-1.09.63-1.34-2.22-.25-4.55-1.11-4.55-4.92 0-1.11.38-2 1.03-2.71-.1-.25-.45-1.29.1-2.64 0 0 .84-.27 2.75 1.02.79-.22 1.65-.33 2.5-.33s1.71.11 2.5.33c1.91-1.29 2.75-1.02 2.75-1.02.55 1.35.2 2.39.1 2.64.65.71 1.03 1.6 1.03 2.71 0 3.82-2.34 4.66-4.57 4.91.36.31.69.92.69 1.85V21c0 .27.16.59.67.5C19.14 20.16 22 16.42 22 12A10 10 0 0 0 12 2"/></svg>
  </span>
  <span>GitHub</span>

    
    <nav>
      
        <a href="https://github.com/ricolxwz" class="md-author" title="@ricolxwz">
          
          <img src="https://avatars.githubusercontent.com/u/92409532?v=4&size=72" alt="ricolxwz">
        </a>
      
      
      
    </nav>
  </span>

    
  </aside>


  




                
              </article>
            </div>
          
          
  <script>var tabs=__md_get("__tabs");if(Array.isArray(tabs))e:for(var set of document.querySelectorAll(".tabbed-set")){var labels=set.querySelector(".tabbed-labels");for(var tab of tabs)for(var label of labels.getElementsByTagName("label"))if(label.innerText.trim()===tab){var input=document.getElementById(label.htmlFor);input.checked=!0;continue e}}</script>

<script>var target=document.getElementById(location.hash.slice(1));target&&target.name&&(target.checked=target.name.startsWith("__tabbed_"))</script>
        </div>
        
          <button type="button" class="md-top md-icon" data-md-component="top" hidden>
  
  <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M13 20h-2V8l-5.5 5.5-1.42-1.42L12 4.16l7.92 7.92-1.42 1.42L13 8z"/></svg>
  Back to top
</button>
        
      </main>
      
        <footer class="md-footer">
  
  <div class="md-footer-meta md-typeset">
    <div class="md-footer-meta__inner md-grid">
      <div class="md-copyright">
  
    <div class="md-copyright__highlight">
      <p xmlns:cc="http://creativecommons.org/ns#" >版权所有 &copy 2024-至今 由 <span property="cc:attributionName">许文泽</span> 采用 <a href="https://creativecommons.org/licenses/by-nc/4.0/?ref=chooser-v1" target="_blank" rel="license noopener noreferrer" style="display:inline-block;">CC BY-NC 4.0&nbsp</a>许可证发布</p>
    </div>
  
  
</div>
      
        <div class="md-social">
  
    
    
    
    
      
      
    
    <a href="https://buymeacoffee.com/ricolxwz" target="_blank" rel="noopener" title="buymeacoffee.com" class="md-social__link">
      <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 512 512"><!--!Font Awesome Free 6.6.0 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free Copyright 2024 Fonticons, Inc.--><path d="M88 0C74.7 0 64 10.7 64 24c0 38.9 23.4 59.4 39.1 73.1l1.1 1C120.5 112.3 128 119.9 128 136c0 13.3 10.7 24 24 24s24-10.7 24-24c0-38.9-23.4-59.4-39.1-73.1l-1.1-1C119.5 47.7 112 40.1 112 24c0-13.3-10.7-24-24-24zM32 192c-17.7 0-32 14.3-32 32L0 416c0 53 43 96 96 96l192 0c53 0 96-43 96-96l16 0c61.9 0 112-50.1 112-112s-50.1-112-112-112l-48 0L32 192zm352 64l16 0c26.5 0 48 21.5 48 48s-21.5 48-48 48l-16 0 0-96zM224 24c0-13.3-10.7-24-24-24s-24 10.7-24 24c0 38.9 23.4 59.4 39.1 73.1l1.1 1C232.5 112.3 240 119.9 240 136c0 13.3 10.7 24 24 24s24-10.7 24-24c0-38.9-23.4-59.4-39.1-73.1l-1.1-1C231.5 47.7 224 40.1 224 24z"/></svg>
    </a>
  
    
    
    
    
      
      
    
    <a href="https://ricolxwz.de" target="_blank" rel="noopener" title="ricolxwz.de" class="md-social__link">
      <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 512 512"><!--!Font Awesome Free 6.6.0 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free Copyright 2024 Fonticons, Inc.--><path d="M256 512A256 256 0 1 0 256 0a256 256 0 1 0 0 512zm50.7-186.9L162.4 380.6c-19.4 7.5-38.5-11.6-31-31l55.5-144.3c3.3-8.5 9.9-15.1 18.4-18.4l144.3-55.5c19.4-7.5 38.5 11.6 31 31L325.1 306.7c-3.2 8.5-9.9 15.1-18.4 18.4zM288 256a32 32 0 1 0 -64 0 32 32 0 1 0 64 0z"/></svg>
    </a>
  
    
    
    
    
      
      
    
    <a href="https://github.com/ricolxwz" target="_blank" rel="noopener" title="github.com" class="md-social__link">
      <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 496 512"><!--! Font Awesome Free 6.6.0 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2024 Fonticons, Inc.--><path d="M165.9 397.4c0 2-2.3 3.6-5.2 3.6-3.3.3-5.6-1.3-5.6-3.6 0-2 2.3-3.6 5.2-3.6 3-.3 5.6 1.3 5.6 3.6m-31.1-4.5c-.7 2 1.3 4.3 4.3 4.9 2.6 1 5.6 0 6.2-2s-1.3-4.3-4.3-5.2c-2.6-.7-5.5.3-6.2 2.3m44.2-1.7c-2.9.7-4.9 2.6-4.6 4.9.3 2 2.9 3.3 5.9 2.6 2.9-.7 4.9-2.6 4.6-4.6-.3-1.9-3-3.2-5.9-2.9M244.8 8C106.1 8 0 113.3 0 252c0 110.9 69.8 205.8 169.5 239.2 12.8 2.3 17.3-5.6 17.3-12.1 0-6.2-.3-40.4-.3-61.4 0 0-70 15-84.7-29.8 0 0-11.4-29.1-27.8-36.6 0 0-22.9-15.7 1.6-15.4 0 0 24.9 2 38.6 25.8 21.9 38.6 58.6 27.5 72.9 20.9 2.3-16 8.8-27.1 16-33.7-55.9-6.2-112.3-14.3-112.3-110.5 0-27.5 7.6-41.3 23.6-58.9-2.6-6.5-11.1-33.3 2.6-67.9 20.9-6.5 69 27 69 27 20-5.6 41.5-8.5 62.8-8.5s42.8 2.9 62.8 8.5c0 0 48.1-33.6 69-27 13.7 34.7 5.2 61.4 2.6 67.9 16 17.7 25.8 31.5 25.8 58.9 0 96.5-58.9 104.2-114.8 110.5 9.2 7.9 17 22.9 17 46.4 0 33.7-.3 75.4-.3 83.6 0 6.5 4.6 14.4 17.3 12.1C428.2 457.8 496 362.9 496 252 496 113.3 383.5 8 244.8 8M97.2 352.9c-1.3 1-1 3.3.7 5.2 1.6 1.6 3.9 2.3 5.2 1 1.3-1 1-3.3-.7-5.2-1.6-1.6-3.9-2.3-5.2-1m-10.8-8.1c-.7 1.3.3 2.9 2.3 3.9 1.6 1 3.6.7 4.3-.7.7-1.3-.3-2.9-2.3-3.9-2-.6-3.6-.3-4.3.7m32.4 35.6c-1.6 1.3-1 4.3 1.3 6.2 2.3 2.3 5.2 2.6 6.5 1 1.3-1.3.7-4.3-1.3-6.2-2.2-2.3-5.2-2.6-6.5-1m-11.4-14.7c-1.6 1-1.6 3.6 0 5.9s4.3 3.3 5.6 2.3c1.6-1.3 1.6-3.9 0-6.2-1.4-2.3-4-3.3-5.6-2"/></svg>
    </a>
  
    
    
    
    
      
      
    
    <a href="https://gitlab.com/ricolxwz" target="_blank" rel="noopener" title="gitlab.com" class="md-social__link">
      <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 512 512"><!--! Font Awesome Free 6.6.0 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2024 Fonticons, Inc.--><path d="m503.5 204.6-.7-1.8-69.7-181.78c-1.4-3.57-3.9-6.59-7.2-8.64-2.4-1.55-5.1-2.515-8-2.81s-5.7.083-8.4 1.11c-2.7 1.02-5.1 2.66-7.1 4.78-1.9 2.12-3.3 4.67-4.1 7.44l-47 144H160.8l-47.1-144c-.8-2.77-2.2-5.31-4.1-7.43-2-2.12-4.4-3.75-7.1-4.77a18.1 18.1 0 0 0-8.38-1.113 18.4 18.4 0 0 0-8.04 2.793 18.1 18.1 0 0 0-7.16 8.64L9.267 202.8l-.724 1.8a129.57 129.57 0 0 0-3.52 82c7.747 26.9 24.047 50.7 46.447 67.6l.27.2.59.4 105.97 79.5 52.6 39.7 32 24.2c3.7 1.9 8.3 4.3 13 4.3s9.3-2.4 13-4.3l32-24.2 52.6-39.7 106.7-79.9.3-.3c22.4-16.9 38.7-40.6 45.6-67.5 8.6-27 7.4-55.8-2.6-82"/></svg>
    </a>
  
    
    
    
    
      
      
    
    <a href="https://hub.docker.com/u/ricolxwz" target="_blank" rel="noopener" title="hub.docker.com" class="md-social__link">
      <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 640 512"><!--! Font Awesome Free 6.6.0 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2024 Fonticons, Inc.--><path d="M349.9 236.3h-66.1v-59.4h66.1zm0-204.3h-66.1v60.7h66.1zm78.2 144.8H362v59.4h66.1zm-156.3-72.1h-66.1v60.1h66.1zm78.1 0h-66.1v60.1h66.1zm276.8 100c-14.4-9.7-47.6-13.2-73.1-8.4-3.3-24-16.7-44.9-41.1-63.7l-14-9.3-9.3 14c-18.4 27.8-23.4 73.6-3.7 103.8-8.7 4.7-25.8 11.1-48.4 10.7H2.4c-8.7 50.8 5.8 116.8 44 162.1 37.1 43.9 92.7 66.2 165.4 66.2 157.4 0 273.9-72.5 328.4-204.2 21.4.4 67.6.1 91.3-45.2 1.5-2.5 6.6-13.2 8.5-17.1zm-511.1-27.9h-66v59.4h66.1v-59.4zm78.1 0h-66.1v59.4h66.1zm78.1 0h-66.1v59.4h66.1zm-78.1-72.1h-66.1v60.1h66.1z"/></svg>
    </a>
  
    
    
    
    
      
      
    
    <a href="https://t.me/ricolxwz" target="_blank" rel="noopener" title="t.me" class="md-social__link">
      <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 496 512"><!--!Font Awesome Free 6.6.0 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free Copyright 2024 Fonticons, Inc.--><path d="M248 8C111 8 0 119 0 256S111 504 248 504 496 393 496 256 385 8 248 8zM363 176.7c-3.7 39.2-19.9 134.4-28.1 178.3-3.5 18.6-10.3 24.8-16.9 25.4-14.4 1.3-25.3-9.5-39.3-18.7-21.8-14.3-34.2-23.2-55.3-37.2-24.5-16.1-8.6-25 5.3-39.5 3.7-3.8 67.1-61.5 68.3-66.7 .2-.7 .3-3.1-1.2-4.4s-3.6-.8-5.1-.5q-3.3 .7-104.6 69.1-14.8 10.2-26.9 9.9c-8.9-.2-25.9-5-38.6-9.1-15.5-5-27.9-7.7-26.8-16.3q.8-6.7 18.5-13.7 108.4-47.2 144.6-62.3c68.9-28.6 83.2-33.6 92.5-33.8 2.1 0 6.6 .5 9.6 2.9a10.5 10.5 0 0 1 3.5 6.7A43.8 43.8 0 0 1 363 176.7z"/></svg>
    </a>
  
    
    
    
    
    <a href="mailto:ricol.xwz@outlook.com" target="_blank" rel="noopener" title="" class="md-social__link">
      <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 512 512"><!--!Font Awesome Free 6.6.0 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free Copyright 2024 Fonticons, Inc.--><path d="M256 64C150 64 64 150 64 256s86 192 192 192c17.7 0 32 14.3 32 32s-14.3 32-32 32C114.6 512 0 397.4 0 256S114.6 0 256 0S512 114.6 512 256l0 32c0 53-43 96-96 96c-29.3 0-55.6-13.2-73.2-33.9C320 371.1 289.5 384 256 384c-70.7 0-128-57.3-128-128s57.3-128 128-128c27.9 0 53.7 8.9 74.7 24.1c5.7-5 13.1-8.1 21.3-8.1c17.7 0 32 14.3 32 32l0 80 0 32c0 17.7 14.3 32 32 32s32-14.3 32-32l0-32c0-106-86-192-192-192zm64 192a64 64 0 1 0 -128 0 64 64 0 1 0 128 0z"/></svg>
    </a>
  
</div>
      
    </div>
  </div>
</footer>
      
    </div>
    <div class="md-dialog" data-md-component="dialog">
      <div class="md-dialog__inner md-typeset"></div>
    </div>
    
    
    <script id="__config" type="application/json">{"base": "../../..", "features": ["content.code.annotate", "content.code.copy", "content.code.select", "content.tabs.link", "content.footnote.tooltips", "content.tooltips", "content.action.edit", "content.action.view", "navigation.tabs", "navitation.sections", "navigation.expand", "navigation.indexes", "navigation.top", "search.suggest", "search.highlight", "search.share", "navigation.tracking"], "search": "../../../assets/javascripts/workers/search.6ce7567c.min.js", "translations": {"clipboard.copied": "Copied to clipboard", "clipboard.copy": "Copy to clipboard", "search.result.more.one": "1 more on this page", "search.result.more.other": "# more on this page", "search.result.none": "No matching documents", "search.result.one": "1 matching document", "search.result.other": "# matching documents", "search.result.placeholder": "Type to start searching", "search.result.term.missing": "Missing", "select.version": "Select version"}}</script>
    
    
      <script src="../../../assets/javascripts/bundle.83f73b43.min.js"></script>
      
        <script src="../../../javascripts/favicon.js"></script>
      
        <script src="../../../javascripts/katex.js"></script>
      
        <script src="https://unpkg.com/katex@0/dist/katex.min.js"></script>
      
        <script src="https://unpkg.com/katex@0/dist/contrib/auto-render.min.js"></script>
      
        <script src="../../../js/open_in_new_tab.js"></script>
      
        <script src="../../../js/open_in_new_tab.js"></script>
      
    
  <script id="init-glightbox">const lightbox = GLightbox({"touchNavigation": true, "loop": false, "zoomable": true, "draggable": true, "openEffect": "zoom", "closeEffect": "zoom", "slideEffect": "slide"});
document$.subscribe(() => { lightbox.reload() });
</script></body>
</html>